(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("os0x"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3Pt+":function(t,e,n){"use strict";n.d(e,"a",function(){return v}),n.d(e,"b",function(){return wt}),n.d(e,"c",function(){return Mt}),n.d(e,"d",function(){return bt}),n.d(e,"e",function(){return Vt}),n.d(e,"f",function(){return _t}),n.d(e,"g",function(){return Rt}),n.d(e,"h",function(){return Dt}),n.d(e,"i",function(){return Gt}),n.d(e,"j",function(){return F}),n.d(e,"k",function(){return U}),n.d(e,"l",function(){return Ct}),n.d(e,"m",function(){return kt}),n.d(e,"n",function(){return q}),n.d(e,"o",function(){return zt}),n.d(e,"p",function(){return Qt}),n.d(e,"q",function(){return Ht}),n.d(e,"r",function(){return E}),n.d(e,"s",function(){return Nt});var r=n("fXoL"),i=n("ofXK"),o=n("HDdC"),s=n("DH7j"),a=n("lJxs"),u=n("XoHu"),c=n("Cfvw");function l(t,e){return new o.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(c.a)(t[a]);let l=!1;n.add(u.subscribe({next:t=>{l||(l=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&l||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const h=new r.q("NgValueAccessor"),f={provide:h,useExisting:Object(r.S)(()=>p),multi:!0};let p=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l))},t.\u0275dir=r.Cb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.wb([f])]}),t})();const d={provide:h,useExisting:Object(r.S)(()=>v),multi:!0},g=new r.q("CompositionEventMode");let v=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(i.o)()?Object(i.o)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l),r.Hb(g,8))},t.\u0275dir=r.Cb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Rb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.wb([d])]}),t})();function m(t){return null==t||0===t.length}function y(t){return null!=t&&"number"==typeof t.length}const b=new r.q("NgValidators"),_=new r.q("NgAsyncValidators"),w=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class E{static min(t){return e=>{if(m(e.value)||m(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(m(e.value)||m(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return m(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return m(t.value)||w.test(t.value)?null:{email:!0}}static minLength(t){return e=>m(e.value)||!y(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>y(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return E.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(m(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(O);return 0==e.length?null:function(t){return T(I(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(O);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(s.a)(e))return l(e,null);if(Object(u.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return l(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return l(t=1===t.length&&Object(s.a)(t[0])?t[0]:t,null).pipe(Object(a.a)(t=>e(...t)))}return l(t,null)}(I(t,e).map(C)).pipe(Object(a.a)(T))}}}function O(t){return null!=t}function C(t){const e=Object(r.pb)(t)?Object(c.a)(t):t;return Object(r.ob)(e),e}function T(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function I(t,e){return e.map(e=>e(t))}function S(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function A(t){return null!=t?E.compose(S(t)):null}function k(t){return null!=t?E.composeAsync(S(t)):null}function N(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function j(t){return t._rawValidators}function x(t){return t._rawAsyncValidators}let R=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=A(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=k(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Cb({type:t}),t})(),P=(()=>{class t extends R{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return D(e||t)},t.\u0275dir=r.Cb({type:t,features:[r.ub]}),t})();const D=r.Mb(P);class L extends R{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class M{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let F=(()=>{class t extends M{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(L,2))},t.\u0275dir=r.Cb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.zb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.ub]}),t})(),U=(()=>{class t extends M{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(P,2))},t.\u0275dir=r.Cb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.zb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.ub]}),t})();const V={provide:h,useExisting:Object(r.S)(()=>q),multi:!0};let q=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l))},t.\u0275dir=r.Cb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.wb([V])]}),t})();const H={provide:h,useExisting:Object(r.S)(()=>z),multi:!0};let B=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(L),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l),r.Hb(B),r.Hb(r.r))},t.\u0275dir=r.Cb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.wb([H])]}),t})();const W={provide:h,useExisting:Object(r.S)(()=>K),multi:!0};let K=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l))},t.\u0275dir=r.Cb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.wb([W])]}),t})();const G={provide:h,useExisting:Object(r.S)(()=>Q),multi:!0};let Q=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l))},t.\u0275dir=r.Cb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Rb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.wb([G])]}),t})();const $={provide:h,useExisting:Object(r.S)(()=>J),multi:!0};let J=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.D),r.Hb(r.l))},t.\u0275dir=r.Cb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.wb([$])]}),t})();function X(t,e){return[...e.path,t]}function Y(t,e){tt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&nt(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&nt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Z(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tt(t,e,n){const r=j(t);null!==e.validator?t.setValidators(N(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=x(t);if(null!==e.asyncValidator?t.setAsyncValidators(N(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Z(e._rawValidators,n),Z(e._rawAsyncValidators,n)}}function et(t,e,n){if(null!==t){if(null!==e.validator){const n=j(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=x(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};Z(e._rawValidators,t),Z(e._rawAsyncValidators,t)}}function nt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function rt(t,e){tt(t,e,!1)}function it(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const ot=[p,K,q,Q,J,z];function st(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function at(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===v?n=t:(e=t,ot.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function ut(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ct="VALID",lt="INVALID",ht="PENDING",ft="DISABLED";function pt(t){return(mt(t)?t.validators:t)||null}function dt(t){return Array.isArray(t)?A(t):t||null}function gt(t,e){return(mt(e)?e.asyncValidators:t)||null}function vt(t){return Array.isArray(t)?k(t):t||null}function mt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class yt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=dt(this._rawValidators),this._composedAsyncValidatorFn=vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ct}get invalid(){return this.status===lt}get pending(){return this.status==ht}get disabled(){return this.status===ft}get enabled(){return this.status!==ft}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=dt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=vt(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ht,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ft,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ct,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ct&&this.status!==ht||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ft:ct}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ht,this._hasOwnPendingAsyncValidator=!0;const e=C(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof _t?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof wt&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ft:this.errors?lt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ht)?ht:this._anyControlsHaveStatus(lt)?lt:ct}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){mt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bt extends yt{constructor(t=null,e,n){super(pt(e),gt(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ut(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ut(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class _t extends yt{constructor(t,e,n){super(pt(e),gt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof bt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class wt extends yt{constructor(t,e,n){super(pt(e),gt(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof bt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Et={provide:P,useExisting:Object(r.S)(()=>Ct)},Ot=(()=>Promise.resolve(null))();let Ct=(()=>{class t extends P{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new _t({},A(t),k(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ot.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Y(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ot.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),ut(this._directives,t)})}addFormGroup(t){Ot.then(()=>{const e=this._findContainer(t.path),n=new _t({});rt(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ot.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Ot.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,st(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(b,10),r.Hb(_,10))},t.\u0275dir=r.Cb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Rb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.wb([Et]),r.ub]}),t})(),Tt=(()=>{class t extends P{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return X(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return t.\u0275fac=function(e){return It(e||t)},t.\u0275dir=r.Cb({type:t,features:[r.ub]}),t})();const It=r.Mb(Tt),St={provide:L,useExisting:Object(r.S)(()=>kt)},At=(()=>Promise.resolve(null))();let kt=(()=>{class t extends L{constructor(t,e,n,i){super(),this.control=new bt,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=at(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),it(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?X(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Y(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){At.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;At.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(P,9),r.Hb(b,10),r.Hb(_,10),r.Hb(h,10))},t.\u0275dir=r.Cb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.wb([St]),r.ub,r.vb]}),t})(),Nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Cb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const jt=new r.q("NgModelWithFormControlWarning"),xt={provide:P,useExisting:Object(r.S)(()=>Rt)};let Rt=(()=>{class t extends P{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Y(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ut(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);rt(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);rt(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,st(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),et(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}(t.control||null,t),e&&Y(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tt(this.form,this,!1),this._oldForm&&et(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(b,10),r.Hb(_,10))},t.\u0275dir=r.Cb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Rb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.wb([xt]),r.ub,r.vb]}),t})();const Pt={provide:P,useExisting:Object(r.S)(()=>Dt)};let Dt=(()=>{class t extends Tt{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}_checkParentType(){Ft(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(P,13),r.Hb(b,10),r.Hb(_,10))},t.\u0275dir=r.Cb({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.wb([Pt]),r.ub]}),t})();const Lt={provide:P,useExisting:Object(r.S)(()=>Mt)};let Mt=(()=>{class t extends P{constructor(t,e,n){super(),this._parent=t,this._setValidators(e),this._setAsyncValidators(n)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return X(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ft(this._parent)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(P,13),r.Hb(b,10),r.Hb(_,10))},t.\u0275dir=r.Cb({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.wb([Lt]),r.ub]}),t})();function Ft(t){return!(t instanceof Dt||t instanceof Rt||t instanceof Mt)}const Ut={provide:L,useExisting:Object(r.S)(()=>Vt)};let Vt=(()=>{class t extends L{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=at(0,i)}set isDisabled(t){}ngOnChanges(e){var n,i;this._added||this._setUpControl(),it(e,this.viewModel)&&(n=t,this,i=this._ngModelWarningConfig,Object(r.T)()&&"never"!==i&&((null!==i&&"once"!==i||n._ngModelWarningSentOnce)&&("always"!==i||this._ngModelWarningSent)||(n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return X(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(P,13),r.Hb(b,10),r.Hb(_,10),r.Hb(h,10),r.Hb(jt,8))},t.\u0275dir=r.Cb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.wb([Ut]),r.ub,r.vb]}),t._ngModelWarningSentOnce=!1,t})();const qt={provide:b,useExisting:Object(r.S)(()=>Ht),multi:!0};let Ht=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?E.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Cb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.yb("required",e.required?"":null)},inputs:{required:"required"},features:[r.wb([qt])]}),t})();const Bt={provide:b,useExisting:Object(r.S)(()=>zt),multi:!0};let zt=(()=>{class t{constructor(){this._validator=E.nullValidator}ngOnChanges(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}_createValidator(){this._validator=E.pattern(this.pattern)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Cb({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,e){2&t&&r.yb("pattern",e.pattern?e.pattern:null)},inputs:{pattern:"pattern"},features:[r.wb([Bt]),r.vb]}),t})(),Wt=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)}}),t})(),Kt=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new _t(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new bt(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new wt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof bt||t instanceof _t||t instanceof wt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),Gt=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[B],imports:[Wt]}),t})(),Qt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:jt,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[Kt,B],imports:[Wt]}),t})()},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"3V6w":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("fXoL");let i=(()=>{class t{constructor(){this.isOpen=!1}toggleOpen(){this.isOpen=!this.isOpen}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Cb({type:t,selectors:[["","appDropdown",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Rb("click",function(){return e.toggleOpen()}),2&t&&r.zb("open",e.isOpen)}}),t})()},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("os0x"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),p=new s.b("@firebase/database"),d=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},m=null,y=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,m=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===y&&(y=!1,null===m&&!0===f.get("logging_enabled")&&b(!0)),m){var n=v.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));p.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw p.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));p.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",S="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===I||e===S)return-1;if(e===I||t===S)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=j(t[e[i]]);return r+"}"},x=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,D,L,M,F,U,V,q,H,B,z=function(t){var e,n,r,i,s;Object(o.f)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},W=new RegExp("^-?(0*)\\d{1,10}$"),K=function(t){if(W.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},$=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),J=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),X="firebaseio.com",Y="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===Y)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new $(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.o)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof $?new J(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.H)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,function(t,e){var n=new $(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},mt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),mt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),mt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),mt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),mt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Et=(P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,L=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=P.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===L[e];e--)L[e]=0;L[e]++}else for(e=0;e<12;e++)L[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=P.charAt(L[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Ot=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ot(I,t),r=new Ot(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ot.MIN},t}(),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return M},set:function(t){M=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return new Ot(S,M)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ot(t,M)},e.prototype.toString=function(){return".key"},e}(Ct),It=new Tt,St=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return U},set:function(t){U=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return new Ot(S,new kt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=V(t);return new Ot(e,new kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Pt.EMPTY_NODE,this.right=null!=o?o:Pt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Pt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Pt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Lt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Mt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new xt(s,o.node,xt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new xt(s,o.node,xt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new xt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,xt.BLACK):(a(h,xt.BLACK),a(h,xt.RED))}return o}(new Lt(t.length));return new Pt(r||e,o)},Ft={},Ut=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Ft&&Nt,"ChildrenNode.ts has not been loaded"),H=H||new t({".priority":Ft},{".priority":Nt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==It,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ot.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Mt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ot.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Mt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ot(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Ot(e.name,r)):t}),this.indexSet_)},t}();function Vt(t,e){return A(t.name,e.name)}function qt(t,e){return A(t,e)}var Ht=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return B||(B=new t(new Pt(qt),null,Ut.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||B},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?B:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ot(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?B:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Nt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(Nt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ot(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ot(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ot(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ot.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ot.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bt?-1:0},t.prototype.withIndex=function(e){if(e===It||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===It||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Nt),r=e.getIterator(Nt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===It?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Bt=new(function(t){function e(){return t.call(this,new Pt(qt),Ht.EMPTY_NODE,Ut.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ht.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ht));function zt(t,e){if(void 0===e&&(e=null),null===t)return Ht.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new kt(t,zt(e));if(t instanceof Array){var n=Ht.EMPTY_NODE;return R(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(zt(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ot(t,n)))}}),0===r.length)return Ht.EMPTY_NODE;var s=Mt(r,Vt,function(t){return t.name},qt);if(i){var a=Mt(r,Nt.getCompare());return new Ht(s,zt(e),new Ut({".priority":a},{".priority":Nt}))}return new Ht(s,zt(e),Ut.Default)}Object.defineProperties(Ot,{MIN:{value:new Ot(I,Ht.EMPTY_NODE)},MAX:{value:new Ot(S,Bt)}}),Tt.__EMPTY_NODE=Ht.EMPTY_NODE,kt.__childrenNodeConstructor=Ht,F=Bt,q=Bt,V=zt;var Wt,Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ot.MIN},e.prototype.maxPost=function(){return Ot.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new Ot(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=zt(t),r=Ht.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ot(e,r)},e.prototype.maxPost=function(){var t=Ht.EMPTY_NODE.updateChild(this.indexPath_,Bt);return new Ot(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new $(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Nt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new $(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Nt))})},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),$t=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Xt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new $t("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Yt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new $t(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===It){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof Gt||t.getIndex()===Kt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),pt("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Xt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Yt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),pt("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Xt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Yt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),pt("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new $(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(It);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Nt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),dt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),dt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),dt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=j(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new kt(a,zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new kt(o))),u.forEachChild(Nt,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nt,function(t,e){n.remember(new $(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new $(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.f)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $(e));return new t($.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),de=function(){function t(t,e){void 0===e&&(ue||(ue=new Pt(k)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,function(t,e){n=n.set(new $(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:$.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new $(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_($.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,$.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,$.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_($.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,$.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new $(e));return n.isEmpty()?null:n.value?new ve(this.source,$.Empty,n.value):new t(this.source,$.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ye=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ye(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ye(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ye(Ht.EMPTY_NODE,!1,!1),new ye(Ht.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Nt,function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Nt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ee=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Oe=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ye(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Te=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ie=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ee;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Te(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Ht?c:Ht.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);a=null!=d?this.filter_.updatePriority(p,d):s.getNode()}else{var g=e.popFront(),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(g,m):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Oe,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Ce(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ce(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ht.EMPTY_NODE}if(f.equals(p))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:de.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new $(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new $(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=de.Empty;return a.getNode().forEachChild(It,function(t,e){u=u.set(new $(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=de.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Oe,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof Ht,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ht.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite($.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Ot(t.childName,t.snapshotNode),r=new Ot(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ae=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ie(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ht.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ht.EMPTY_NODE,s.getNode(),null),c=new ye(a,o.isFullyInitialized(),r.filtersNodes()),l=new ye(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nt,function(t,e){n.push(_e.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),ke=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.f)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ht?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ht.EMPTY_NODE,u=!1);var c=new be(new ye(a,u,!1),new ye(r,i,!1));s=new Ae(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p,d=Object(i.e)(f.value,2),g=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ne=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new de(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new de(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,de.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild($.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nt,function(e,n){t.push(new Ot(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Ot(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new de(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return je($.Empty,this.writeTree_,t)},t.Empty=new t(new de(null)),t}();function je(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=je(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var xe=function(){function t(){this.visibleWrites_=Ne.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Re(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite($.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||Ht.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite($.Empty)?a.apply(n||Ht.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ht.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nt,function(t,e){var r=i.childCompoundWrite(new $(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode($.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,$.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ne.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=$.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=$.relativePath(a,n),r=r.addWrite($.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))u=$.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=$.relativePath(a,n)).isEmpty())r=r.addWrites($.Empty,s.children);else{var c=Object(o.G)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite($.Empty,l)}}}}}return r},t}(),Re=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Pe=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=de.Empty,this.pendingWriteTree_=new xe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ve(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=de.fromObject(e);return this.applyOperationToSyncPoints_(new me(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=de.Empty;return null!=n.snap?r=r.set($.Empty,!0):R(n.children,function(t,e){r=r.set(new $(t),e)}),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=de.fromObject(e);return this.applyOperationToSyncPoints_(new me(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=new ve(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=$.relativePath(s,e),c=de.fromObject(n),l=new me(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=$.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=$.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache($.Empty)):(u=new ke,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Ht.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache($.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var g=p[d],v=g.getQuery(),m=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),m.hashFn,m.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=$.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ht.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites($.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get($.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache($.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get($.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache($.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),De=function(){function t(){this.rootNode_=Ht.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ue=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ve=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new qe(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),qe=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();m&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),He=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Be=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(He),ze=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(He),We=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ke="start",Ge="close",Qe=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new We(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new $e(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ke)n.id=s,n.password=a;else{if(o!==Ge)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=x(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),$e=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Je="";function Xe(t){Je=t}var Ye=null;"undefined"!=typeof MozWebSocket?Ye=MozWebSocket:"undefined"!=typeof WebSocket&&(Ye=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(X)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Y,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+Je+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Ye(this.connURL,[],r)}else this.mySock=new Ye(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ye&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=x(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Qe,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=rn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Be.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ze.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Je.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Me.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Me.getOrCreateReporter(this.repoInfo_,function(){return new Ue(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new De,this.infoSyncTree_=new Pe({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Pe({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new $(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new $(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,function(t){return zt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=zt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,function(t){return zt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=zt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new $("/.info/"+t),r=zt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=zt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.J)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=zt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,function(e,n){i=!1,s[e]=oe(t.child(e),zt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),R(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree($.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree($.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath($.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=zt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&R(e,function(e,n){var i=zt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Fe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);R(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new _n(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ot(e,n))||(n=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ht.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ht.EMPTY_NODE);var i=this;return e.forEachChild(Nt,function(t,e){i.matches(new Ot(t,e))||(r=r.updateImmediateChild(t,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ln=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ot(e,n))||(n=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ht.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ht.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ht.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Ot(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(_e.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ht.EMPTY_NODE)):t},t}(),hn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Nt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new ln(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Nt?e=n.PRIORITY_INDEX:this.index_===Kt?e=n.VALUE_INDEX:this.index_===It?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(r[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),fn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,hn.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof $||(null===this.path.getFront()?vt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),mt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),mt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),mt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),mt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),mt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),mt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),mt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return mt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=fn,ke.__referenceConstructor=fn;var pn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),dn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new pn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof $?e:new $(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new pn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new $(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new dn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new fn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new fn(this,a.path),Nt);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(p=Object(o.G)(c,".priority"),Object(o.f)(ut(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ht.EMPTY_NODE).getPriority().val(),p=p;var g=this.generateServerValues(),v=zt(c,p),m=se(v,u,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ht.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===gn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=gn.SENT,c.retryCount++;var l=$.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new fn(n,e[s].path),c=new Qt(a,u,Nt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===gn.SENT_NEEDS_ABORT?gn.NEEDS_ABORT:gn.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===gn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=$.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===gn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var p=zt(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,g=this.generateServerValues(),v=se(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var m=new fn(this,t[s].path),y=new Qt(t[s].currentInputSnapshot,m,Nt);n.push(t[s].onComplete.bind(null,null,!1,y))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===gn.SENT_NEEDS_ABORT||(e[s].status===gn.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}};var vn,mn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),yn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),bn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return vn||(vn=new t),vn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new yn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new yn:new mn(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||O("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),_n=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new fn(this.repo_,$.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):bn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof fn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),Qe.forceAllow()},forceWebSockets:function(){Qe.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Xe(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:bn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),En=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var On=Object.freeze({__proto__:null,DataConnection:En,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){bn.getInstance().forceRestClient(t)}}),Cn=_n.ServerValue;!function(e){Xe(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return bn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:fn,Query:Zt,Database:_n,DataSnapshot:Qt,enableLogging:b,INTERNAL:wn,ServerValue:Cn,TEST_ACCESS:On}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},"9rNa":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t,e){this.name=t,this.amount=e}}},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},KFp4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fXoL"),i=n("qXBG");let o=(()=>{class t{constructor(t){this.authService=t}canActivate(t,e){return this.authService.isAuthenticated()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(i.a))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})()},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},PCNd:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("ofXK"),i=n("fXoL");let o=(()=>{class t{}return t.\u0275mod=i.Fb({type:t}),t.\u0275inj=i.Eb({factory:function(e){return new(e||t)},imports:[r.b]}),t})()},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp");class a extends o.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}var u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},ceC1:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("9rNa");class i{constructor(t,e,n,r){this.name=t,this.description=e,this.imagePath=n,this.ingredients=r}}var o=n("XNiG"),s=n("fXoL"),a=n("ozzT");let u=(()=>{class t{constructor(t){this.slService=t,this.recipesChanged=new o.a,this.recipes=[new i("Fries","Test Description","https://learnenglishteens.britishcouncil.org/sites/teens/files/a_recipe_1.jpg",[new r.a("French Fries",10),new r.a("Fried Fries",2)]),new i("Bread","Test Description1","https://learnenglishteens.britishcouncil.org/sites/teens/files/a_recipe_1.jpg",[new r.a("Bread",3),new r.a("Buns",3)])]}setRecipes(t){this.recipes=t,this.recipesChanged.next(this.recipes.slice())}getRecipes(){return this.recipes.slice()}getRecipe(t){return this.recipes.slice()[t]}addIngredientsToSL(t){this.slService.addIngredients(t)}addRecipe(t){this.recipes.push(t),this.recipesChanged.next(this.recipes)}deleteRecipe(t){this.recipes.splice(t,1),this.recipesChanged.next(this.recipes.slice())}updateRecipe(t,e){this.recipes[t]=e,this.recipesChanged.next(this.recipes.slice())}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.a))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac}),t})()},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return F}),n.d(e,"b",function(){return cu}),n.d(e,"c",function(){return iu}),n.d(e,"d",function(){return nu}),n.d(e,"e",function(){return ru}),n.d(e,"f",function(){return Zu}),n.d(e,"g",function(){return Bu}),n.d(e,"h",function(){return aa}),n.d(e,"i",function(){return _u}),n.d(e,"j",function(){return Ps}),n.d(e,"k",function(){return fu}),n.d(e,"l",function(){return Fs}),n.d(e,"m",function(){return Cr}),n.d(e,"n",function(){return La}),n.d(e,"o",function(){return io}),n.d(e,"p",function(){return _}),n.d(e,"q",function(){return M}),n.d(e,"r",function(){return wo}),n.d(e,"s",function(){return ea}),n.d(e,"t",function(){return na}),n.d(e,"u",function(){return hu}),n.d(e,"v",function(){return ya}),n.d(e,"w",function(){return Wu}),n.d(e,"x",function(){return ma}),n.d(e,"y",function(){return Fu}),n.d(e,"z",function(){return Ou}),n.d(e,"A",function(){return w}),n.d(e,"B",function(){return uu}),n.d(e,"C",function(){return au}),n.d(e,"D",function(){return Vs}),n.d(e,"E",function(){return Us}),n.d(e,"F",function(){return Ar}),n.d(e,"G",function(){return Hs}),n.d(e,"H",function(){return Sn}),n.d(e,"I",function(){return O}),n.d(e,"J",function(){return Qu}),n.d(e,"K",function(){return pa}),n.d(e,"L",function(){return ju}),n.d(e,"M",function(){return $}),n.d(e,"N",function(){return Bs}),n.d(e,"O",function(){return _a}),n.d(e,"P",function(){return rt}),n.d(e,"Q",function(){return Uu}),n.d(e,"R",function(){return nn}),n.d(e,"S",function(){return K}),n.d(e,"T",function(){return en}),n.d(e,"U",function(){return Xu}),n.d(e,"V",function(){return Pu}),n.d(e,"W",function(){return lu}),n.d(e,"X",function(){return so}),n.d(e,"Y",function(){return _s}),n.d(e,"Z",function(){return Tn}),n.d(e,"ab",function(){return un}),n.d(e,"bb",function(){return Ke}),n.d(e,"cb",function(){return Qe}),n.d(e,"db",function(){return Ye}),n.d(e,"eb",function(){return Je}),n.d(e,"fb",function(){return $e}),n.d(e,"gb",function(){return Xe}),n.d(e,"hb",function(){return vs}),n.d(e,"ib",function(){return Ju}),n.d(e,"jb",function(){return ms}),n.d(e,"kb",function(){return ys}),n.d(e,"lb",function(){return Ge}),n.d(e,"mb",function(){return z}),n.d(e,"nb",function(){return No}),n.d(e,"ob",function(){return Ko}),n.d(e,"pb",function(){return Wo}),n.d(e,"qb",function(){return gs}),n.d(e,"rb",function(){return qt}),n.d(e,"sb",function(){return C}),n.d(e,"tb",function(){return We}),n.d(e,"ub",function(){return Oo}),n.d(e,"vb",function(){return Rn}),n.d(e,"wb",function(){return js}),n.d(e,"xb",function(){return li}),n.d(e,"yb",function(){return Ro}),n.d(e,"zb",function(){return ns}),n.d(e,"Ab",function(){return Ja}),n.d(e,"Bb",function(){return dt}),n.d(e,"Cb",function(){return wt}),n.d(e,"Db",function(){return A}),n.d(e,"Eb",function(){return k}),n.d(e,"Fb",function(){return yt}),n.d(e,"Gb",function(){return Et}),n.d(e,"Hb",function(){return Mo}),n.d(e,"Ib",function(){return Bo}),n.d(e,"Jb",function(){return Ho}),n.d(e,"Kb",function(){return qo}),n.d(e,"Lb",function(){return zo}),n.d(e,"Mb",function(){return _r}),n.d(e,"Nb",function(){return hs}),n.d(e,"Ob",function(){return Ft}),n.d(e,"Pb",function(){return Fo}),n.d(e,"Qb",function(){return eu}),n.d(e,"Rb",function(){return Go}),n.d(e,"Sb",function(){return Xa}),n.d(e,"Tb",function(){return Jo}),n.d(e,"Ub",function(){return Uo}),n.d(e,"Vb",function(){return Xo}),n.d(e,"Wb",function(){return Da}),n.d(e,"Xb",function(){return Qa}),n.d(e,"Yb",function(){return Lo}),n.d(e,"Zb",function(){return pe}),n.d(e,"ac",function(){return An}),n.d(e,"bc",function(){return bt}),n.d(e,"cc",function(){return Do}),n.d(e,"dc",function(){return as}),n.d(e,"ec",function(){return us}),n.d(e,"fc",function(){return cs}),n.d(e,"gc",function(){return ls}),n.d(e,"hc",function(){return $a});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("z+Ro"),a=n("bHdf"),u=n("yCtX"),c=n("7o/Q");function l(){return function(t){return t.lift(new h(t))}}class h{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new f(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class f extends c.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class p extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new g(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return l()(this)}}const d=(()=>{const t=p.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class g extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function v(){return new r.a}function m(t){return{toString:t}.toString()}const y="__parameters__";function b(t,e,n){return m(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(y)?t[y]:Object.defineProperty(t,y,{value:[]})[y];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const _=b("Inject",t=>({token:t})),w=b("Optional"),E=b("Self"),O=b("SkipSelf");function C(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(C).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function T(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}function I(t){for(let e in t)if(t[e]===I)return e;throw Error("Could not find renamed property on target object.")}function S(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function A(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function k(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function N(t){return j(t,R)||j(t,D)}function j(t,e){return t.hasOwnProperty(e)?t[e]:null}function x(t){return t&&(t.hasOwnProperty(P)||t.hasOwnProperty(L))?t[P]:null}const R=I({"\u0275prov":I}),P=I({"\u0275inj":I}),D=I({ngInjectableDef:I}),L=I({ngInjectorDef:I});class M{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=A({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const F=new M("AnalyzeForEntryComponents");var U=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({});const V="undefined"!=typeof globalThis&&globalThis,q="undefined"!=typeof window&&window,H="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,z=V||B||q||H,W=I({__forward_ref__:I});function K(t){return t.__forward_ref__=K,t.toString=function(){return C(this())},t}function G(t){return Q(t)?t():t}function Q(t){return"function"==typeof t&&t.hasOwnProperty(W)&&t.__forward_ref__===K}const $=Function;function J(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),J(r,e)):e!==t&&e.push(r)}return e}function X(t,e){t.forEach(t=>Array.isArray(t)?X(t,e):e(t))}function Y(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Z(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function tt(t,e,n){let r=nt(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function et(t,e){const n=nt(t,e);if(n>=0)return t[1|n]}function nt(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var rt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const it={},ot=[],st=I({"\u0275cmp":I}),at=I({"\u0275dir":I}),ut=I({"\u0275pipe":I}),ct=I({"\u0275mod":I}),lt=I({"\u0275loc":I}),ht=I({"\u0275fac":I}),ft=I({__NG_ELEMENT_ID__:I});let pt=0;function dt(t){return m(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===U.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ot,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||rt.Emulated,id:"c",styles:t.styles||ot,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=pt++,n.inputs=_t(t.inputs,e),n.outputs=_t(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(gt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(vt):null,n})}function gt(t){return Ot(t)||function(t){return t[at]||null}(t)}function vt(t){return function(t){return t[ut]||null}(t)}const mt={};function yt(t){const e={type:t.type,bootstrap:t.bootstrap||ot,declarations:t.declarations||ot,imports:t.imports||ot,exports:t.exports||ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&m(()=>{mt[t.id]=t.type}),e}function bt(t,e){return m(()=>{const n=Ct(t,!0);n.declarations=e.declarations||ot,n.imports=e.imports||ot,n.exports=e.exports||ot})}function _t(t,e){if(null==t)return it;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const wt=dt;function Et(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ot(t){return t[st]||null}function Ct(t,e){const n=t[ct]||null;if(!n&&!0===e)throw new Error(`Type ${C(t)} does not have '\u0275mod' property.`);return n}function Tt(t){return"string"==typeof t?t:null==t?"":""+t}function It(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Tt(t)}var St=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let At;function kt(t){const e=At;return At=t,e}function Nt(t,e,n){const r=N(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&St.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${C(t)}]`)}const jt={},xt=/\n/gm,Rt="__source",Pt=I({provide:String,useValue:I});let Dt=void 0;function Lt(t){const e=Dt;return Dt=t,e}function Mt(t,e=St.Default){if(void 0===Dt)throw new Error("inject() must be called from an injection context");return null===Dt?Nt(t,void 0,e):Dt.get(t,e&St.Optional?null:void 0,e)}function Ft(t,e=St.Default){return(At||Mt)(G(t),e)}function Ut(t){const e=[];for(let n=0;n<t.length;n++){const r=G(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=St.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof w||"Optional"===i.ngMetadataName||i===w?n|=St.Optional:i instanceof O||"SkipSelf"===i.ngMetadataName||i===O?n|=St.SkipSelf:i instanceof E||"Self"===i.ngMetadataName||i===E?n|=St.Self:t=i instanceof _||i===_?i.token:i}e.push(Ft(t,n))}else e.push(Ft(r))}return e}let Vt=void 0;function qt(t){Vt=t}const Ht=20,Bt=10;function zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Wt(t){return Array.isArray(t)&&!0===t[1]}function Kt(t){return 0!=(8&t.flags)}function Gt(t){return 2==(2&t.flags)}function Qt(t){return 1==(1&t.flags)}function $t(t){return null!==t.template}function Jt(t){return!!t.listen}const Xt={createRenderer:(t,e)=>void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0};function Yt(t){for(;Array.isArray(t);)t=t[0];return t}function Zt(t,e){return Yt(e[t])}function te(t,e){return Yt(e[t.index])}function ee(t,e){return t.data[e]}function ne(t,e){const n=e[t];return zt(n)?n:n[0]}function re(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ie(t){return 4==(4&t[2])}function oe(t){return 128==(128&t[2])}function se(t,e){return null==e?null:t[e]}function ae(t){t[18]=0}function ue(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ce={lFrame:Ne(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function le(){return ce.bindingsEnabled}function he(){return ce.lFrame.lView}function fe(){return ce.lFrame.tView}function pe(t){ce.lFrame.contextLView=t}function de(){let t=ge();for(;null!==t&&64===t.type;)t=t.parent;return t}function ge(){return ce.lFrame.currentTNode}function ve(t,e){const n=ce.lFrame;n.currentTNode=t,n.isParent=e}function me(){return ce.lFrame.isParent}function ye(){return ce.isInCheckNoChangesMode}function be(t){ce.isInCheckNoChangesMode=t}function _e(){return ce.lFrame.bindingIndex++}function we(t){const e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ee(t,e){const n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Oe(e)}function Oe(t){ce.lFrame.currentDirectiveIndex=t}function Ce(){return ce.lFrame.currentQueryIndex}function Te(t){ce.lFrame.currentQueryIndex=t}function Ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Se(t,e,n){if(n&St.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&St.Host||(r=Ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=ce.lFrame=ke();return r.currentTNode=e,r.lView=t,!0}function Ae(t){const e=ke(),n=t[1];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ke(){const t=ce.lFrame,e=null===t?null:t.child;return null===e?Ne(t):e}function Ne(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function je(){const t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const xe=je;function Re(){const t=je();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pe(){return ce.lFrame.selectedIndex}function De(t){ce.lFrame.selectedIndex=t}function Le(){const t=ce.lFrame;return ee(t.tView,t.selectedIndex)}let Me;function Fe(t){var e;return(null===(e=function(){if(void 0===Me&&(Me=null,z.trustedTypes))try{Me=z.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Me}())||void 0===e?void 0:e.createHTML(t))||t}class Ue{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Ve extends Ue{getTypeName(){return"HTML"}}class qe extends Ue{getTypeName(){return"Style"}}class He extends Ue{getTypeName(){return"Script"}}class Be extends Ue{getTypeName(){return"URL"}}class ze extends Ue{getTypeName(){return"ResourceURL"}}function We(t){return t instanceof Ue?t.changingThisBreaksApplicationSecurity:t}function Ke(t,e){const n=Ge(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Ge(t){return t instanceof Ue&&t.getTypeName()||null}function Qe(t){return new Ve(t)}function $e(t){return new qe(t)}function Je(t){return new He(t)}function Xe(t){return new Be(t)}function Ye(t){return new ze(t)}let Ze=!0,tn=!1;function en(){return tn=!0,Ze}function nn(){if(tn)throw new Error("Cannot enable prod mode after platform setup.");Ze=!1}class rn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Fe(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class on{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Fe(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Fe(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,an=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function un(t){return(t=String(t)).match(sn)||t.match(an)?t:(en()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function cn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ln(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const hn=cn("area,br,col,hr,img,wbr"),fn=cn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),pn=cn("rp,rt"),dn=ln(pn,fn),gn=ln(hn,ln(fn,cn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ln(pn,cn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dn),vn=cn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),mn=cn("srcset"),yn=ln(vn,mn,cn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bn=cn("script,style,template");class _n{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!gn.hasOwnProperty(e))return this.sanitizedSomething=!0,!bn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!yn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;vn[o]&&(s=un(s)),mn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>un(t.trim())).join(", ")),this.buf.push(" ",e,'="',On(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();gn.hasOwnProperty(e)&&!hn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(On(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,En=/([^\#-~ |!])/g;function On(t){return t.replace(/&/g,"&amp;").replace(wn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(En,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cn;function Tn(t,e){let n=null;try{Cn=Cn||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(Fe(""),"text/html")}catch(t){return!1}}()?new rn:new on(t)}(t);let r=e?String(e):"";n=Cn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Cn.getInertBodyElement(r)}while(r!==o);const s=new _n,a=s.sanitizeChildren(In(n)||n);return en()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=In(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function In(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Sn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function An(t){const e=function(){const t=he();return t&&t[12]}();return e?e.sanitize(Sn.URL,t)||"":Ke(t,"URL")?We(t):un(Tt(t))}function kn(t,e){return t.hasOwnProperty(ht)?t[ht]:null}class Nn extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function jn(t,e){const n=e?" in "+e:"";throw new Nn("201",`No provider for ${It(t)} found${n}`)}class xn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Rn(){return Pn}function Pn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ln),Dn}function Dn(){const t=Mn(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===it)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ln(t,e,n,r){const i=Mn(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:it,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new xn(u&&u.currentValue,e,s===it),t[r]=e}function Mn(t){return t.__ngSimpleChanges__||null}function Fn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Un(t,e,n){Hn(t,e,3,n)}function Vn(t,e,n,r){(3&t[2])===n&&Hn(t,e,n,r)}function qn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Hn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Bn(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Bn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}Rn.ngInherit=!0;const zn=-1;class Wn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Kn(t,e,n){const r=Jt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Qn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Gn(t){return 3===t||4===t||6===t}function Qn(t){return 64===t.charCodeAt(0)}function $n(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Jn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Jn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Xn(t){return t!==zn}function Yn(t){return 32767&t}function Zn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let tr=!0;function er(t){const e=tr;return tr=t,e}let nr=0;function rr(t,e){const n=or(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ir(r.data,t),ir(e,null),ir(r.blueprint,null));const i=sr(t,e),o=t.injectorIndex;if(Xn(i)){const t=Yn(i),n=Zn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function ir(t,e){t.push(0,0,0,0,0,0,0,0,e)}function or(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function sr(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return zn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return zn}function ar(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ft)&&(r=n[ft]),null==r&&(r=n[ft]=nr++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function ur(t,e,n){if(n&St.Optional)return t;jn(e,"NodeInjector")}function cr(t,e,n,r){if(n&St.Optional&&void 0===r&&(r=null),0==(n&(St.Self|St.Host))){const i=t[9],o=kt(void 0);try{return i?i.get(e,r,n&St.Optional):Nt(e,r,n&St.Optional)}finally{kt(o)}}return ur(r,e,n)}function lr(t,e,n,r=St.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ft)?t[ft]:void 0;return"number"==typeof e?e>=0?255&e:fr:e}(n);if("function"==typeof o){if(!Se(e,t,r))return r&St.Host?ur(i,n,r):cr(e,n,r,i);try{const t=o();if(null!=t||r&St.Optional)return t;jn(n)}finally{xe()}}else if("number"==typeof o){let i=null,s=or(t,e),a=zn,u=r&St.Host?e[16][6]:null;for((-1===s||r&St.SkipSelf)&&(a=-1===s?sr(t,e):e[s+8],a!==zn&&mr(r,!1)?(i=e[1],s=Yn(a),e=Zn(a,e)):s=-1);-1!==s;){const t=e[1];if(vr(o,s,t.data)){const t=pr(s,e,n,i,r,u);if(t!==hr)return t}a=e[s+8],a!==zn&&mr(r,e[1].data[s+8]===u)&&vr(o,s,e)?(i=t,s=Yn(a),e=Zn(a,e)):s=-1}}}return cr(e,n,r,i)}const hr={};function fr(){return new yr(de(),he())}function pr(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=dr(a,s,n,null==r?Gt(a)&&tr:r!=s&&0!=(3&a.type),i&St.Host&&o===a);return null!==u?gr(e,s,u,a):hr}function dr(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&$t(t)&&t.type===n)return u}return null}function gr(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Wn){const s=i;s.resolving&&function(t,e){throw new Nn("200","Circular dependency in DI detected for "+t)}(It(o[n]));const a=er(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?kt(s.injectImpl):null;Se(t,r,St.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Pn(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&kt(u),er(a),s.resolving=!1,xe()}}return i}function vr(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function mr(t,e){return!(t&St.Self||t&St.Host&&e)}class yr{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return lr(this._tNode,this._lView,t,void 0,e)}}function br(t){const e=t;if(Q(t))return()=>{const t=br(G(e));return t?t():null};let n=kn(e);if(null===n){const t=x(e);n=t&&t.factory}return n||null}function _r(t){return m(()=>{const e=t.prototype.constructor,n=e[ht]||br(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[ht]||br(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function wr(t){return t.ngDebugContext}function Er(t){return t.ngOriginalError}function Or(t,...e){t.error(...e)}class Cr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?wr(t)?wr(t):this._findContext(Er(t)):null}_findOriginalError(t){let e=Er(t);for(;e&&Er(e);)e=Er(e);return e}}function Tr(t,e){t.__ngContext__=e}const Ir=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function Sr(t){return t instanceof Function?t():t}var Ar=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function kr(t,e){return(void 0)(t,e)}function Nr(t){const e=t[3];return Wt(e)?e[3]:e}function jr(t){return Rr(t[13])}function xr(t){return Rr(t[4])}function Rr(t){for(;null!==t&&!Wt(t);)t=t[4];return t}function Pr(t,e,n,r,i){if(null!=r){let o,s=!1;Wt(r)?o=r:zt(r)&&(s=!0,r=r[0]);const a=Yt(r);0===t&&null!==n?null==i?qr(e,n,a):Vr(e,n,a,i||null,!0):1===t&&null!==n?Vr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Br(t,e);r&&function(t,e,n,r){Jt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Yt(n)&&Pr(e,t,r,o,i);for(let s=Bt;s<n.length;s++){const i=n[s];Qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Dr(t,e,n){return Jt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Lr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ue(i,-1)),n.splice(r,1)}function Mr(t,e){if(t.length<=Bt)return;const n=Bt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Lr(o,r),e>0&&(t[n-1][4]=r[4]);const s=Z(t,Bt+e);Qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Fr(t,e){if(!(256&e[2])){const n=e[11];Jt(n)&&n.destroyNode&&Qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ur(t[1],t);for(;e;){let n=null;if(zt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)zt(e)&&Ur(e[1],e),e=e[3];null===e&&(e=t),zt(e)&&Ur(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ur(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Wn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Yt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Jt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Wt(e[3])){n!==e[3]&&Lr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vr(t,e,n,r,i){Jt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function qr(t,e,n){Jt(t)?t.appendChild(e,n):e.appendChild(n)}function Hr(t,e,n,r,i){null!==r?Vr(t,e,n,r,i):qr(t,e,n)}function Br(t,e){return Jt(t)?t.parentNode(e):e.parentNode}function zr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===rt.None||e===rt.Emulated)return null}return te(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?te(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Hr(o,i,n[a],s,!1);else Hr(o,i,n,s,!1)}function Wr(t,e){if(null!==e){const n=e.type;if(3&n)return te(e,t);if(4&n)return Kr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Wr(t,n);{const n=t[e.index];return Wt(n)?Kr(-1,n):Yt(n)}}if(32&n)return kr(e,t)()||Yt(t[e.index]);{const n=t[16],r=n[6],i=Nr(n),o=r.projection[e.projection];return null!=o?Wr(i,o):Wr(t,e.next)}}return null}function Kr(t,e){const n=Bt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Wr(t,r)}return e[7]}function Gr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Tr(Yt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Gr(t,e,n.child,r,i,o,!1),Pr(e,t,i,a,o);else if(32&u){const s=kr(n,r);let u;for(;u=s();)Pr(e,t,i,u,o);Pr(e,t,i,a,o)}else 16&u?$r(t,e,r,n,i,o):Pr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Qr(t,e,n,r,i,o){Gr(n,r,t.firstChild,e,i,o,!1)}function $r(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pr(e,t,i,a[u],o);else Gr(t,e,a,s[3],i,o,!0)}function Jr(t,e,n){Jt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Xr(t,e,n){Jt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Yr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Zr="ng-template";function ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Yr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ei(t){return 4===t.type&&t.value!==Zr}function ni(t,e,n){return e===(4!==t.type||n?t.value:Zr)}function ri(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Gn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ni(t,u,n)||""===u&&1===e.length){if(ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ti(t.attrs,c,n)){if(ii(r))return!1;s=!0}continue}const l=oi(8&r?"class":u,i,ei(t),n);if(-1===l){if(ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Yr(e,c,0)||2&r&&c!==t){if(ii(r))return!1;s=!0}}}}else{if(!s&&!ii(r)&&!ii(u))return!1;if(s&&ii(u))continue;s=!1,r=u|1&r}}return ii(r)||s}function ii(t){return 0==(1&t)}function oi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function si(t,e,n=!1){for(let r=0;r<e.length;r++)if(ri(t,e[r],n))return!0;return!1}function ai(t,e){return t?":not("+e.trim()+")":e}function ui(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ii(s)||(e+=ai(o,i),i=""),r=s,o=o||!ii(r);n++}return""!==i&&(e+=ai(o,i)),e}const ci={};function li(t){hi(fe(),he(),Pe()+t,ye())}function hi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Un(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Vn(e,r,0,n)}De(n)}function fi(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function di(t){return 2|t}function gi(t){return(131068&t)>>2}function vi(t,e){return-131069&t|e<<2}function mi(t){return 1|t}function yi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Te(i),n.contentQueries(2,e[o],o)}}}function bi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ae(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function _i(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=ge(),s=me(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),ce.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return ve(o,!0),o}function wi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ei(t,e,n){Ae(e);try{const r=t.viewQuery;null!==r&&Xi(1,r,n);const i=t.template;null!==i&&Ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&yi(t,e),t.staticViewQueries&&Xi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ki(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Re()}}function Oi(t,e,n,r){const i=e[2];if(256==(256&i))return;Ae(e);const o=ye();try{ae(e),ce.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Un(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Vn(e,n,0,null),qn(e,0)}if(function(t){for(let e=jr(t);null!==e;e=xr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&ue(r,1),n[2]|=1024}}}(e),function(t){for(let e=jr(t);null!==e;e=xr(e))for(let t=Bt;t<e.length;t++){const n=e[t],r=n[1];oe(n)&&Oi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&yi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Un(e,n)}else{const n=t.contentHooks;null!==n&&Vn(e,n,1),qn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)De(~r);else{const i=r,o=n[++t],s=n[++t];Ee(o,i),s(2,e[i])}}}finally{De(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)zi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Xi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Un(e,n)}else{const n=t.viewHooks;null!==n&&Vn(e,n,2),qn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ue(e[3],-1))}finally{Re()}}function Ci(t,e,n,r){const i=e[10],o=!ye(),s=ie(e);try{o&&!s&&i.begin&&i.begin(),s&&Ei(t,e,r),Oi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ti(t,e,n,r,i){const o=Pe();try{De(-1),2&r&&e.length>Ht&&hi(t,e,Ht,ye()),n(r,i)}finally{De(o)}}function Ii(t,e,n){le()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||rr(n,e),Tr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=$t(r);o&&Vi(e,n,r);const u=gr(e,t,a,n);Tr(u,e),null!==s&&qi(0,a-i,u,r,0,s),o&&(ne(n.index,e)[8]=u)}}(t,e,n,te(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=ce.lFrame.currentDirectiveIndex;try{De(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Oe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Di(r,i)}}finally{De(-1),Oe(s)}}(t,e,n))}function Si(t,e,n=te){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Ai(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ki(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function ki(t,e,n,r,i,o,s,a,u,c){const l=Ht+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ci);return n}(l,h),p="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1}}function Ni(t,e,n,r){const i=Zi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function ji(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function xi(t,e,n,r,i,o,s,a){const u=te(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(eo(t,n,c,r,i),Gt(e)&&function(t,e){const n=ne(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,Jt(o)?o.setProperty(u,r,i):Qn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ri(t,e,n,r){let i=!1;if(le()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];si(n,s.selectors,!1)&&(i||(i=[]),ar(rr(n,e),t,s.type),$t(s)?(Li(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Fi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=wi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=$n(n.mergedAttrs,c.hostAttrs),Ui(t,n,e,u,c),Mi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ei(e)?null:Hi(n,i);o.push(c),s=ji(n,u,s),a=ji(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Nn("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=$n(n.mergedAttrs,n.attrs),i}function Pi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Di(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Li(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Mi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;$t(e)&&(n[""]=t)}}function Fi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ui(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=kn(i.type)),s=new Wn(o,$t(i),null);t.blueprint[r]=s,n[r]=s,Pi(t,e,0,r,wi(t,n,i.hostVars,ci),i)}function Vi(t,e,n){const r=te(e,t),i=Ai(n),o=t[10],s=Gi(t,bi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function qi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Hi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function zi(t,e){const n=ne(e,t);if(oe(n)){const t=n[1];80&n[2]?Oi(t,n,t.template,n[8]):n[5]>0&&Wi(n)}}function Wi(t){for(let n=jr(t);null!==n;n=xr(n))for(let t=Bt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Oi(t,e,t.template,e[8])}else e[5]>0&&Wi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=ne(e[n],t);oe(r)&&r[5]>0&&Wi(r)}}function Ki(t,e){const n=ne(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ei(r,n,n[8])}function Gi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qi(t){for(;t;){t[2]|=64;const e=Nr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function $i(t,e,n){const r=e[10];r.begin&&r.begin();try{Oi(t,e,t.template,n)}catch(i){throw to(e,i),i}finally{r.end&&r.end()}}function Ji(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=re(n),i=r[1];Ci(i,r,i.template,n)}}(t[8])}function Xi(t,e,n){Te(0),e(t,n)}const Yi=(()=>Promise.resolve(null))();function Zi(t){return t[7]||(t[7]=[])}function to(t,e){const n=t[9],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function eo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function no(t,e,n){const r=Zt(e,t);!function(t,e,n){Jt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ro(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=T(i,t):2==o&&(r=T(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const io=new M("INJECTOR",-1);class oo{get(t,e=jt){if(e===jt){const e=new Error(`NullInjectorError: No provider for ${C(t)}!`);throw e.name="NullInjectorError",e}return e}}const so=new M("Set Injector scope."),ao={},uo={},co=[];let lo=void 0;function ho(){return void 0===lo&&(lo=new oo),lo}function fo(t,e=null,n=null,r){return new po(t,n,e||ho(),r)}class po{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&X(e,n=>this.processProvider(n,t,e)),X([t],t=>this.processInjectorType(t,[],i)),this.records.set(io,mo(void 0,this));const o=this.records.get(so);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:C(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=jt,n=St.Default){this.assertNotDestroyed();const r=Lt(this);try{if(!(n&St.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof M)&&N(t);e=n&&this.injectableDefInScope(n)?mo(go(t),ao):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&St.Self?ho():this.parent).get(t,e=n&St.Optional&&e===jt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(C(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Rt]&&i.unshift(e[Rt]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=C(e);if(Array.isArray(e))i=e.map(C).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):C(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(xt,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Lt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(C(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=G(t)))return!1;let r=x(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=x(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{X(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];X(r,t=>this.processProvider(t,n,r||co))}}this.injectorDefTypes.add(o),this.records.set(o,mo(r.factory,ao));const a=r.providers;if(null!=a&&!s){const e=t;X(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=bo(t=G(t))?t:G(t&&t.provide);const i=function(t,e,n){return yo(t)?mo(void 0,t.useValue):mo(vo(t),ao)}(t);if(bo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=mo(void 0,ao,!0),e.factory=()=>Ut(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ao&&(e.value=uo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function go(t){const e=N(t),n=null!==e?e.factory:kn(t);if(null!==n)return n;const r=x(t);if(null!==r)return r.factory;if(t instanceof M)throw new Error(`Token ${C(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${C(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[R]||t[D]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function vo(t,e,n){let r=void 0;if(bo(t)){const e=G(t);return kn(e)||go(e)}if(yo(t))r=()=>G(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Ut(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Ft(G(t.useExisting));else{const e=G(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return kn(e)||go(e);r=()=>new e(...Ut(t.deps))}var i;return r}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yo(t){return null!==t&&"object"==typeof t&&Pt in t}function bo(t){return"function"==typeof t}const _o=function(t,e,n){return function(t,e=null,n=null,r){const i=fo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let wo=(()=>{class t{static create(t,e){return Array.isArray(t)?_o(t,e,""):_o(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=jt,t.NULL=new oo,t.\u0275prov=A({token:t,providedIn:"any",factory:()=>Ft(io)}),t.__NG_ELEMENT_ID__=-1,t})();function Eo(t,e){Fn(re(t)[1],de())}function Oo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if($t(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Co(t.inputs),e.declaredInputs=Co(t.declaredInputs),e.outputs=Co(t.outputs);const n=i.hostBindings;n&&So(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&To(t,o),s&&Io(t,s),S(t.inputs,i.inputs),S(t.declaredInputs,i.declaredInputs),S(t.outputs,i.outputs),$t(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Oo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$n(i.hostAttrs,n=$n(n,i.hostAttrs))}}(r)}function Co(t){return t===it?{}:t===ot?[]:t}function To(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Io(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function So(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ao=null;function ko(){if(!Ao){const t=z.Symbol;if(t&&t.iterator)Ao=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ao=n)}}}return Ao}function No(t){return!!jo(t)&&(Array.isArray(t)||!(t instanceof Map)&&ko()in t)}function jo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ro(t,e,n,r){const i=he();return xo(i,_e(),e)&&(fe(),function(t,e,n,r,i,o){const s=te(t,e);!function(t,e,n,r,i,o,s){if(null==o)Jt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?Tt(o):s(o,r||"",i);Jt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Le(),i,t,e,n,r)),Ro}function Po(t,e,n,r){return xo(t,_e(),n)?e+Tt(n)+r:ci}function Do(t,e,n,r,i,o,s,a){const u=he(),c=fe(),l=t+Ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=_i(e,t,4,s||null,se(c,a));Ri(e,n,l,se(c,u)),Fn(e,l);const h=l.tViews=ki(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];ve(h,!1);const f=u[11].createComment("");zr(c,u,f,h),Tr(f,u),Gi(u,u[l]=Bi(f,u,f,h)),Qt(h)&&Ii(c,u,h),null!=s&&Si(u,h,a)}function Lo(t){return function(t,e){return t[e]}(ce.lFrame.contextLView,Ht+t)}function Mo(t,e=St.Default){const n=he();return null===n?Ft(t,e):lr(de(),n,G(t),e)}function Fo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Gn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(de(),t)}function Uo(t,e,n){const r=he();return xo(r,_e(),e)&&xi(fe(),Le(),r,t,e,r[11],n,!1),Uo}function Vo(t,e,n,r,i){const o=i?"class":"style";eo(t,n,e.inputs[o],o,r)}function qo(t,e,n,r){const i=he(),o=fe(),s=Ht+t,a=i[11],u=i[s]=Dr(a,e,ce.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=_i(e,t,2,i,se(a,o));return Ri(e,n,u,se(a,s)),null!==u.attrs&&ro(u,u.attrs,!1),null!==u.mergedAttrs&&ro(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];ve(c,!0);const l=c.mergedAttrs;null!==l&&Kn(a,u,l);const h=c.classes;null!==h&&Xr(a,u,h);const f=c.styles;null!==f&&Jr(a,u,f),64!=(64&c.flags)&&zr(o,i,u,c),0===ce.lFrame.elementDepthCount&&Tr(u,i),ce.lFrame.elementDepthCount++,Qt(c)&&(Ii(o,i,c),function(t,e,n){if(Kt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Si(i,c)}function Ho(){let t=de();me()?ce.lFrame.isParent=!1:(t=t.parent,ve(t,!1));const e=t;ce.lFrame.elementDepthCount--;const n=fe();n.firstCreatePass&&(Fn(n,t),Kt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Vo(n,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Vo(n,e,he(),e.stylesWithoutHost,!1)}function Bo(t,e,n,r){qo(t,e,n,r),Ho()}function zo(){return he()}function Wo(t){return!!t&&"function"==typeof t.then}function Ko(t){return!!t&&"function"==typeof t.subscribe}function Go(t,e,n=!1,r){const i=he(),o=fe(),s=de();return function(t,e,n,r,i,o,s=!1,a){const u=Qt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Zi(e);let h=!0;if(3&r.type){const f=te(r,e),p=a?a(f):it,d=p.target||f,g=l.length,v=a?t=>a(Yt(t[r.index])).target:r.index;if(Jt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=$o(r,e,o,!1);const t=n.listen(p.name||d,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=$o(r,e,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Go}function Qo(t,e,n){try{return!1!==e(n)}catch(r){return to(t,r),!1}}function $o(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?ne(t.index,e):e;0==(32&e[2])&&Qi(s);let a=Qo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Qo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Jo(t=1){return function(t){return(ce.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,ce.lFrame.contextLView))[8]}(t)}function Xo(t,e,n){return Yo(t,"",e,"",n),Xo}function Yo(t,e,n,r,i){const o=he(),s=Po(o,e,n,r);return s!==ci&&xi(fe(),Le(),o,t,s,o[11],i,!1),Yo}const Zo=[];function ts(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?pi(o):gi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];es(t[a],e)&&(u=!0,t[a+1]=r?mi(n):di(n)),a=r?pi(n):gi(n)}u&&(t[n+1]=r?di(o):mi(o))}function es(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&nt(t,e)>=0}function ns(t,e){return function(t,e,n,r){const i=he(),o=fe(),s=we(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Pe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=is(n=rs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=rs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==gi(r))return t[pi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=rs(null,t,e,n[1],r),n=is(n,e.attrs,r),function(t,e,n,r){t[pi(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=is(r,t[o].hostAttrs,true);return is(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=pi(s),u=gi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||nt(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=pi(t[a+1]);t[r+1]=fi(e,a),0!==e&&(t[e+1]=vi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=fi(a,0),0!==a&&(t[a+1]=vi(t[a+1],r)),a=r;else t[r+1]=fi(u,0),0===a?a=r:t[u+1]=vi(t[u+1],r),u=r;l&&(t[r+1]=di(t[r+1])),ts(t,c,r,!0),ts(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&nt(o,e)>=0&&(n[r+1]=mi(n[r+1]))}(e,c,t,r),s=fi(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ci&&xo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ss(1==(1&c)?os(u,e,n,i,gi(c),s):void 0)||(ss(o)||function(t){return 2==(2&t)}(c)&&(o=os(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Jt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Zt(Pe(),n),i,o))}(o,o.data[Pe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=C(We(t))),t}(e),true,s)}(t,e),ns}function rs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=is(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function is(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),tt(t,s,!!n||e[++o]))}return void 0===t?null:t}function os(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ci&&(l=c?Zo:void 0);let h=c?et(l,r):u===r?l:void 0;if(o&&!ss(h)&&(h=et(e,r)),ss(h)&&(a=h,s))return a;const f=t[i+1];i=s?pi(f):gi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=et(t,r))}return a}function ss(t){return void 0!==t}function as(t,e=""){const n=he(),r=fe(),i=t+Ht,o=r.firstCreatePass?_i(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Jt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);zr(r,n,s,o),ve(o,!1)}function us(t){return cs("",t,""),us}function cs(t,e,n){const r=he(),i=Po(r,t,e,n);return i!==ci&&no(r,Pe(),i),cs}function ls(t,e,n,r,i){const o=he(),s=function(t,e,n,r,i,o){const s=function(t,e,n,r){const i=xo(t,e,n);return xo(t,e+1,r)||i}(t,ce.lFrame.bindingIndex,n,i);return we(2),s?e+Tt(n)+r+Tt(i)+o:ci}(o,t,e,n,r,i);return s!==ci&&no(o,Pe(),s),ls}function hs(t,e,n){const r=he();return xo(r,_e(),e)&&xi(fe(),Le(),r,t,e,r[11],n,!0),hs}const fs=void 0;var ps=["en",[["a","p"],["AM","PM"],fs],[["AM","PM"],fs,fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fs,"{1} 'at' {0}",fs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ds={};function gs(t,e,n){"string"!=typeof e&&(n=e,e=t[_s.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ds[e]=t,n&&(ds[e][_s.ExtraData]=n)}function vs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=bs(e);if(n)return n;const r=e.split("-")[0];if(n=bs(r),n)return n;if("en"===r)return ps;throw new Error(`Missing locale data for the locale "${t}".`)}function ms(t){return vs(t)[_s.CurrencyCode]||null}function ys(t){return vs(t)[_s.PluralCase]}function bs(t){return t in ds||(ds[t]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[t]),ds[t]}var _s=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ws="en-US";let Es=ws;function Os(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Es=t.toLowerCase().replace(/_/g,"-"))}function Cs(t,e,n,r,i){if(t=G(t),Array.isArray(t))for(let o=0;o<t.length;o++)Cs(t[o],e,n,r,i);else{const o=fe(),s=he();let a=bo(t)?t:G(t.provide),u=vo(t);const c=de(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(bo(t)||!t.multi){const r=new Wn(u,i,Mo),p=Ss(a,e,i?l:l+f,h);-1===p?(ar(rr(c,s),o,a),Ts(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=Ss(a,e,l+f,h),d=Ss(a,e,l,l+f),g=p>=0&&n[p],v=d>=0&&n[d];if(i&&!v||!i&&!g){ar(rr(c,s),o,a);const l=function(t,e,n,r,i){const o=new Wn(t,n,Mo);return o.multi=[],o.index=e,o.componentProviders=0,Is(o,i,r&&!n),o}(i?ks:As,n.length,i,r,u);!i&&v&&(n[d].providerFactory=l),Ts(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ts(o,t,p>-1?p:d,Is(n[i?d:p],u,!i&&r));!i&&r&&v&&n[d].componentProviders++}}}function Ts(t,e,n,r){const i=bo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Is(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ss(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function As(t,e,n,r){return Ns(this.multi,[])}function ks(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=gr(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Ns(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Ns(i,o);return o}function Ns(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function js(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=fe();if(r.firstCreatePass){const i=$t(t);Cs(n,r.data,r.blueprint,i,!0),Cs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class xs{}class Rs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${C(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ps=(()=>{class t{}return t.NULL=new Rs,t})();function Ds(...t){}function Ls(t,e){return new Fs(te(t,e))}const Ms=function(){return Ls(de(),he())};let Fs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Ms,t})();class Us{}let Vs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>qs(),t})();const qs=function(){const t=he(),e=ne(de().index,t);return function(t){return t[11]}(zt(e)?e:t)};let Hs=(()=>{class t{}return t.\u0275prov=A({token:t,providedIn:"root",factory:()=>null}),t})();class Bs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const zs=new Bs("11.0.2");class Ws{constructor(){}supports(t){return No(t)}create(t){return new Gs(t)}}const Ks=(t,e)=>e;class Gs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ks}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Xs(n,r,i)?e:n,s=Xs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${C(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ko()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Qs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Js),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Js),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $s{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Js{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new $s,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Xs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ys{constructor(){}supports(t){return t instanceof Map||jo(t)}create(){return new Zs}}class Zs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||jo(t)))throw new Error(`Error trying to diff '${C(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ta(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ta{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let ea=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new O,new w]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=A({token:t,providedIn:"root",factory:()=>new t([new Ws])}),t})(),na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new O,new w]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=A({token:t,providedIn:"root",factory:()=>new t([new Ys])}),t})();function ra(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Yt(o)),Wt(o))for(let t=Bt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ra(e[1],e,n,r)}const s=n.type;if(8&s)ra(t,e,n.child,r);else if(32&s){const t=kr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Nr(t);ra(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class ia{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return ra(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Fr(this._lView[1],this._lView)}onDestroy(t){Ni(this._lView[1],this._lView,null,t)}markForCheck(){Qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){$i(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){be(!0);try{$i(t,e,n)}finally{be(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class oa extends ia{constructor(t){super(t),this._view=t}detectChanges(){Ji(this._view)}checkNoChanges(){!function(t){be(!0);try{Ji(t)}finally{be(!1)}}(this._view)}get context(){return null}}const sa=ua;let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t.__ChangeDetectorRef__=!0,t})();function ua(t=!1){return function(t,e,n){if(!n&&Gt(t)){const n=ne(t.index,e);return new ia(n,n)}return 47&t.type?new ia(e[16],e):null}(de(),he(),t)}const ca=[new Ys],la=new ea([new Ws]),ha=new na(ca),fa=function(){return va(de(),he())};let pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=fa,t})();const da=pa,ga=class extends da{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=bi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ei(e,n,t),new ia(n)}};function va(t,e){return 4&t.type?new ga(e,t,Ls(t,e)):null}class ma{}class ya{}const ba=function(){return Ta(de(),he())};let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=ba,t})();const wa=_a,Ea=class extends wa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ls(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){const t=sr(this._hostTNode,this._hostLView);if(Xn(t)){const e=Zn(t,this._hostLView),n=Yn(t);return new yr(e[1].data[n+8],e)}return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Oa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ma,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(Wt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ea(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Bt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Bt?(e[4]=n[i],Y(n,Bt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Kr(i,o),a=n[11],u=Br(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),Y(Ca(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Oa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);n&&(Z(Ca(this._lContainer),e),Fr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);return n&&null!=Z(Ca(this._lContainer),e)?new ia(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Oa(t){return t[8]}function Ca(t){return t[8]||(t[8]=[])}function Ta(t,e){let n;const r=e[t.index];if(Wt(r))n=r;else{let i;if(8&t.type)i=Yt(r);else{const n=e[11];i=n.createComment("");const r=te(t,e);Vr(n,Br(n,r),i,function(t,e){return Jt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Bi(r,e,i,t),Gi(e,n)}return new Ea(n,t,e)}const Ia={};class Sa extends Ps{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ot(t);return new Na(e,this.ngModule)}}function Aa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ka=new M("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ir});class Na extends xs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ui).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Aa(this.componentDef.inputs)}get outputs(){return Aa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ia,i);return o!==Ia||r===Ia?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Us,Xt),s=i.get(Hs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Jt(t))return t.selectRootElement(e,n===rt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Ir,clean:Yi,playerHandler:null,flags:0},f=ki(0,null,null,1,0,null,null,null,null,null),p=bi(null,f,h,l,null,null,o,a,s,i);let d,g;Ae(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=_i(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ro(a,u,!0),null!==t&&(Kn(i,t,u),null!==a.classes&&Xr(i,t,a.classes),null!==a.styles&&Jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=bi(n,Ai(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ar(rr(a,n),s,e.type),Li(s,a),Fi(a,n.length,1)),Gi(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)Kn(a,c,["ng-version",zs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Kn(a,c,t),e&&e.length>0&&Xr(a,c,e.join(" "))}if(g=ee(f,Ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=de();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ui(t,r,e,wi(t,e,1,null),n));const i=gr(e,t,r.directiveStart,r);Tr(i,e);const o=te(r,e);return o&&Tr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=de();e.contentQueries(1,s,t.directiveStart)}const a=de();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(De(a.index),Pi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Di(e,s)),s}(t,this.componentDef,p,h,[Eo]),Ei(f,p,null)}finally{Re()}return new ja(this.componentType,d,Ls(g,p),p,g)}}class ja extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new oa(r),this.componentType=t}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const xa=new Map;class Ra extends ma{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sa(this);const n=Ct(t),r=t[lt]||null;r&&Os(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=fo(t,e,[{provide:ma,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],C(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=wo.THROW_IF_NOT_FOUND,n=St.Default){return t===wo||t===ma||t===io?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Pa extends ya{constructor(t){super(),this.moduleType=t,null!==Ct(t)&&function(t){const e=new Set;!function t(n){const r=Ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${C(e)} vs ${C(e.name)}`)}(i,xa.get(i),n),xa.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ra(this.moduleType,t)}}function Da(t,e,n,r){return function(t,e,n,r,i,o){const s=e+n;return xo(t,s,i)?function(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ci?void 0:n}(t,s+1)}(he(),function(){const t=ce.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r)}const La=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Ma(){return this._results[ko()]()}class Fa{constructor(){this.dirty=!0,this._results=[],this.changes=new La,this.length=0;const t=ko(),e=Fa.prototype;e[t]||(e[t]=Ma)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=J(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ua{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class Va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==tu(t,e).matches&&this.queries[e].setDirty()}}class qa{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ha{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ha(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ba{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ba(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,za(e,i)),this.matchTNodeWithReadOption(t,e,dr(e,t,i,!1,!1))}else n===pa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,dr(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Fs||r===_a||r===pa&&4&e.type)this.addMatch(e.index,-2);else{const n=dr(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function za(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Wa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ls(t,e):4&t.type?va(t,e):null}(e,t):-2===n?function(t,e,n){return n===Fs?Ls(e,t):n===pa?va(e,t):n===_a?Ta(e,t):void 0}(t,e,r):gr(t,t[1],n,e)}function Ka(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Wa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Ga(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ka(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Bt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Ga(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Ga(n[1],n,i,r)}}}}}return r}function Qa(t){const e=he(),n=fe(),r=Ce();Te(r+1);const i=tu(n,r);if(t.dirty&&ie(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Ga(n,e,r,[]):Ka(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function $a(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&Za(t,new qa(n,r,false,i),-1),Ya(t,e)}(fe(),he(),t,e,n)}function Ja(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Za(t,new qa(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),Ya(t,e)}(fe(),he(),e,n,r,0,de(),t)}function Xa(){return t=he(),e=Ce(),t[19].queries[e].queryList;var t,e}function Ya(t,e){const n=new Fa;Ni(t,e,n,n.destroy),null===e[19]&&(e[19]=new Va),e[19].queries.push(new Ua(n))}function Za(t,e,n){null===t.queries&&(t.queries=new Ha),t.queries.track(new Ba(e,n))}function tu(t,e){return t.queries.getByIndex(e)}function eu(t=St.Default){const e=ua(!0);if(null!=e||t&St.Optional)return e;jn("ChangeDetectorRef")}const nu=new M("Application Initializer");let ru=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ds,this.reject=Ds,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Wo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Ft(nu,8))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const iu=new M("AppId"),ou={provide:iu,useFactory:function(){return`${su()}${su()}${su()}`},deps:[]};function su(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const au=new M("Platform Initializer"),uu=new M("Platform ID"),cu=new M("appBootstrapListener");let lu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const hu=new M("LocaleId"),fu=new M("DefaultCurrencyCode");class pu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const du=function(t){return new Pa(t)},gu=du,vu=function(t){return Promise.resolve(du(t))},mu=function(t){const e=du(t),n=Sr(Ct(t).declarations).reduce((t,e)=>{const n=Ot(e);return n&&t.push(new Na(n)),t},[]);return new pu(e,n)},yu=mu,bu=function(t){return Promise.resolve(mu(t))};let _u=(()=>{class t{constructor(){this.compileModuleSync=gu,this.compileModuleAsync=vu,this.compileModuleAndAllComponentsSync=yu,this.compileModuleAndAllComponentsAsync=bu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const wu=(()=>Promise.resolve(0))();function Eu(t){"undefined"==typeof Zone?wu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ou{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new La(!1),this.onMicrotaskEmpty=new La(!1),this.onStable=new La(!1),this.onError=new La(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=z.requestAnimationFrame,e=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(z,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Su(t),Iu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Su(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Au(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ku(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Au(t),e.invoke(r,i,o,s,a)}finally{ku(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Su(t),Iu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ou.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ou.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Tu,Cu,Cu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Cu(){}const Tu={};function Iu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Su(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Au(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ku(t){t._nesting--,Iu(t)}class Nu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new La,this.onMicrotaskEmpty=new La,this.onStable=new La,this.onError=new La}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ju=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ou.assertNotInAngularZone(),Eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Ft(Ou))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})(),xu=(()=>{class t{constructor(){this._applications=new Map,Lu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Lu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();class Ru{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Pu(t){Lu=t}let Du,Lu=new Ru;const Mu=new M("AllowMultipleToken");class Fu{constructor(t,e){this.name=t,this.token=e}}function Uu(t,e,n=[]){const r="Platform: "+e,i=new M(r);return(e=[])=>{let o=Vu();if(!o||o.injector.get(Mu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:so,useValue:"platform"});!function(t){if(Du&&!Du.destroyed&&!Du.injector.get(Mu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Du=t.get(qu);const e=t.get(au,null);e&&e.forEach(t=>t())}(wo.create({providers:t,name:r}))}return function(t){const e=Vu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Vu(){return Du&&!Du.destroyed?Du:null}let qu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Nu:("zone.js"===t?void 0:t)||new Ou({enableLongStackTrace:en(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Ou,useValue:n}];return n.run(()=>{const e=wo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Cr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>zu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Wo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ru);return t.runInitializers(),t.donePromise.then(()=>(Os(i.injector.get(hu,ws)||ws),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Hu({},e);return function(t,e,n){const r=new Pa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Bu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${C(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Ft(wo))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();function Hu(t,e){return Array.isArray(e)?e.reduce(Hu,t):Object.assign(Object.assign({},t),e)}let Bu=(()=>{class t{constructor(t,e,n,r,i,c){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=en(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),f=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ou.assertNotInAngularZone(),Eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ou.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return Object(s.a)(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof o.a?t[0]:Object(a.a)(e)(Object(u.a)(t,n))}(h,f.pipe(t=>{return l()((e=v,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,d);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof xs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ma),i=n.create(wo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(ju,null);return o&&i.injector.get(xu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),en()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;zu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(cu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),zu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Ft(Ou),Ft(lu),Ft(wo),Ft(Cr),Ft(Ps),Ft(ru))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();function zu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Wu{}class Ku{}const Gu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Qu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Gu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>$u(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>$u(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Ft(_u),Ft(Ku,8))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();function $u(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ju=function(t){return null},Xu=Uu(null,"core",[{provide:uu,useValue:"unknown"},{provide:qu,deps:[wo]},{provide:xu,deps:[]},{provide:lu,deps:[]}]),Yu=[{provide:Bu,useClass:Bu,deps:[Ou,lu,wo,Cr,Ps,ru]},{provide:ka,deps:[Ou],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ru,useClass:ru,deps:[[new w,nu]]},{provide:_u,useClass:_u,deps:[]},ou,{provide:ea,useFactory:function(){return la},deps:[]},{provide:na,useFactory:function(){return ha},deps:[]},{provide:hu,useFactory:function(t){return Os(t=t||"undefined"!=typeof $localize&&$localize.locale||ws),t},deps:[[new _(hu),new w,new O]]},{provide:fu,useValue:"USD"}];let Zu=(()=>{class t{constructor(t){}}return t.\u0275mod=yt({type:t}),t.\u0275inj=k({factory:function(e){return new(e||t)(Ft(Bu))},providers:Yu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new d(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},ofXK:function(t,e,n){"use strict";n.d(e,"a",function(){return _}),n.d(e,"b",function(){return M}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return E}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return O}),n.d(e,"g",function(){return y}),n.d(e,"h",function(){return x}),n.d(e,"i",function(){return P}),n.d(e,"j",function(){return w}),n.d(e,"k",function(){return c}),n.d(e,"l",function(){return U}),n.d(e,"m",function(){return a}),n.d(e,"n",function(){return F}),n.d(e,"o",function(){return o}),n.d(e,"p",function(){return N}),n.d(e,"q",function(){return s});var r=n("fXoL");let i=null;function o(){return i}function s(t){i||(i=t)}class a{}const u=new r.q("DocumentToken");let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Db)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return Object(r.Ob)(f)}const h=new r.q("Location Initialized");let f=(()=>{class t extends c{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(u))},t.\u0275prov=Object(r.Db)({factory:d,token:t,providedIn:"platform"}),t})();function p(){return!!window.history.pushState}function d(){return new f(Object(r.Ob)(u))}function g(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function v(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function m(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Db)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Ob)(u).location;return new w(Object(r.Ob)(c),e&&e.origin||"")}const _=new r.q("appBaseHref");let w=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return g(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c),r.Ob(_,8))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=g(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+m(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c),r.Ob(_,8))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=v(T(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+m(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,T(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+m(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(y),r.Ob(c))},t.normalizeQueryParams=m,t.joinWithSlash=g,t.stripTrailingSlash=v,t.\u0275prov=Object(r.Db)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new O(Object(r.Ob)(y),Object(r.Ob)(c))}function T(t){return t.replace(/\/index.html$/,"")}var I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.kb;class A{}let k=(()=>{class t extends A{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.u))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();function N(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class j{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let x=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.T)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new j(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new R(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.O),r.Hb(r.K),r.Hb(r.s))},t.\u0275dir=r.Cb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class R{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new D,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(r.O),r.Hb(r.K))},t.\u0275dir=r.Cb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class D{constructor(){this.$implicit=null,this.ngIf=null}}function L(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.sb)(e)}'.`)}let M=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[{provide:A,useClass:k}]}),t})();const F="browser";let U=(()=>{class t{}return t.\u0275prov=Object(r.Db)({token:t,providedIn:"root",factory:()=>new V(Object(r.Ob)(u),window,Object(r.Ob)(r.m))}),t})();class V{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=q(this.window.history)||q(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function q(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}},os0x:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},ozzT:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("XNiG"),i=n("9rNa");class o{constructor(){this.ingredientChange=new r.a,this.startedEditing=new r.a,this.ingredients=[new i.a("Apples",2),new i.a("Banana",5)]}getIngredient(t){return this.ingredients[t]}getIngredients(){return this.ingredients.slice()}updateIngredient(t,e){this.ingredients[t]=e,this.ingredientChange.next(this.ingredients.slice())}deleteIngredient(t){this.ingredients.splice(t,1),this.ingredientChange.next(this.ingredients.slice())}addIngredient(t){this.ingredients.push(t),this.ingredientChange.next(this.ingredients.slice())}addIngredients(t){this.ingredients.push(...t),this.ingredientChange.next(this.ingredients.slice())}}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return p});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return S}),n.d(e,"c",function(){return I}),n.d(e,"d",function(){return V}),n.d(e,"e",function(){return T}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return J}),n.d(e,"k",function(){return D}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return W}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return P}),n.d(e,"r",function(){return v}),n.d(e,"s",function(){return m}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return O}),n.d(e,"x",function(){return d}),n.d(e,"y",function(){return g}),n.d(e,"z",function(){return E}),n.d(e,"A",function(){return y}),n.d(e,"B",function(){return w}),n.d(e,"C",function(){return R}),n.d(e,"D",function(){return N}),n.d(e,"E",function(){return F}),n.d(e,"F",function(){return U}),n.d(e,"G",function(){return L}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return Q}),n.d(e,"J",function(){return j}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return K}),n.d(e,"M",function(){return G}),n.d(e,"N",function(){return C});var r=n("os0x"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function O(){return"indexedDB"in self&&null!=indexedDB}function C(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function T(){return!(!navigator||!navigator.cookieEnabled)}var I=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?A(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new I(i,a,r);return u},t}();function A(t,e){return t.replace(k,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var k=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function j(t){return JSON.stringify(t)}var x=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(c(o[0])||""),n=N(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=x(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=x(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new H(t,e);return n.subscribe.bind(n)}var H=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function B(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function J(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},qXBG:function(t,e,n){"use strict";n.d(e,"a",function(){return vy});var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Pa(e,n)})},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e(function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Pa(o(s.length-1),e),r=n.next()}while(!r.done)})},e});var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var O=Date.now;function C(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function I(t,e,n){this.code=k+t,this.message=e||N[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new I(e.substring(k.length),t.message,t.serverResponse):null}C(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var A,k="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},j={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in j)if(j[e].id===t)return{firebaseEndpoint:(t=j[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function L(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}A=x("__EID__")?"__EID__":void 0,C(P,Error),P.prototype.name="CustomError",C(D,P),D.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new M(function(){return new H},function(t){t.reset()});function q(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=B(t,e)}function $(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function X(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Ot&&e||"",this.b=Et}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===Et?t.a:(L("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,Et={},Ot={};function Ct(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Tt(t,e){this.a=e===Nt?t:""}function It(t){return t instanceof Tt&&t.constructor===Tt?t.a:(L("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=_t(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ct();return new Tt(t=e?e.createScriptURL(t):t,Nt)}(t=n.replace(At,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))}))}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Nt={};function jt(t,e){this.a=e===Ft?t:""}function xt(t){return t instanceof jt&&t.constructor===jt?t.a:(L("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}jt.prototype.sa=!0,jt.prototype.ra=function(){return this.a.toString()},jt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Lt(t){if(t instanceof jt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new jt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Rt.test(e[1])?new jt(t,Ft):null}return t}function Mt(t){return t instanceof jt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new jt(t,Ft))}var Ft={},Ut=new jt("about:invalid#zClosurez",Ft);function Vt(t,e,n){this.a=n===qt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Ht(t,e,n,r){return t=t instanceof jt?t:Mt(t),e=e||a,n=n instanceof bt?_t(n):n||"",e.open(xt(t),n,r,void 0)}function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=h;var Kt,Gt,Qt=ft("Opera"),$t=ft("Trident")||ft("MSIE"),Jt=ft("Edge"),Xt=Jt||$t,Yt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=Z,Yt?/rv:([^\);]+)(\)|;)/.exec(Gt):Jt?/Edge\/([\d\.]+)/.exec(Gt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Zt?/WebKit\/(\S+)/.exec(Gt):Qt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),$t){var re=te();if(null!=re&&re>parseFloat(ee)){Kt=String(re);break t}}Kt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=tt(String(Kt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var se=a.document&&$t&&(te()||parseInt(Kt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!$t||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){pt(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}z(s?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout(function(){throw t},0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),me||(he(),me=!0),ye.add(t,e)}var me=!1,ye=new U;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(V,t)}me=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,function(t){Pe(n,Ee,t)},function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Pe(n,Oe,t)})}catch(r){Pe(this,Oe,r)}}var we=0,Ee=2,Oe=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new M(function(){return new Ce},function(t){t.reset()});function Ie(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof _e)return t;var e=new _e(h);return Pe(e,Ee,t),e}function Ae(t){return new _e(function(e,n){n(t)})}function ke(t,e,n){De(t,e,n,null)||ve(E(e,t))}function Ne(t){return new _e(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],E(i,o,!0),E(i,o,!1));else e(r)})}function je(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?je(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Oe,e)))}t.c=null}else Pe(t,Oe,e)}function xe(t,e){t.b||t.a!=Ee&&t.a!=Oe||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ie(null,null,null);return i.a=new _e(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,xe(t,i),i.a}function Pe(t,e,n){t.a==we&&(t===n&&(e=Oe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Oe||n instanceof qe||function(t,e){t.g=!0,ve(function(){t.g&&Ve.call(null,e)})}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return xe(t,Ie(e||h,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.fc,t))}function Me(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Oe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(i){Ve.call(null,i)}F(Te,e)}function Ue(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Re(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).na=function(t,e){return(t=Ie(t,t,e)).c=!0,xe(this,t),this},t.s=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);ve(function(){je(this,e)},this)}},t.Zc=function(t){this.a=we,Pe(this,Ee,t)},t.$c=function(t){this.a=we,Pe(this,Oe,t)},t.fc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ve=ge;function qe(t){P.call(this,t)}function He(){0!=Be&&(ze[v(this)]=this),this.xa=this.xa,this.oa=this.oa}C(qe,P),qe.prototype.name="cancel";var Be=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Be)){var e=v(t);if(0!=Be&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}He.prototype.xa=!1,He.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Ke=Object.freeze||function(t){return t},Ge=!$t||9<=Number(se),Qe=$t&&!oe("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},C(Xe,Je);var Ye=Ke({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Qe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),tn=0;function en(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++tn,this.va=this.Oa=!1}function nn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function rn(t){this.src=t,this.a={},this.b=0}function on(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(nn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}rn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new en(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),un={};function cn(t,e,n,r,i){if(r&&r.once)hn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?En(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[an]=a=new rn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=mn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[Ze]?On(t,e,n,g(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=_n(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=sn(o=t.a[e],n,r,i))&&(nn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&pn(n))}function pn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])on(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(on(n,t),0==n.b&&(n.src=null,e[an]=null)):nn(t)}}}function dn(t){return t in un?un[t]:un[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&pn(t),n.call(r,e)}function mn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function yn(t){return(t=t[an])instanceof rn?t:null}var bn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return d(t)?t:(t[bn]||(t[bn]=function(e){return t.handleEvent(e)}),t[bn])}function wn(){He.call(this),this.v=new rn(this),this.$b=this,this.fb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function On(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&on(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function In(t){var e=null;return new _e(function(n,r){-1==(e=Tn(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).s(function(t){throw a.clearTimeout(e),t})}function Sn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];jn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)jn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function jn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}C(wn,He),wn.prototype[Ze]=!0,wn.prototype.addEventListener=function(t,e,n,r){cn(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){fn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;mt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Cn(s,r,!0,t)&&i}if(i=Cn(s=t.b=n,r,!0,t)&&i,i=Cn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(s=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)nn(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=kn.prototype).V=function(){Nn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Nn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return jn(this.b,t)?this.b[t]:e},t.set=function(t,e){jn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Pn(this,t.f),this.l=t.l,this.a=t.a,Dn(this,t.g),this.c=t.c,Ln(this,er(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Pn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Dn(this,n[4]),this.c=qn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Pn(t,e,n){t.f=n?qn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Ln(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),tr(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Gn)),t.b=new $n(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Vn(t,e,n,r){var i=new Rn(null,void 0);return t&&Pn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.c=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Hn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Kn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Qn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Pn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Dn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Ln(e,er(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,Qn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Xn(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function Yn(t,e){Jn(t),e=nr(t,e),jn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,jn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Nn(t)))}function Zn(t,e){return Jn(t),e=nr(t,e),jn(t.a.b,e)}function tr(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(nr(t,e),Y(n)),t.b+=n.length)}function er(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function nr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function rr(t){var e=[];return or(new ir,t,e),e.join("")}function ir(){}function or(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),or(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ur(r,n),n.push(":"),or(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ur(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Jn(this),this.c=null,t=nr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach(function(n,r){z(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Jn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Jn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=X(e,this.a.get(nr(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,Zn(this,t=nr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(ar,function(t){var e=sr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),sr[t]=e),e}),'"')}function cr(){var t=kr();return $t&&!!se&&11==se||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Lt(t)||Ut)),e.location.href=n}function fr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<fr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function pr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||a.window;try{t.close()}catch(e){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Ir(kr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof jt?n:Lt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof jt?e:Mt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ht("",r,n,s),t=xt(e),s&&(Xt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Vt(t=(r=Ct())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(L("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Ht(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new _e(function(e){"complete"==a.document.readyState?e():(t=function(){e()},hn(window,"load",t))}).s(function(e){throw fn(window,"load",t),e})}function br(t){return t=t||kr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Er(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Or(){var t=Er();return"ReactNative"===t||"Node"===t}var Cr="Firefox",Tr="Chrome";function Ir(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Cr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Tr:"Safari"}var Sr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Ar(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ir(i=kr()):"Worker"===r&&(r=Ir(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return a.navigator&&a.navigator.userAgent||""}function Nr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function jr(){try{var t=a.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function xr(){return(Rr()||"chrome-extension:"===Pr()||br())&&!Or()&&jr()&&!wr()}function Rr(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return a.location&&a.location.protocol||null}function Dr(t){return!pr(t=t||kr())&&Ir(t)!=Cr}function Lr(t){return void 0===t?null:rr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function Vr(t){return"Safari"!=Ir(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=Er(),this.b=pr(t)||"ReactNative"===e}function Br(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Wr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Kr(){return!(!Nr("fireauth.oauthhelper",a)&&!Nr("fireauth.iframe",a))}Hr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Gr,Qr={};function $r(t){Qr[t]||(Qr[t]=!0,zr(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Gr=2==Jr.abcd}catch(Gt){Gr=!1}function Xr(t,e,n){Gr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Xr(t,n,e[n])}function Zr(t){var e={};return Yr(e,t),e}function ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Xr(e,n,ti(t[n]));return e}function ei(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[oi]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",t[oi]),Xr(this,"displayName",t[ri]||null);var n=null;t[ii]&&(n=new Date(t[ii]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",e)}function ni(t){try{var e=new ai(t)}catch(n){e=null}return e}ei.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",si="phoneInfo";function ai(t){ei.call(this,t),Xr(this,"phoneNumber",t[si])}function ui(t){var e={},n=t[fi],r=t[di],i=t[gi];if(t=ni(t[pi]),!i||i!=li&&i!=hi&&!n||i==hi&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==hi?(e[mi]=n||null,e[bi]=n||null,e[vi]=r):(e[mi]=r||null,e[bi]=r||null,e[vi]=n||null),e[yi]=t||null,Xr(this,wi,i),Xr(this,_i,ti(e))}C(ai,ei),ai.prototype.w=function(){var t=ai.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",hi="VERIFY_AND_CHANGE_EMAIL",fi="email",pi="mfaInfo",di="newEmail",gi="requestType",vi="email",mi="fromEmail",yi="multiFactorInfo",bi="previousEmail",_i="data",wi="operation";function Ei(t){var e=Fn(t=Un(t),Oi)||null,n=Fn(t,Ci)||null,r=Fn(t,Si)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new I("argument-error",Oi+", "+Ci+"and "+Si+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ti)||null,languageCode:Fn(t,Ii)||null,tenantId:Fn(t,Ai)||null})}var Oi="apiKey",Ci="oobCode",Ti="continueUrl",Ii="languageCode",Si="mode",Ai="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:li,verifyAndChangeEmail:hi,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new Ei(t)}catch(e){return null}}function ji(t){var e=t[Li];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[Ui];var r=n[Mi];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new I("argument-error",Mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new I("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new I("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new I("missing-android-pkg-name")}}else if(void 0!==n)throw new I("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new I("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var xi="android",Ri="dynamicLinkDomain",Pi="handleCodeInApp",Di="iOS",Li="url",Mi="installApp",Fi="minimumVersion",Ui="packageName",Vi="bundleId";function qi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Hi=null;function Bi(t){var e=Wi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,O(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function zi(t){try{return new Bi(t)}catch(e){return null}}function Wi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Hi){Hi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}(t))}catch(r){}return null}Bi.prototype.S=function(){return this.f},Bi.prototype.i=function(){return this.b},Bi.prototype.toString=function(){return this.g};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],Qi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Gi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Gi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Gi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Ki},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function $i(t){for(var e in Qi)if(Qi[e].fa==t)return Qi[e];return null}function Ji(t){var e={};e["facebook.com"]=eo,e["google.com"]=ro,e["github.com"]=no,e["twitter.com"]=io;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new to(t);if(void 0!==t[Xi])return new Zi(t)}catch(r){}return null}var Xi="idToken",Yi="providerId";function Zi(t){var e=t[Yi];if(!e&&t[Xi]){var n=zi(t[Xi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Xr(this,"providerId",e),Xr(this,"isNewUser",n)}function to(t){Zi.call(this,t),Xr(this,"profile",ti((t=Fr(t.rawUserInfo||"{}"))||{}))}function eo(t){if(to.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(to.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function ro(t){if(to.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(to.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",t.screenName||null)}function oo(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:uo}C(to,Zi),C(eo,to),C(no,to),C(ro,to),C(io,to);var ao="enroll",uo="signin";function co(){}function lo(t,e){return t.then(function(t){if(t[Xs]){var n=zi(t[Xs]);if(!n||e!=n.h)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==k+"user-not-found"?new I("user-mismatch"):t})}function ho(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Xr(this,"providerId",t),Xr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function po(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(e){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Xr(this,"idToken",e.idToken),e.accessToken&&Xr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Xr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Xr(this,"accessToken",e.oauthToken),Xr(this,"secret",e.oauthTokenSecret)}Xr(this,"providerId",t),Xr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function mo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Pc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=($i(t)||{}).Ja||null,this.nb=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function _o(t){yo.call(this,t,Gi),this.a=[]}function wo(){_o.call(this,"facebook.com")}function Eo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Oo(){_o.call(this,"github.com")}function Co(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Oo).credential({accessToken:e})}function To(){_o.call(this,"google.com"),this.Ca("profile")}function Io(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function So(){yo.call(this,"twitter.com",Ki)}function Ao(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===jo.EMAIL_LINK_SIGN_IN_METHOD?jo.EMAIL_LINK_SIGN_IN_METHOD:jo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function jo(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Ro(e)))throw new I("argument-error","Invalid email link!");return new ko(t,e.code,jo.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=Ni(t=oo(t)))&&t.operation===li?t:null}function Po(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new I("internal-error");this.a=t,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Po(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Mo(t){try{this.a=t||r.a.auth()}catch(e){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new Po({cb:t,bb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Io(o,n);case"facebook.com":return Eo(n);case"github.com":return Co(n);case"twitter.com":return Ao(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new go(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Vo(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function qo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}so.prototype.Ha=function(){return Se(this.a?this.a:this.b)},so.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ja=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},ho.prototype.ja=function(t){return ya(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ba(t,n)},ho.prototype.c=function(t,e){return lo(_a(t,fo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ja=function(t){return ya(t,vo(this))},go.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ba(t,n)},go.prototype.c=function(t,e){return lo(_a(t,vo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Hb=gt(t),this},C(bo,yo),C(_o,yo),_o.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},_o.prototype.Pb=function(){return Y(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},C(wo,_o),Xr(wo,"PROVIDER_ID","facebook.com"),Xr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(Oo,_o),Xr(Oo,"PROVIDER_ID","github.com"),Xr(Oo,"GITHUB_SIGN_IN_METHOD","github.com"),C(To,_o),Xr(To,"PROVIDER_ID","google.com"),Xr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),C(So,yo),Xr(So,"PROVIDER_ID","twitter.com"),Xr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ja=function(t){return this.signInMethod==jo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Aa,{email:this.a,oobCode:this.f}):eu(t,Ja,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==jo.EMAIL_LINK_SIGN_IN_METHOD?eu(t,ka,{idToken:e,email:this.a,oobCode:this.f}):eu(t,Ha,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return lo(this.ja(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(jo,{PROVIDER_ID:"password"}),Yr(jo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(jo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ja=function(t){return t.eb(Lo(this))},Po.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,eu(t,Ya,n)},Po.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",lo(t=eu(t,Za,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.eb=function(t,e){var n=this.a.a;return Se(e.verify()).then(function(r){if("string"!=typeof r)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then(function(t){return function(t,e){return eu(t,za,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==uo?i.Ha().then(function(e){return function(t,e){return eu(t,Wa,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return eu(t,Va,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Yr(Mo,{PROVIDER_ID:"phone"}),Yr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.S=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Wo=null;function Ko(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.a,"chrome-extension"==(r=r.f)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Go(t,e,n){I.call(this,t,n),(t=e||{}).Ib&&Xr(this,"email",t.Ib),t.ea&&Xr(this,"phoneNumber",t.ea),t.credential&&Xr(this,"credential",t.credential),t.Yb&&Xr(this,"tenantId",t.Yb)}function Qo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Uo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Go(e,n,t.message)}return null}function $o(){}function Jo(){}function Xo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.pc,this),this.a.onerror=w(this.Rb,this),this.a.onprogress=w(this.qc,this),this.a.ontimeout=w(this.uc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}C(Ko,I),C(Go,I),Go.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Go.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,C(Jo,$o),Jo.prototype.a=function(){var t=Xo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Xo(this)&&(t[0]=!0,t[1]=!0),t},zo=new Jo,C(Yo,$o),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){r||O(),delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(L("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(d(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},ls=null;function hs(t){var e;if(ls||(ls=new ns(""),cs[""]=ls,ls.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=hs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=gs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=hs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(ps,$o),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),C(ds,wn);var gs=0;function vs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){wn.call(this),this.headers=new kn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=_s,this.u=this.R=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=gs)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=gs},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,vs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&vs(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.rc=function(t){this.a&&(this.response=t,ms(this))},t.Ta=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),C(bs,wn);var _s="";bs.prototype.b=hs("goog.net.XhrIo");var ws=/^https?$/i,Es=["POST","PUT"];function Os(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ts(t),Ss(t)}function Ts(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Is(t){if(t.c&&void 0!==s)if(t.A[1]&&4==ks(t)&&2==Ns(t))fs(t.b,js(t,"Local request error detected and ignored"));else if(t.i&&4==ks(t))Tn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==ks(t)){fs(t.b,js(t,"Request complete")),t.c=!1;try{var e,n=Ns(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!ws.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ks(t)?t.a.statusText:""}catch(l){fs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ns(t)+"]",Ts(t)}}finally{Ss(t)}}}function Ss(t,e){if(t.a){As(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function As(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(a.clearTimeout(t.o),t.o=null)}function ks(t){return t.a?t.a.readyState:0}function Ns(t){try{return 2<ks(t)?t.a.status:-1}catch(e){return-1}}function js(t,e){return e+" ["+t.P+" "+t.l+" "+Ns(t)+"]"}function xs(t){var e=Bs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function Ps(t){if(t.a){if(!t.m)throw new Fs(t);t.m=!1}}function Ds(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ls(t){return G(t.g,function(t){return d(t[1])})}function Ms(t){if(t.h&&t.a&&Ls(t)){var e=t.h,n=qs[e];n&&(a.clearTimeout(n.a),delete qs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ls(t)||(n=!0)}}t.c=e,r&&(u=w(t.v,t,!0),r=w(t.v,t,!1),e instanceof xs?(Ds(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Vs(e),qs[e.a]=e,t.h=e.a)}function Fs(){P.call(this)}function Us(){P.call(this)}function Vs(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,js(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,js(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ss(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ss(this,!0)),bs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Is(this):this.Ic())},t.Ic=function(){Is(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fs(this.b,"Can not get response: "+e.message),null}},xs.prototype.cancel=function(t){if(this.a)this.c instanceof xs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Us(this),Ps(this),Rs(this,!1,t))}},xs.prototype.v=function(t,e){this.i=!1,Rs(this,t,e)},xs.prototype.then=function(t,e,n){var r,i,o=new _e(function(t,e){r=t,i=e});return Ds(this,r,function(t){t instanceof Us?o.cancel():i(t)}),o.then(t,e,n)},xs.prototype.$goog_Thenable=!0,C(Fs,P),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",C(Us,P),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",Vs.prototype.c=function(){throw delete qs[this.a],this.b};var qs={};function Hs(t){var e={},n=e.document||document,r=It(t).toString(),i=de(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new xs(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout(function(){zs(i,!0);var t=new Gs(Ks,"Timeout reached for loading script "+r);Ps(s),Rs(s,!1,t)},h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.wd||!1,u),Ps(s),Rs(s,!0,null))},i.onerror=function(){zs(i,!0,u);var t=new Gs(Ws,"Error while loading script "+r);Ps(s),Rs(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=It(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ws=0,Ks=1;function Gs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Qs(t){this.f=t}function $s(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Ys,this.g=gt(t.secureTokenHeaders||Zs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ta,this.a=gt(t.firebaseHeaders||ea),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=a.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!wr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new ps(self):Or()?new Qs(n):new Yo,this.b=null}C(Gs,P),C(Qs,$o),Qs.prototype.a=function(){return new this.f},Qs.prototype.b=function(){return{}};var Js,Xs="idToken",Ys=new Hr(3e4,6e4),Zs={"Content-Type":"application/x-www-form-urlencoded"},ta=new Hr(3e4,6e4),ea={"Content-Type":"application/json"};function na(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ra(t,e){e&&(t.l=ia("https://securetoken.googleapis.com/v1/token",e),t.h=ia("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ia("https://identitytoolkit.googleapis.com/v2/",e))}function ia(t,e){return t=Un(t),e=Un(e.url),t.c=t.a+t.c,Pn(t,e.f),t.a=e.a,Dn(t,e.g),t.toString()}function oa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function sa(t,e,n,r,i,o,s){(function(){var t=kr();return!((t=Ir(t)!=Tr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&se&&!(9<se))})()||wr()?t=w(t.u,t):(Js||(Js=new _e(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ua]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ds(t,null,e,void 0)}(Hs(St(aa,{onload:ua})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.o,t)),t(e,n,r,i,o,s)}$s.prototype.S=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new bs(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}En(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),On(s,"ready",function(){u&&clearTimeout(u),We(this)}),On(s,"timeout",function(){u&&clearTimeout(u),We(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():zo.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.O?t.O:zo),t.a.onreadystatechange=w(t.Ub,t);try{fs(t.b,js(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return fs(t.b,js(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)z(t,e,void 0);else for(var n=An(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=Os,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Q(Es,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{As(t),0<t.g&&(t.u=function(t){return $t&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,js(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.o=Tn(t.Ma,t.g,t)),fs(t.b,js(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){fs(t.b,js(t,"Send error: "+s.message)),Cs(t,s)}}(s,t,n,r,i)};var aa=new bt(Ot,"https://apis.google.com/js/client.js?onload=%{onload}"),ua="__fcb"+Math.floor(1e6*Math.random()).toString();function ca(t){if("string"!=typeof(t=t.email)||!mr.test(t))throw new I("invalid-email")}function la(t){"email"in t&&ca(t)}function ha(t){if(!t[Xs]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,gt(t));throw new I("internal-error")}}function fa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}$s.prototype.o=function(t,e,n,r,i){var o=this;Js.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).s(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},$s.prototype.yb=function(){return eu(this,Ba,{})},$s.prototype.Ab=function(t,e){return eu(this,qa,{idToken:t,email:e})},$s.prototype.Bb=function(t,e){return eu(this,Ha,{idToken:t,password:e})};var pa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function da(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function va(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ma(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Qo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Qo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Qo(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;ha(t)}function ya(t,e){return e.returnIdpCredential=!0,eu(t,Ka,e)}function ba(t,e){return e.returnIdpCredential=!0,eu(t,Qa,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Ga,e)}function wa(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=$s.prototype).Cb=function(t,e){var n={idToken:t},r=[];return pt(pa,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),eu(this,qa,n)},t.ub=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,La,t)},t.vb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,Ra,t)},t.tb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Pa,t)},t.Db=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,Da,t)},t.eb=function(t){return eu(this,Xa,t)},t.mb=function(t,e){return eu(this,Ua,{oobCode:t,newPassword:e})},t.Qa=function(t){return eu(this,Oa,{oobCode:t})},t.ib=function(t){return eu(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",B:wa,Z:"email",C:!0},Oa={endpoint:"resetPassword",B:wa,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},C:!0},Ca={endpoint:"signupNewUser",B:function(t){if(ca(t),!t.password)throw new I("weak-password")},F:ha,U:!0,C:!0},Ta={endpoint:"createAuthUri",C:!0},Ia={endpoint:"deleteAccount",M:["idToken"]},Sa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},Aa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ca,F:ha,U:!0,C:!0},ka={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ca,F:ha,U:!0},Na={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:da,F:ha,C:!0,Na:!0},ja={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:da,F:ha,C:!0,Na:!0},xa={endpoint:"getAccountInfo"},Ra={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");ca(t)},Z:"email",C:!0},Pa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Da={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},La={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");ca(t)},Z:"email",C:!0},Ma={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Fa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ua={endpoint:"resetPassword",B:wa,Z:"email",C:!0},Va={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},qa={endpoint:"setAccountInfo",M:["idToken"],B:la,U:!0},Ha={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(la(t),!t.password)throw new I("weak-password")},F:ha,U:!0},Ba={endpoint:"signupNewUser",F:ha,U:!0,C:!0},za={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Ka={endpoint:"verifyAssertion",B:ga,Xa:va,F:ma,U:!0,C:!0},Ga={endpoint:"verifyAssertion",B:ga,Xa:va,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);ha(t)},U:!0,C:!0},Qa={endpoint:"verifyAssertion",B:function(t){if(ga(t),!t.idToken)throw new I("internal-error")},Xa:va,F:ma,U:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new I("invalid-custom-token")},F:ha,U:!0,C:!0},Ja={endpoint:"verifyPassword",B:function(t){if(ca(t),!t.password)throw new I("wrong-password")},F:ha,U:!0,C:!0},Xa={endpoint:"verifyPhoneNumber",B:fa,F:ha,C:!0},Ya={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new I("internal-error");fa(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Qo(t);ha(t)}},Za={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:fa,F:ha,C:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Xs]^!!t.refreshToken)throw new I("internal-error")},C:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Ae(new I("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Se(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Un(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",O().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new _e(function(e,n){sa(t,a.toString(),function(t){t?t.error?n(ru(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:rr(Mr(i)),t.a,t.m.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function nu(t){return ru({error:{errors:[{message:t}],code:400,message:t}})}function ru(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new I(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new I(r[i],e);return!e&&t&&(e=Lr(t)),new I("internal-error",e)}function iu(t){this.b=t,this.a=null,this.qb=function(t){return(uu||(uu=new _e(function(t,e){function n(){qr(),Nr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:su.get()})}if(Nr("gapi.iframes.Iframe"))t();else if(Nr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Nr("gapi.load")?n():e(Error("Network Error"))},Se(Hs(r=St(ou,{onload:r}))).s(function(){e(Error("Network Error"))})}}).s(function(t){throw uu=null,t}))).then(function(){return new _e(function(e,n){Nr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},au.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ou=new bt(Ot,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new Hr(3e4,6e4),au=new Hr(5e3,15e3),uu=null;function cu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Un(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function hu(t){try{return r.a.app(t).auth().Ga()}catch(e){return[]}}function fu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function pu(t){var e=lr();return function(t){return eu(t,Ma,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Un(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ko(lr())})}function du(t){return t.v||(t.v=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=hu(t.b),i=new cu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.m=new iu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then(function(){t.a.register("authEvent",e,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.m,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)})}(t)})),t.v}function gu(t){return t.l||(t.A=t.c?Ar(t.c,hu(t.b)):null,t.l=new $s(t.g,x(t.i),t.A),t.f&&ra(t.l,t.f)),t.l}function vu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new lu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.xb(l).toString()}function mu(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yu(t){this.b=t,this.a={},this.f=w(this.c,this)}cu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},lu.prototype.xb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.m){var t=Un(this.m.url);t=Vn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.o),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ka()}catch(u){n=null}for(var i in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Mr((n=this.a).Hb))e[i]=e[i].toString();i=n.Pc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),dt(e)||Mn(t,"customParameters",Lr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Yn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Yn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Yn(t.b,"eid"),(a=hu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=fu.prototype).Nb=function(t,e,n){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){(function(t){var e={type:"webStorageSupport"};return du(t).then(function(){return function(t,e){return t.qb.then(function(){return new _e(function(n){t.a.send(e.type,e,n,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.m,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&dr(t),e(i),s=!0)})}).s(function(){}).then(function(){if(!s)return function(t){return new _e(function(e){return function n(){In(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return In(n).then(function(){e(r)})})},t.Wb=function(){var t=kr();return!Dr(t)&&!Vr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new I("popup-blocked"));if(s&&!Dr())return this.la().s(function(e){dr(t),i(e)}),r(),Se();this.a||(this.a=pu(gu(this)));var u=this;return this.a.then(function(){var e=u.la().s(function(e){throw dr(t),i(e),e});return r(),e}).then(function(){Vo(n),s||hr(vu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=pu(gu(this)));var i=this;return this.a.then(function(){Vo(e),hr(vu(i.o,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return du(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new I("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){J(this.h,function(e){return e==t})},(t=mu.prototype).get=function(t){return Se(this.a.getItem(t)).then(function(t){return t&&Fr(t)})},t.set=function(t,e){return Se(this.a.setItem(t,Lr(e)))},t.T=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var bu,_u=[];function wu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Ou(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Tu(t,c),e}).s(function(e){throw Tu(t,c),e})}function Tu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),J(t.a,function(t){return t==e})}}function Iu(){if(!Nu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t=this;wr()&&self?(this.m=function(){var t=wr()?self:null;if(z(_u,function(n){n.b==t&&(e=n)}),!e){var e=new yu(t);_u.push(e)}return e}(),wu(this.m,"keyChanged",function(e,n){return Du(t).then(function(e){return 0<e.length&&z(t.a,function(t){t(e)}),{keyProcessed:Q(e,n.key)}})}),wu(this.m,"ping",function(){return Se(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Se().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):Se(null)}().then(function(e){(t.h=e)&&(t.g=new Ou(new Eu(e)),Cu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.o=!0)}).s(function(){}))})}function Su(t){return new _e(function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e(function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Su(t)}).then(function(t){e(t)}).s(function(t){n(t)})}})}function Au(t){return t.i||(t.i=Su(t)),t.i}function ku(t,e){var n=0;return new _e(function r(i,o){Au(t).then(e).then(i).s(function(e){if(!(3<++n))return Au(t).then(function(e){return e.close(),t.i=void 0,r(i,o)});o(e)})})}function Nu(){try{return!!a.indexedDB}catch(Gt){return!1}}function ju(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ru(t){return new _e(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Pu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):Se()}function Du(t){return Au(t).then(function(t){var e=ju(xu(t,!1));return e.getAll?Ru(e.getAll()):new _e(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=fr(t.c,n),t.c=n}return r})}function Lu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Mu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then(function(){if(Nu()){var t=Ur(),r="__sak"+t;return bu||(bu=new Iu),(n=bu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)}).then(function(){return n}).s(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){z(e.a,function(e){e(t)})}),t})}function Fu(){this.a={},this.type="inMemory"}function Uu(){if(!function(){var t="Node"==Er();if(!(t=Vu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Vu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Vu(){try{var t=a.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function qu(){this.type="nullStorage"}function Hu(){if(!function(){var t="Node"==Er();if(!(t=Bu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Bu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Gu,t.Node=Qu,t.ReactNative=$u,t.Worker=Ju,this.a=t[Er()]}yu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,function(e){i.push(Se().then(function(){return e(t.origin,t.data.data)}))}),Ne(i).then(function(r){var i=[];z(r,function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),z(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ou.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(t=Iu.prototype).set=function(t,e){var n=this,r=!1;return ku(this,function(e){return Ru((e=ju(xu(e,!0))).get(t))}).then(function(i){return ku(n,function(o){if(o=ju(xu(o,!0)),i)return i.value=e,Ru(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Ru(o.add(s))})}).then(function(){return n.c[t]=e,Pu(n,t)}).na(function(){r&&n.b--})},t.get=function(t){return ku(this,function(e){return Ru(ju(xu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.T=function(t){var e=this,n=!1;return ku(this,function(r){return n=!0,e.b++,Ru(ju(xu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Pu(e,t)}).na(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Lu(t),function e(){t.f=setTimeout(function(){t.l=Du(t).then(function(e){0<e.length&&z(t.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){J(this.a,function(e){return e==t}),0==this.a.length&&Lu(this)},(t=Mu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.T=function(t){return this.b.then(function(e){return e.T(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){J(this.a,function(e){return e==t})},(t=Fu.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.T=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Uu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)})},t.T=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&cn(a.window,"storage",t)},t.ia=function(t){a.window&&fn(a.window,"storage",t)},(t=qu.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.T=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Hu.prototype).get=function(t){var e=this;return Se().then(function(){return Fr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Lr(e);null===r?n.T(t):n.a.setItem(t,r)})},t.T=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Wu,Ku,Gu={D:Uu,ab:Hu},Qu={D:Uu,ab:Hu},$u={D:mu,ab:qu},Ju={D:Uu,ab:qu},Xu={qd:"local",NONE:"none",sd:"session"};function Yu(){var t=!(Vr(kr())||!_r()),e=Dr(),n=jr();this.v=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!cr()&&Kr()||!a.indexedDB?new t.a.D:new Mu(wr()?new Fu:new t.a.D)}catch(r){this.g=new Fu,this.h=!0}try{this.i=new t.a.ab}catch(r){this.i=new Fu}this.m=new Fu,this.f=w(this.Xb,this),this.b={}}function Zu(){return Ku||(Ku=new Yu),Ku}function tc(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function ec(t,e){return"firebase:"+t.name+(e?":"+e:"")}function nc(t,e,n){return n=ec(e,n),"local"==e.D&&(t.b[n]=null),tc(t,e.D).T(n)}function rc(t){t.c&&(clearInterval(t.c),t.c=null)}function ic(t){this.a=t,this.b=Zu()}(t=Yu.prototype).get=function(t,e){return tc(this,t.D).get(ec(t,e))},t.set=function(t,e,n){var r=ec(t,n),i=this,o=tc(this,t.D);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.D&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=ec(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(tc(this,"local").ca(this.f),this.h||(cr()||!Kr())&&a.indexedDB||!this.l||function(t){rc(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ec(t,e),this.a[t]&&(J(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(tc(this,"local").ia(this.f),rc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?tc(this,"local").ia(this.f):rc(this),this.v)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},$t&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,w(this.lb,this))},t.lb=function(t){this.a[t]&&z(this.a[t],function(t){t()})};var oc,sc={name:"authEvent",D:"local"};function ac(){this.a=Zu()}function uc(t,e){this.b=cc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===oc&&(oc=a.Int32Array?new Int32Array(vc):vc),this.reset()}C(uc,function(){this.b=-1});for(var cc=64,lc=cc-1,hc=[],fc=0;fc<lc;fc++)hc[fc]=0;var pc=X(128,hc);function dc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|oc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(dc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(dc(t),i=0)}}t.c=i,t.g+=n}uc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var vc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mc(){uc.call(this,8,yc)}C(mc,uc);var yc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new ac,this.g=new ic(this.h),this.f=null,this.b=[],this.a=this.c=null}function _c(t){return new I("invalid-cordova-configuration",t)}function wc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Ec(t){return t.f||(t.f=t.la().then(function(){return new _e(function(e){t.Ea(function n(r){return e(r),t.Ra(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),Oc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=oo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=Un(i),"firebaseError")||null))?S(o):null)?new qo(r.c,r.b,null,null,o,null,r.S()):new qo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}wc(t,i)})}var n=new qo("unknown",null,null,null,new I("no-auth-event")),r=!1,i=In(500).then(function(){return Oc(t).then(function(){r||wc(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Nr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Wo||(Wo=new Bo),function(t){var e=Wo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Nr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function Oc(t){var e=null;return function(t){return t.b.get(sc,t.a).then(function(t){return Ho(t)})}(t.g).then(function(n){return e=n,nc((n=t.g).b,sc,n.a)}).then(function(){return e})}function Cc(t){this.a=t,this.b=Zu()}(t=bc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(br(void 0)?yr().then(function(){return new _e(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Nr("universalLinks.subscribe",a))throw _c("cordova-universal-links-plugin-fix is not installed");if(void 0===Nr("BuildInfo.packageName",a))throw _c("cordova-plugin-buildinfo is not installed");if("function"!=typeof Nr("cordova.plugins.browsertab.openUrl",a))throw _c("cordova-plugin-browsertab is not installed");if("function"!=typeof Nr("cordova.InAppBrowser.open",a))throw _c("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")})},t.Nb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),Se()},t.Lb=function(){return Ae(new I("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Ae(new I("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Se().then(function(){return Vo(e),Ec(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new qo(e,r,null,o,new I("no-auth-event"),null,i),u=Nr("BuildInfo.packageName",a);if("string"!=typeof u)throw new I("invalid-cordova-configuration");var c=Nr("BuildInfo.displayName",a),l={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!kr().toLowerCase().match(/android/))return Ae(new I("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new mc;gc(e,t),t=[];var n=8*e.g;gc(e,pc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(dc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=vu(t.m,t.i,t.l,e,n,null,r,t.v,l,t.u,i,t.o);return t.la().then(function(){var e=t.h;return t.A.a.set(sc,s.w(),e)}).then(function(){var e=Nr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new I("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Nr("cordova.plugins.browsertab.openUrl",a)))throw new I("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Nr("cordova.InAppBrowser.open",a)))throw new I("invalid-cordova-configuration");e=kr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new _e(function(t,e){u=function(){var e=Nr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Br()&&c()},o.addEventListener("resume",c=function(){s||(s=In(2e3).then(function(){e(new I("redirect-cancelled-by-user"))}))},!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).s(function(t){return Oc(i).then(function(){throw t})})}).na(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ra(u),i.c=null})},t.Ea=function(t){this.b.push(t),Ec(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new I("no-auth-event")),t(e))})},t.Ra=function(t){J(this.b,function(e){return e==t})};var Tc={name:"pendingRedirect",D:"session"};function Ic(t){return nc(t.b,Tc,t.a)}function Sc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=w(this.o,this),this.b=new Hc,this.A=new Gc,this.g=new Cc(Vc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Ac(this.O,this.m,this.v,A,this.G)}function Ac(t,e,n,i,o){var s=r.a.SDK_VERSION||null;return br()?new bc(t,e,n,s,i,o):new fu(t,e,n,s,i,o)}function kc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s(function(n){throw t.a==e&&t.reset(),n})}function Nc(t){t.a.Wb()&&kc(t).s(function(e){var n=new qo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Lc(e)&&t.o(n)}),t.a.Sb()||Bc(t.b)}function jc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Tc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ic(t.g).then(function(){kc(t).s(function(e){var n=new qo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Lc(e)&&t.o(n)})}):Nc(t)}).s(function(){Nc(t)})}function xc(t,e){J(t.h,function(t){return t==e})}Sc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Ac(this.O,this.m,this.v,null,this.G),this.i={}},Sc.prototype.o=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=O()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=O())),e=!0;break}}return Bc(this.b),e};var Rc=new Hr(2e3,1e4),Pc=new Hr(3e4,6e4);function Dc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Lc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Mc(t,e,n,r,i){var o;return function(t){return t.b.set(Tc,"pending",t.a)}(t.g).then(function(){return t.a.Mb(e,n,r,i).s(function(e){if(Lc(e))throw new I("operation-not-supported-in-this-environment");return o=e,Ic(t.g).then(function(){throw o})}).then(function(){return t.a.Zb()?new _e(function(){}):Ic(t.g).then(function(){return t.qa()}).then(function(){}).s(function(){})})})}function Fc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Rc.get())}Sc.prototype.qa=function(){return this.b.qa()};var Uc={};function Vc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function qc(t,e,n,r){var i=Vc(e,n,r);return Uc[i]||(Uc[i]=new Sc(t,e,n,r)),Uc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Kc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Kc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Kc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Gc(){}function Qc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function $c(t,e){this.a=e,Xr(this,"verificationId",t)}function Jc(t,e,n,r){return new Mo(t).eb(e,n).then(function(t){return new $c(t,r)})}function Xc(t){var e=Wi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Wr(1e3*e.exp),authTime:Wr(1e3*e.auth_time),issuedAtTime:Wr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[tl];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;z(e[Zc]||[],function(t){(t=ni(t))&&i.b.push(t)}),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Kc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){Kc(t,a,e,null)}).s(function(e){Kc(t,a,null,e)})}(this,t,e):Ae(new I("invalid-auth-event")):(Kc(this,!1,null,null),Se())}else Ae(new I("invalid-auth-event"))},Hc.prototype.qa=function(){var t=this;return new _e(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new I("timeout");t.a&&t.a.cancel(),t.a=In(Pc.get()).then(function(){t.b||(t.g=!0,Kc(t,!0,null,e))})}(t))})},Gc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then(function(t){e.ma(r,t,null,n)}).s(function(t){e.ma(r,null,t,n)})}(t,e):Ae(new I("invalid-auth-event"))}else Ae(new I("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var Zc="mfaInfo",tl="mfaPendingCredential";function el(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),Xr(this,"resolver",this.b)}function nl(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new el(e,t.serverResponse,n,t.message)}catch(r){}return null}function rl(){}function il(t){Xr(this,"factorId",t.fa),this.a=t}function ol(t){if(il.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sl(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function al(t,e){this.a=t,this.b=[],this.c=w(this.xc,this),cn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[oi]=t.uid),t.displayName&&(r[ri]=t.displayName),t.enrollmentTime&&(r[ii]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ai(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),ul(this,n)}function ul(t,e){t.b=e,Xr(t,"enrolledFactors",e)}function cl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ll(t,e){t.stop(),t.b=In(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return Br()||!t?Se():new _e(function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).s(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ll(t,!0)}).s(function(e){t.i(e)&&ll(t,!1)})}function hl(t){this.c=t,this.b=this.a=null}function fl(t){return t.b&&1e3*t.b.c||0}function pl(t,e){var n=e.refreshToken;t.b=zi(e[Xs]||""),t.a=n}function dl(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Wr(e||null),creationTime:Wr(t||null)})}function gl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function vl(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION):null;this.a=new $s(this.l,x(A),i),t.emulatorConfig&&ra(this.a,t.emulatorConfig),this.b=new hl(this.a),Cl(this,e[Xs]),pl(this.b,e),Xr(this,"refreshToken",this.b.a),Sl(this,n||{}),wn.call(this),this.P=!1,this.o&&xr()&&(this.i=qc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new cl(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=fl(t.b)-O()-3e5;return 0<e?e:0})}(this),this.$=w(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){ra(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){bl(o,t.f)},this.aa=null,this.N=new al(this,n),Xr(this,"multiFactor",this.N)}function ml(t,e){t.ba&&fn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&cn(e,"languageCodeChanged",t.Ba)}function yl(t,e){t.W&&fn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&cn(e,"emulatorConfigChanged",t.za)}function bl(t,e){t.X=e,oa(t.a,r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,t.X):null)}function _l(t,e){t.aa&&fn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&cn(e,"frameworkChanged",t.Aa)}function wl(t){try{return r.a.app(t.m).auth()}catch(e){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function El(t){t.A||t.u.b||(t.u.start(),fn(t,"tokenChanged",t.$),cn(t,"tokenChanged",t.$))}function Ol(t){fn(t,"tokenChanged",t.$),t.u.stop()}function Cl(t,e){t.ya=e,Xr(t,"_lat",e)}function Tl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ne(e).then(function(){return t})}function Il(t){t.i&&!t.P&&(t.P=!0,jc(t.i,t))}function Sl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new dl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Al(){}function kl(t){return Se().then(function(){if(t.A)throw new I("app-deleted")})}function Nl(t){return K(t.providerData,function(t){return t.providerId})}function jl(t,e){e&&(xl(t,e.providerId),t.providerData.push(e))}function xl(t,e){J(t.providerData,function(t){return t.providerId==e})}function Rl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Xr(t,e,n)}function Pl(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Xr(t,"metadata",e.metadata?function(t){return new dl(t.a,t.b)}(e.metadata):new dl),z(e.providerData,function(e){jl(t,e)}),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Xr(t,"refreshToken",t.b.a),ul(t.N,e.N.b))}function Dl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,xa,{idToken:e}).then(w(t.Jc,t))}(t,e).then(function(){return n||Rl(t,"isAnonymous",!1),e})})}function Ll(t,e){e[Xs]&&t.ya!=e[Xs]&&(pl(t.b,e),t.dispatchEvent(new sl("tokenChanged")),Cl(t,e[Xs]),Rl(t,"refreshToken",t.b.a))}function Ml(t,e){return Dl(t).then(function(){if(Q(Nl(t),e))return Tl(t).then(function(){throw new I("provider-already-linked")})})}function Fl(t,e,n){return Zr({user:t,credential:Uo(e),additionalUserInfo:e=Ji(e),operationType:n})}function Ul(t,e){return Ll(t,e),t.reload().then(function(){return t})}function Vl(t,e,n,i,o){if(!xr())return Ae(new I("operation-not-supported-in-this-environment"));if(t.f&&!o)return Ae(t.f);var s=$i(n.providerId),a=Ur(t.uid+":::"),u=null;(!Dr()||_r())&&t.o&&n.isOAuthProvider&&(u=vu(t.o,t.l,t.m,e,n,null,a,r.a.SDK_VERSION||null,null,null,t.tenantId));var c=gr(u,s&&s.ua,s&&s.ta);return i=i().then(function(){if(Hl(t),!o)return t.I().then(function(){})}).then(function(){return Dc(t.i,c,e,n,a,!!u,t.tenantId)}).then(function(){return new _e(function(n,r){t.ma(e,null,new I("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=a,t.c=Fc(t.i,t,e,c,a)})}).then(function(t){return c&&dr(c),t?Zr(t):null}).s(function(t){throw c&&dr(c),t}),Bl(t,i,o)}function ql(t,e,n,r,i){if(!xr())return Ae(new I("operation-not-supported-in-this-environment"));if(t.f&&!i)return Ae(t.f);var o=null,s=Ur(t.uid+":::");return r=r().then(function(){if(Hl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Tl(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Kl,t.w(),e.a)),e}).then(function(){return Mc(t.i,e,n,s,t.tenantId)}).s(function(e){if(o=e,t.ha)return Gl(t.ha);throw o}).then(function(){if(o)throw o}),Bl(t,r,i)}function Hl(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Bl(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Ae(t.f)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new sl("userInvalidated")),t.f=e),e})}(t,e,n);return t.G.push(r),r.na(function(){$(t.G,r)}),r.s(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=nl(e.w(),wl(t),w(t.ic,t))),n||e})}function zl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Xs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new vl(e,n,t);return t.providerData&&z(t.providerData,function(t){t&&jl(r,Zr(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Wl(t){this.a=t,this.b=Zu()}Yc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then(function(t){var n=gt(e.f);return delete n[Zc],delete n[tl],mt(n,t),e.g(n)})},C(el,I),rl.prototype.rb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Lo(t.a)}),eu(e,Na,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),eu(e,ja,n)})}(this,t,e)},C(il,rl),C(ol,il),C(sl,Je),(t=al.prototype).xc=function(t){ul(this,function(t){var e=[];return z(t.mfaInfo||[],function(t){(t=ni(t))&&e.push(t)}),e}(t.gd))},t.Qb=function(){return this.a.I().then(function(t){return new so(t,null)})},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then(function(n){return t.rb(r,n,e)}).then(function(t){return Ll(n.a,t),n.a.reload()})},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return eu(r,tu,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=W(e.b,function(t){return t.uid!=n});return ul(e,r),Ll(e.a,t),e.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,function(t){return t.w()})}}},cl.prototype.start=function(){this.a=this.c,ll(this,!0)},cl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},hl.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:fl(this)}},hl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new I("user-token-expired")):t||!this.b||O()>fl(this)-3e4?this.a?function(t,e){return function(t,e){return new _e(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?sa(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(ru(t)):t.access_token&&t.refresh_token?n(t):r(new I("internal-error")):r(new I("network-request-failed"))},"POST",Xn(e).toString(),t.g,t.v.get()):r(new I("internal-error"))})}(t.c,e).then(function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},dl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(vl,wn),vl.prototype.wa=function(t){this.pa=t,na(this.a,t)},vl.prototype.ka=function(){return this.pa},vl.prototype.Ga=function(){return Y(this.X)},vl.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Xr(vl.prototype,"providerId","firebase"),(t=vl.prototype).reload=function(){var t=this;return Bl(this,kl(this).then(function(){return Dl(t).then(function(){return Tl(t)}).then(Al)}))},t.nc=function(t){return this.I(t).then(function(t){return new Xc(t)})},t.I=function(t){var e=this;return Bl(this,kl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.ya&&(Cl(e,t.accessToken),e.dispatchEvent(new sl("tokenChanged"))),Rl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");Sl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,function(t){return new gl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)jl(this,e[n]);Rl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sl("userReloaded",{gd:t}))},t.Kc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Bl(this,t.c(this.a,this.uid).then(function(t){return Ll(e,t),n=Fl(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Bl(this,Ml(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Fl(e,t,"link"),Ul(e,t)}).then(function(){return n}))},t.Cc=function(t,e){var n=this;return Bl(this,Ml(this,"phone").then(function(){return Jc(wl(n),t,e,w(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Bl(this,Se().then(function(){return Jc(wl(n),t,e,w(n.sb,n))}),!0)},t.Ab=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Ab(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.dd=function(t){var e=this;return Bl(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Ll(e,t),e.reload()}))},t.Bb=function(t){var e=this;return Bl(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Ll(e,t),e.reload()}))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return kl(this);var e=this;return Bl(this,this.I().then(function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Ll(e,t),Rl(e,"displayName",t.displayName||null),Rl(e,"photoURL",t.photoUrl||null),z(e.providerData,function(t){"password"===t.providerId&&(Xr(t,"displayName",e.displayName),Xr(t,"photoURL",e.photoURL))}),Tl(e)}).then(Al))},t.bd=function(t){var e=this;return Bl(this,Dl(this).then(function(n){return Q(Nl(e),t)?function(t,e,n){return eu(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return z(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),z(Nl(e),function(t){n[t]||xl(e,t)}),n[Mo.PROVIDER_ID]||Xr(e,"phoneNumber",null),Tl(e)}):Tl(e).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var t=this;return Bl(this,this.I().then(function(e){return eu(t.a,Ia,{idToken:e})}).then(function(){t.dispatchEvent(new sl("userDeleted"))})).then(function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");ml(t,null),yl(t,null),_l(t,null),t.G=[],t.A=!0,Ol(t),Xr(t,"refreshToken",null),t.i&&xc(t.i,t)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?w(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?w(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):null},t.Dc=function(t){var e=this;return Vl(this,"linkViaPopup",t,function(){return Ml(e,t.providerId).then(function(){return Tl(e)})},!1)},t.Mc=function(t){return Vl(this,"reauthViaPopup",t,function(){return Se()},!0)},t.Ec=function(t){var e=this;return ql(this,"linkViaRedirect",t,function(){return Ml(e,t.providerId)},!1)},t.Nc=function(t){return ql(this,"reauthViaRedirect",t,function(){return Se()},!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,this.I().then(function(n){return ba(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Fl(i,t,"link"),Ul(i,t)}).then(function(){return o}))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Bl(this,Se().then(function(){return lo(_a(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Fl(i,t,"reauthenticate"),Ll(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(t){var e=this,n=null;return Bl(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:qi(new ji(t))}).then(function(t){return e.a.tb(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Db=function(t,e){var n=this,r=null;return Bl(this,this.I().then(function(t){return r=t,void 0===e||dt(e)?{}:qi(new ji(e))}).then(function(e){return n.a.Db(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Bl(this,t=lo(Se(t),n.uid).then(function(t){return e=Fl(n,t,"reauthenticate"),Ll(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),z(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),mt(t,this.N.w()),t};var Kl={name:"redirectUser",D:"session"};function Gl(t){return nc(t.b,Kl,t.a)}function Ql(t){this.a=t,this.b=Zu(),this.c=null,this.f=function(t){var e=Xl("local"),n=Xl("session"),r=Xl("none");return function(t,e,n){var r=ec(e,n),i=tc(t,e.D);return t.get(e,n).then(function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Jl,t.a).then(function(t){return t?Xl(t):e})})})}).then(function(e){return t.c=e,$l(t,e.D)}).s(function(){t.c||(t.c=e)})}(this),this.b.addListener(Xl("local"),this.a,w(this.g,this))}function $l(t,e){var n,r=[];for(n in Xu)Xu[n]!==e&&r.push(nc(t.b,Xl(Xu[n]),t.a));return r.push(nc(t.b,Jl,t.a)),function(t){return new _e(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],E(o,a),s);else e(i)})}(r)}Ql.prototype.g=function(){var t=this,e=Xl("local");eh(this,function(){return Se().then(function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null}).then(function(n){if(n)return $l(t,"local").then(function(){t.c=e})})})};var Jl={name:"persistence",D:"session"};function Xl(t){return{name:"authUser",D:t}}function Yl(t,e){return eh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Zl(t){return eh(t,function(){return nc(t.b,t.c,t.a)})}function th(t,e,n){return eh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zl(t||{})})})}function eh(t,e){return t.f=t.f.then(e,e),t.f}function nh(t){if(this.m=!1,Xr(this,"settings",new Qc),Xr(this,"app",t),!lh(this).options||!lh(this).options.apiKey)throw new I("invalid-api-key");t=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION):null,this.a=new $s(lh(this).options&&lh(this).options.apiKey,x(A),t),this.R=[],this.u=[],this.P=[],this.ac=r.a.INTERNAL.createSubscribe(w(this.yc,this)),this.X=void 0,this.bc=r.a.INTERNAL.createSubscribe(w(this.zc,this)),uh(this,null),this.l=new Ql(lh(this).options.apiKey+":"+lh(this).name),this.G=new Wl(lh(this).options.apiKey+":"+lh(this).name),this.$=dh(this,function(t){var e=lh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Kl,t.a).then(function(t){return t&&e&&(t.authDomain=e),zl(t||{})})}(t.G,lh(t).options.authDomain).then(function(e){return(t.o=e)&&(e.ha=t.G),Gl(t.G)});return dh(t,e)}(t).then(function(){return th(t.l,e,t.f)}).then(function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Yl(t.l,e).then(function(){return e})}).s(function(n){return"auth/network-request-failed"==n.code?e:Zl(t.l)})):null}).then(function(e){uh(t,e||null)});return dh(t,n)}(this)),this.i=dh(this,function(t){return t.$.then(function(){return ah(t)}).s(function(){}).then(function(){if(!t.m)return t.pa()}).s(function(){}).then(function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Xl("local"),e.a,t.pa)}})}(this)),this.ba=!1,this.pa=w(this.Yc,this),this.Ba=w(this.da,this),this.ya=w(this.kc,this),this.za=w(this.vc,this),this.Aa=w(this.wc,this),this.b=null,function(t){var e=lh(t).options.authDomain,n=lh(t).options.apiKey;e&&xr()&&(t.gb=t.$.then(function(){if(!t.m){if(t.b=qc(e,n,lh(t).name,t.f),jc(t.b,t),hh(t)&&Il(hh(t)),t.o){Il(t.o);var r=t.o;r.wa(t.ka()),ml(r,t),bl(r=t.o,t.N),_l(r,t),ra((r=t.o).a,t.f),yl(r,t),t.o=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Fc,this),this.A=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function rh(t){Je.call(this,"languageCodeChanged"),this.h=t}function ih(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function oh(t){Je.call(this,"frameworkChanged"),this.f=t}function sh(t){return t.gb||Ae(new I("auth-domain-config-required"))}function ah(t){if(!xr())return Ae(new I("operation-not-supported-in-this-environment"));var e=sh(t).then(function(){return t.b.qa()}).then(function(t){return t?Zr(t):null});return dh(t,e)}function uh(t,e){hh(t)&&(function(t,e){J(t.R,function(t){return t==e})}(hh(t),t.Ba),fn(hh(t),"tokenChanged",t.ya),fn(hh(t),"userDeleted",t.za),fn(hh(t),"userInvalidated",t.Aa),Ol(hh(t))),e&&(e.R.push(t.Ba),cn(e,"tokenChanged",t.ya),cn(e,"userDeleted",t.za),cn(e,"userInvalidated",t.Aa),0<t.A&&El(e)),Xr(t,"currentUser",e),e&&(e.wa(t.ka()),ml(e,t),bl(e,t.N),_l(e,t),ra(e.a,t.f),yl(e,t))}function ch(t,e){var n=null,r=null;return dh(t,e.then(function(e){return n=Uo(e),r=Ji(e),function(t,e){var n={};return n.apiKey=lh(t).options.apiKey,n.authDomain=lh(t).options.authDomain,n.appName=lh(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then(function(){return function(t,e,n,r){var i=new vl(t,e);return n&&(i.ha=n),r&&bl(i,r),i.reload().then(function(){return i})}(n,e,t.G,t.Ga())}).then(function(e){return hh(t)&&e.uid==hh(t).uid?(Pl(hh(t),e),t.da(e)):(uh(t,e),Il(e),t.da(e))}).then(function(){ph(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=nl(e.w(),t,w(t.jc,t))),n||e}).then(function(){return Zr({user:hh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function lh(t){return t.app}function hh(t){return t.currentUser}function fh(t){return hh(t)&&hh(t)._lat||null}function ph(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](fh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](fh(t))}}function dh(t,e){return t.R.push(e),e.na(function(){$(t.R,e)}),e}function gh(){}function vh(){this.a={},this.b=1e12}Ql.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Xu)if(Xu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Nu()&&"none"!==t)throw n;break;default:if(!jr()&&"none"!==t)throw n}}(t),eh(this,function(){return t!=n.c.D?n.b.get(n.c,n.a).then(function(r){return e=r,$l(n,t)}).then(function(){if(n.c=Xl(t),e)return n.b.set(n.c,e,n.a)}):Se()})},C(nh,wn),C(rh,Je),C(ih,Je),C(oh,Je),(t=nh.prototype).wb=function(t){return dh(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,na(this.a,this.aa),this.dispatchEvent(new rh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");zr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,ra(this.a,this.f),this.dispatchEvent(new ih(this.f))}},t.Fc=function(t){this.N.push(t),oa(this.a,r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new oh(this.N))},t.Ga=function(){return Y(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:lh(this).options.apiKey,authDomain:lh(this).options.authDomain,appName:lh(this).name,currentUser:hh(this)&&hh(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?w(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ch(i,ya(i.a,o))})},t.Wc=function(t){if(!xr())return Ae(new I("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),i=Ur(),o=null;(!Dr()||_r())&&lh(this).options.authDomain&&t.isOAuthProvider&&(o=vu(lh(this).options.authDomain,lh(this).options.apiKey,lh(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.S(),this.f));var s=gr(o,n&&n.ua,n&&n.ta);return dh(this,n=sh(this).then(function(n){return Dc(n,s,"signInViaPopup",t,i,!!o,e.S())}).then(function(){return new _e(function(t,n){e.ma("signInViaPopup",null,new I("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=i,e.c=Fc(e.b,e,"signInViaPopup",s,i)})}).then(function(t){return s&&dr(s),t?Zr(t):null}).s(function(t){throw s&&dr(s),t}))},t.Xc=function(t){if(!xr())return Ae(new I("operation-not-supported-in-this-environment"));var e=this;return dh(this,sh(this).then(function(){return function(t){return eh(t,function(){return t.b.set(Jl,t.c.D,t.a)})}(e.l)}).then(function(){return Mc(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var t=this;return ah(this).then(function(e){return t.b&&zc(t.b.b),e}).s(function(e){throw t.b&&zc(t.b.b),e})},t.cd=function(t){if(!t)return Ae(new I("null-user"));if(this.W!=t.tenantId)return Ae(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=lh(this).options.apiKey,n.authDomain=lh(this).options.authDomain,n.appName=lh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Xs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new vl(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&bl(e,r),Pl(e,t),e}(t,n,e.G,e.Ga());return dh(this,this.i.then(function(){if(lh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return hh(e)&&t.uid==hh(e).uid?(Pl(hh(e),t),e.da(t)):(uh(e,r),Il(r),e.da(r))}).then(function(){ph(e)}))},t.zb=function(){var t=this;return dh(this,this.i.then(function(){return t.b&&zc(t.b.b),hh(t)?(uh(t,null),Zl(t.l).then(function(){ph(t)})):Se()}))},t.Yc=function(){var t=this;return th(this.l,lh(this).options.authDomain).then(function(e){if(!t.m){var n;if(n=hh(t)&&e){n=hh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Pl(hh(t),e),hh(t).I();(hh(t)||e)&&(uh(t,e),e&&(Il(e),e.ha=t.G),t.b&&jc(t.b,t),ph(t))}})},t.da=function(t){return Yl(this.l,t)},t.kc=function(){ph(this),this.da(hh(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return ch(e,Se(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(hh(e))})},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),dh(t,t.i.then(function(){!t.m&&Q(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(fh(t)))}))}(this,function(){t.next(hh(e))})},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(hh(r)):"function"==typeof t.next&&t.next(hh(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this;return dh(this,this.i.then(function(){return hh(e)?hh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Sc=function(t){var e=this;return this.i.then(function(){return ch(e,eu(e.a,$a,{token:t}))}).then(function(t){var n=t.user;return Rl(n,"isAnonymous",!1),e.da(n),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return ch(n,eu(n.a,Ja,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return ch(n,eu(n.a,Ca,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return ch(e,t.ja(e.a))})},t.Rc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then(function(){var e=hh(t);if(e&&e.isAnonymous){var n=Zr({providerId:null,isNewUser:!1});return Zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ch(t,t.a.yb()).then(function(e){var n=e.user;return Rl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return hh(this)&&hh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&hh(this)&&El(hh(this))},t.Oc=function(t){var e=this;z(this.u,function(n){n==t&&e.A--}),0>this.A&&(this.A=0),0==this.A&&hh(this)&&Ol(hh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),dh(this,this.i.then(function(){e.m||Q(e.u,t)&&t(fh(e))}))},t.removeAuthTokenListener=function(t){J(this.u,function(e){return e==t})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Xl("local"),t.a,this.pa),this.b&&(xc(this.b,this),zc(this.b.b)),Promise.resolve()},t.gc=function(t){return dh(this,function(t,e){return eu(t,Ta,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Ac=function(t){return!!Ro(t)},t.vb=function(t,e){var n=this;return dh(this,Se().then(function(){var t=new ji(e);if(!t.c)throw new I("argument-error",Pi+" must be true when sending sign in link to email");return qi(t)}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return dh(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return dh(this,this.a.Qa(t).then(function(t){return new ui(t)}))},t.ib=function(t){return dh(this,this.a.ib(t).then(function(){}))},t.ub=function(t,e){var n=this;return dh(this,Se().then(function(){return void 0===e||dt(e)?{}:qi(new ji(e))}).then(function(e){return n.a.ub(t,e)}).then(function(){}))},t.Vc=function(t,e){return dh(this,Jc(this,t,e,w(this.Za,this)))},t.Uc=function(t,e){var n=this;return dh(this,Se().then(function(){var r=e||lr(),i=xo(t,r);if(!(r=Ro(r)))throw new I("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new I("tenant-id-mismatch");return n.Za(i)}))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var mh=null;function yh(t,e){return(e=bh(e))&&t.a[e]||null}function bh(t){return(t=void 0===t?1e12:t)?t.toString():null}function _h(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():cn(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Eh(){}function Oh(){}vh.prototype.render=function(t,e){return this.a[this.b.toString()]=new _h(t,e),this.b++},vh.prototype.reset=function(t){var e=yh(this,t);t=bh(t),e&&t&&(e.delete(),delete this.a[t])},vh.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},vh.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},_h.prototype.getResponse=function(){return wh(this),this.b},_h.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},_h.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Xr(Eh,"FACTOR_ID","phone"),Oh.prototype.g=function(){return mh||(mh=new vh),Se(mh)},Oh.prototype.c=function(){};var Ch=null;function Th(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ih=new bt(Ot,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Sh=new Hr(3e4,6e4);Th.prototype.g=function(t){var e=this;return new _e(function(n,r){var i=setTimeout(function(){r(new I("network-request-failed"))},Sh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new I("internal-error"));delete a[e.a]},Se(Hs(St(Ih,{onload:e.a,hl:t||""}))).s(function(){clearTimeout(i),r(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Th.prototype.c=function(){this.b--};var Ah=null;function kh(t,e,n,r,i,o,s){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(Ch||(Ch=new Oh),s=Ch):(Ah||(Ah=new Th),s=Ah),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[xh])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Rh],!a.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Nh];this.a[Nh]=function(t){if(Ph(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Nr(c,a);"function"==typeof e&&e(t)}};var l=this.a[jh];this.a[jh]=function(){if(Ph(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Nr(l,a);"function"==typeof t&&t()}}}var Nh="callback",jh="expired-callback",xh="sitekey",Rh="size";function Ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Dh(t,e){return t.h.push(e),e.na(function(){$(t.h,e)}),e}function Lh(t){if(t.A)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Mh(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(a){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.a.SDK_VERSION?Ar(r.a.SDK_VERSION,s):null,kh.call(this,n,t,e,function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t},s,x(A),i)}function Fh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Uh.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Uh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=kh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Dh(this,Se().then(function(){if(Rr()&&!wr())return yr();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.v.g(t.u())}).then(function(e){return t.g=e,eu(t.o,Fa,{})}).then(function(e){t.a[xh]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},t.render=function(){Lh(this);var t=this;return Dh(this,this.Ia().then(function(){if(null===t.c){var e=t.m;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',zt(s.name),'"'),s.type){o.push(' type="',zt(s.type),'"');var a={};mt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Lh(this);var t=this;return Dh(this,this.render().then(function(e){return new _e(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){J(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){Lh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Lh(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},C(Mh,kh);var Uh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function qh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Hh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:g}}function Bh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function zh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Wh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ja||t&&e.providerId!==t)}}}function Kh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Gh(t){return g(t)&&"string"==typeof t.uid}function Qh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function $h(t,e){for(var n in e){var r=e[n].name;t[r]=Yh(r,t[n],e[n].j)}}function Jh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E(function(t){return this[t]},n),set:E(function(t,e,n,r){Fh(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Xh(t,e,n,r){t[e]=Yh(e,n,r)}function Yh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Fh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}$h(nh.prototype,{ib:{name:"applyActionCode",j:[Vh("code")]},Qa:{name:"checkActionCode",j:[Vh("code")]},mb:{name:"confirmPasswordReset",j:[Vh("code"),Vh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Vh("email"),Vh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Vh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Vh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Qh(Hh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Qh(Hh(),Bh(),"nextOrObserver"),Bh("opt_error",!0),Bh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Vh("email"),Qh(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Vh("email"),Hh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Vh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Wh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Wh()]},Sc:{name:"signInWithCustomToken",j:[Vh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Vh("email"),Vh("password")]},Uc:{name:"signInWithEmailLink",j:[Vh("email"),Vh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Qh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof vl)}},zh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Vh("url")]},hd:{name:"verifyPasswordResetCode",j:[Vh("code")]}}),Jh(nh.prototype,{lc:{name:"languageCode",jb:Qh(Vh(),zh(),"languageCode")},ti:{name:"tenantId",jb:Qh(Vh(),zh(),"tenantId")}}),(nh.Persistence=Xu).LOCAL="local",nh.Persistence.SESSION="session",nh.Persistence.NONE="none",$h(vl.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[qh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[qh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Wh()]},pb:{name:"linkWithCredential",j:[Wh()]},Cc:{name:"linkWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wh()]},sb:{name:"reauthenticateWithCredential",j:[Wh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Vh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Qh(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vh(null,!0)]},bd:{name:"unlink",j:[Vh("provider")]},Ab:{name:"updateEmail",j:[Vh("email")]},Bb:{name:"updatePassword",j:[Vh("password")]},dd:{name:"updatePhoneNumber",j:[Wh("phone")]},Cb:{name:"updateProfile",j:[Hh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Vh("email"),Qh(Hh("opt_actionCodeSettings",!0),zh(null,!0),"opt_actionCodeSettings",!0)]}}),$h(vh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),$h(_e.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Jh(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:qh("appVerificationDisabledForTesting")}}),$h($c.prototype,{confirm:{name:"confirm",j:[Vh("verificationCode")]}}),Xh(co,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[mo,No,Do,po],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Qh(Vh(),Hh(),"json")]),Xh(jo,"credential",function(t,e){return new ko(t,e)},[Vh("email"),Vh("password")]),$h(ko.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),$h(wo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Xh(wo,"credential",Eo,[Qh(Vh(),Hh(),"token")]),Xh(jo,"credentialWithLink",xo,[Vh("email"),Vh("emailLink")]),$h(Oo.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Xh(Oo,"credential",Co,[Qh(Vh(),Hh(),"token")]),$h(To.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Xh(To,"credential",Io,[Qh(Vh(),Qh(Hh(),zh()),"idToken"),Qh(Vh(),zh(),"accessToken",!0)]),$h(So.prototype,{Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Xh(So,"credential",Ao,[Qh(Vh(),Hh(),"token"),Vh("secret",!0)]),$h(_o.prototype,{Ca:{name:"addScope",j:[Vh("scope")]},credential:{name:"credential",j:[Qh(Vh(),Qh(Hh(),zh()),"optionsOrIdToken"),Qh(Vh(),zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),$h(go.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),$h(ho.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),Xh(Mo,"credential",Fo,[Vh("verificationId"),Vh("verificationCode")]),$h(Mo.prototype,{eb:{name:"verifyPhoneNumber",j:[Qh(Vh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Kh(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Kh(t.session,uo)&&Gh(t.multiFactorHint):t.session&&t.multiFactorUid?Kh(t.session,uo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),$h(Po.prototype,{w:{name:"toJSON",j:[Vh(null,!0)]}}),$h(I.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),$h(Go.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),$h(Ko.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),$h(el.prototype,{toJSON:{name:"toJSON",j:[Vh(null,!0)]}}),$h(Yc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),$h(al.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Vh("displayName",!0)]},ad:{name:"unenroll",j:[Qh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Gh},Vh(),"multiFactorInfoIdentifier")]}}),$h(Mh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xh(Ei,"parseLink",Ni,[Vh("link")]),Xh(Eh,"assertion",function(t){return new ol(t)},[Wh("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:nh,AuthCredential:co,Error:I};Xh(t,"EmailAuthProvider",jo,[]),Xh(t,"FacebookAuthProvider",wo,[]),Xh(t,"GithubAuthProvider",Oo,[]),Xh(t,"GoogleAuthProvider",To,[]),Xh(t,"TwitterAuthProvider",So,[]),Xh(t,"OAuthProvider",_o,[Vh("providerId")]),Xh(t,"SAMLAuthProvider",bo,[Vh("providerId")]),Xh(t,"PhoneAuthProvider",Mo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof nh)}}]),Xh(t,"RecaptchaVerifier",Mh,[Qh(Vh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.a.app.App)}}]),Xh(t,"ActionCodeURL",Ei,[]),Xh(t,"PhoneMultiFactorGenerator",Eh,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new nh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.mc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.15.2"),r.a.INTERNAL.extendNamespace({User:vl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var i=n("os0x"),o=n("q/0M"),s=n("qOnz"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function p(){}function d(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function E(){return Date.now()}function O(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(){this.j=this.j,this.i=this.i}C.prototype.j=!1,C.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++m)}(this)},C.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var T=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function k(t){return/^[\s\xa0]*$/.test(t)}var N,j=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function x(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var P=f.navigator;if(P){var D=P.userAgent;if(D){N=D;break t}}N=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function V(t){return V[" "](t),t}V[" "]=p;var q,H,B=x(N,"Opera"),z=x(N,"Trident")||x(N,"MSIE"),W=x(N,"Edge"),K=W||z,G=x(N,"Gecko")&&!(x(N.toLowerCase(),"webkit")&&!x(N,"Edge"))&&!(x(N,"Trident")||x(N,"MSIE"))&&!x(N,"Edge"),Q=x(N.toLowerCase(),"webkit")&&!x(N,"Edge");function $(){var t=f.document;return t?t.documentMode:void 0}t:{var J="",X=(H=N,G?/rv:([^\);]+)(\)|;)/.exec(H):W?/Edge\/([\d\.]+)/.exec(H):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(H):Q?/WebKit\/(\S+)/.exec(H):B?/(?:Version)[ \/]?(\S+)/.exec(H):void 0);if(X&&(J=X?X[1]:""),z){var Y=$();if(null!=Y&&Y>parseFloat(J)){q=String(Y);break t}}q=J}var Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=j(String(q)).split("."),r=j(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=R(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||R(0==s[2].length,0==a[2].length)||R(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var et=f.document&&z&&($()||parseInt(q,10))||void 0,nt=!z||9<=Number(et),rt=z&&!tt("9"),it=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",p,e),f.removeEventListener("test",p,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(G){t:{try{V(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.defaultPrevented=!0},O(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ct,this.Y=this.Z=!1}function ht(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=T(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var gt="closure_lm_"+(1e6*Math.random()|0),vt={};function mt(t,e,n,r,i){if(r&&r.once)return bt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=St(n),t&&t[ut]?t.va(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=Tt(t);if(a||(t[gt]=a=new ft(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ct,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Et(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);return null}return n=St(n),t&&t[ut]?t.wa(e,n,g(r)?!!r.capture:!!r,i):yt(t,e,n,!0,r,i)}function _t(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=St(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=dt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Tt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Et(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tt(e))?(pt(n,t),0==n.b&&(n.src=null,e[gt]=null)):ht(t)}}}function Et(t){return t in vt?vt[t]:vt[t]="on"+t}function Ot(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&wt(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(!nt){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ot(t,e=new st(e,this))}return Ot(t,new st(e,this))}function Tt(t){return(t=t[gt])instanceof ft?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(t){return"function"==typeof t?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function At(){C.call(this),this.c=new ft(this),this.J=this,this.C=null}function kt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new ot(e,t);else if(e instanceof ot)e.target=e.target||t;else{var i=e;U(e=new ot(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Nt(s,r,!0,e)&&i}if(i=Nt(s=e.a=t,r,!0,e)&&i,i=Nt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nt(s=e.a=n[o],r,!1,e)&&i}function Nt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}O(At,C),At.prototype[ut]=!0,(c=At.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){_t(this,t,e,n,r)},c.G=function(){if(At.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var jt=f.JSON.stringify;function xt(){this.b=this.a=null}var Rt,Pt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Lt},function(t){t.reset()});function Dt(){var t=Vt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Mt(t){f.setTimeout(function(){throw t},0)}function Ft(t,e){Rt||function(){var t=f.Promise.resolve(void 0);Rt=function(){t.then(qt)}}(),Ut||(Rt(),Ut=!0),Vt.add(t,e)}xt.prototype.add=function(t,e){var n=Pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Ut=!1,Vt=new xt;function qt(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(n){Mt(n)}var e=Pt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Ut=!1}function Ht(t,e){At.call(this),this.b=t||1,this.a=e||f,this.f=_(this.Za,this),this.g=E()}function Bt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function zt(t,e,n){if("function"==typeof t)n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Wt(t){t.a=zt(function(){t.a=null,t.c&&(t.c=!1,Wt(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}O(Ht,At),(c=Ht.prototype).aa=!1,c.M=null,c.Za=function(){if(this.aa){var t=E()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),kt(this,"tick"),this.aa&&(Bt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=E())},c.G=function(){Ht.X.G.call(this),Bt(this),delete this.a};var Kt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Wt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(C);function Gt(t){C.call(this),this.b=t,this.a={}}O(Gt,C);var Qt=[];function $t(t,e,n,r){Array.isArray(n)||(n&&(Qt[0]=n.toString()),n=Qt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Jt(t){L(t.a,function(t,e){this.a.hasOwnProperty(e)&&wt(t)},t),t.a={}}function Xt(){this.a=!0}function Yt(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return jt(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Gt.prototype.G=function(){Gt.X.G.call(this),Jt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.info=function(){};var Zt={},te=null;function ee(){return te=te||new At}function ne(t){ot.call(this,Zt.Fa,t)}function re(t){var e=ee();kt(e,new ne(e,t))}function ie(t,e){ot.call(this,Zt.STAT_EVENT,t),this.stat=e}function oe(t){var e=ee();kt(e,new ie(e,t))}function se(t){ot.call(this,Zt.Ga,t)}function ae(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){t()},e)}Zt.Fa="serverreachability",O(ne,ot),Zt.STAT_EVENT="statevent",O(ie,ot),Zt.Ga="timingevent",O(se,ot);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ce={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function le(){}function he(){}le.prototype.a=null;var fe,pe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function de(){ot.call(this,"d")}function ge(){ot.call(this,"c")}function ve(){}function me(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Gt(this),this.P=ye,this.R=new Ht(t=K?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}O(de,ot),O(ge,ot),O(ve,le),fe=new ve;var ye=45e3,be={},_e={};function we(t,e,n){t.H=1,t.i=Be(Me(e)),t.j=n,t.I=!0,Ee(t,null)}function Ee(t,e){t.u=E(),Te(t),t.l=Me(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),nn(n.b,"t",r),t.D=0,t.a=Xn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Kt(_(t.Ca,t,t.a),t.O)),$t(t.J,t.a,"readystatechange",t.Xa),e=t.B?M(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),re(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Oe(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ce(t,n);if(i==_e){4==e&&(t.h=4,oe(14),r=!1),Yt(t.c,t.f,null,"[Incomplete Response]");break}if(i==be){t.h=4,oe(15),Yt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Yt(t.c,t.f,i,null),Ne(t,i)}4==e&&0==n.length&&(t.h=1,oe(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bn(e),e.F=!0,oe(11))):(Yt(t.c,t.f,n,"[Invalid Chunked Response]"),ke(t),Ae(t))}function Ce(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?be:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.D=r+n,e))}function Te(t){t.T=E()+t.P,Ie(t,t.P)}function Ie(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ae(_(t.Va,t),e)}function Se(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Ae(t){0==t.g.v||t.A||Kn(t.g,t)}function ke(t){Se(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Bt(t.R),Jt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ne(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ln(n.b,t)))if(n.I=t.N,!t.C&&ln(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Wn(n),Pn(n)}Hn(n),oe(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ae(_(n.Sa,n),6e3));if(1>=cn(n.b)&&n.ea){try{n.ea()}catch(v){}n.ea=void 0}}else Qn(n,11)}else if((t.C||n.a==t)&&Wn(n),!k(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(x(l,"spdy")||x(l,"quic")||x(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(hn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,He(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=E()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Jn(u,u.C?u.ga:null,u.fa),p.C){fn(u.b,p);var d=p,g=u.D;g&&d.setTimeout(g),d.o&&(Se(d),Te(d)),u.a=p}else qn(u);0<n.g.length&&Mn(n)}else"stop"!=i[0]&&"close"!=i[0]||Qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Qn(n,7):Rn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);re(4)}catch(v){}}function je(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)I(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(d(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Re(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=me.prototype).setTimeout=function(t){this.P=t},c.Xa=function(t){t=t.target;var e=this.F;e&&3==kn(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=kn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!K&&!this.a.$())){this.A||4!=e||7==n||re(8==n||0>=r?3:2),Se(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,oe(12),ke(this),Ae(this);break t}Yt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ne(this,u)}this.I?(Oe(this,e,o),K&&this.b&&3==e&&($t(this.J,this.R,"tick",this.Wa),this.R.start())):(Yt(this.c,this.f,o,null),Ne(this,o)),4==e&&ke(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Te(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,oe(12)):(this.h=0,oe(13)),ke(this),Ae(this)}}}catch(c){}},c.Wa=function(){if(this.a){var t=kn(this.a),e=this.a.$();this.D<e.length&&(Se(this),Oe(this,t,e),this.b&&4!=t&&Te(this))}},c.cancel=function(){this.A=!0,ke(this)},c.Va=function(){this.o=null;var t=E();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(re(3),oe(17)),ke(this),this.h=2,Ae(this)):Ie(this,this.T-t)},(c=xe.prototype).K=function(){Re(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Re(this),this.a.concat()},c.get=function(t,e){return Pe(this.b,t)?this.b[t]:e},c.set=function(t,e){Pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Le(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Le){this.a=void 0!==e?e:t.a,Fe(this,t.f),this.j=t.j,Ue(this,t.c),Ve(this,t.h),this.g=t.g,e=t.b;var n=new Ye;n.c=e.c,e.a&&(n.a=new xe(e.a),n.b=e.b),qe(this,n),this.i=t.i}else t&&(n=String(t).match(De))?(this.a=!!e,Fe(this,n[1]||"",!0),this.j=ze(n[2]||""),Ue(this,n[3]||"",!0),Ve(this,n[4]),this.g=ze(n[5]||"",!0),qe(this,n[6]||"",!0),this.i=ze(n[7]||"")):(this.a=!!e,this.b=new Ye(null,this.a))}function Me(t){return new Le(t)}function Fe(t,e,n){t.f=n?ze(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ue(t,e,n){t.c=n?ze(e,!0):e}function Ve(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function qe(t,e,n){e instanceof Ye?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(tn(this,e),nn(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=We(e,Je)),t.b=new Ye(e,t.a))}function He(t,e,n){t.b.set(e,n)}function Be(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^E()).toString(36)),t}function ze(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Le.prototype.toString=function(){var t=[],e=this.f;e&&t.push(We(e,Ge,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(We(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?$e:Qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",We(n,Xe)),t.join("")};var Ge=/[#\/\?@]/g,Qe=/[#\?:]/g,$e=/[#\?]/g,Je=/[#\?@]/g,Xe=/#/g;function Ye(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function tn(t,e){Ze(t),e=rn(t,e),Pe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Re(t)))}function en(t,e){return Ze(t),e=rn(t,e),Pe(t.a.b,e)}function nn(t,e,n){tn(t,e),0<n.length&&(t.c=null,t.a.set(rn(t,e),A(n)),t.b+=n.length)}function rn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(c=Ye.prototype).add=function(t,e){Ze(this),this.c=null,t=rn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){Ze(this),this.a.forEach(function(n,r){I(n,function(n){t.call(e,n,r,this)},this)},this)},c.L=function(){Ze(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.K=function(t){Ze(this);var e=[];if("string"==typeof t)en(this,t)&&(e=S(e,this.a.get(rn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},c.set=function(t,e){return Ze(this),this.c=null,en(this,t=rn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var on=function(){return function(t,e){this.b=t,this.a=e}}();function sn(t){this.g=t||an,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var an=10;function un(t){return!!t.b||!!t.a&&t.a.size>=t.f}function cn(t){return t.b?1:t.a?t.a.size:0}function ln(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function hn(t,e){t.a?t.a.add(e):t.b=e}function fn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return A(t.c)}function dn(){}function gn(){this.a=new dn}function vn(t,e,n){var r=n||"";try{je(t,function(t,n){var i=t;g(t)&&(i=jt(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}sn.prototype.cancel=function(){var t,e;if(this.c=pn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},dn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},dn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var yn=f.JSON.parse;function bn(t){At.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}O(bn,At);var _n="",wn=/^https?$/i,En=["POST","PUT"];function On(t){return"content-type"==t.toLowerCase()}function Cn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Tn(t),Sn(t)}function Tn(t){t.u||(t.u=!0,kt(t,"complete"),kt(t,"error"))}function In(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=kn(t)||2!=t.W()))if(t.l&&4==kn(t))zt(t.za,0,t);else if(kt(t,"readystatechange"),4==kn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(De)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!wn.test(o?o.toLowerCase():"")}e=i}if(e)kt(t,"complete"),kt(t,"success");else{t.h=6;try{var a=2<kn(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Tn(t)}}finally{Sn(t)}}}function Sn(t,e){if(t.a){An(t);var n=t.a,r=t.s[0]?p:null;t.a=null,t.s=null,e||kt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function An(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function kn(t){return t.a?t.a.readyState:0}function Nn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):He(t,e,n))}function jn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xn(t){this.pa=0,this.g=[],this.c=new Xt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=jn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=jn("baseRetryDelayMs",5e3,t),this.Ra=jn("retryDelaySeedMs",1e4,t),this.Ma=jn("forwardChannelMaxRetries",2,t),this.ma=jn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new gn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Rn(t){if(Dn(t),3==t.v){var e=t.R++,n=Me(t.B);He(n,"SID",t.J),He(n,"RID",e),He(n,"TYPE","terminate"),Un(t,n),(e=new me(t,t.c,e,void 0)).H=2,e.i=Be(Me(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xn(e.g,null),e.a.ba(e.i)),e.u=E(),Te(e)}$n(t)}function Pn(t){t.a&&(Bn(t),t.a.cancel(),t.a=null)}function Dn(t){Pn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Wn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Ln(t,e){t.g.push(new on(t.Oa++,e)),3==t.v&&Mn(t)}function Mn(t){un(t.b)||t.h||(t.h=!0,Ft(t.Ba,t),t.u=0)}function Fn(t,e){var n;n=e?e.f:t.R++;var r=Me(t.B);He(r,"SID",t.J),He(r,"RID",n),He(r,"AID",t.P),Un(t,r),t.i&&t.l&&Nn(r,t.i,t.l),n=new me(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Vn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),hn(t.b,n),we(n,r,e)}function Un(t,e){t.f&&je({},function(t,n){He(e,n,t)})}function Vn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?_(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{vn(l,s,"req"+c+"_")}catch(Nr){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function qn(t){t.a||t.j||(t.T=1,Ft(t.Aa,t),t.o=0)}function Hn(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ae(_(t.Aa,t),Gn(t,t.o)),t.o++,0))}function Bn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function zn(t){t.a=new me(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Me(t.la);He(e,"RID","rpc"),He(e,"SID",t.J),He(e,"CI",t.H?"0":"1"),He(e,"AID",t.P),Un(t,e),He(e,"TYPE","xmlhttp"),t.i&&t.l&&Nn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Be(Me(e)),n.j=null,n.I=!0,Ee(n,t)}function Wn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Wn(t),Bn(t),t.a=null;var r=2}else{if(!ln(t.b,e))return;n=e.s,fn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=E()-e.u;var i=t.u;kt(r=ee(),new se(r,n,e,i)),Mn(t)}else qn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(cn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ae(_(t.Ba,t,e),Gn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Hn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function Gn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=_(t.Ya,t);n||(n=new Le("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Fe(n,"https"),Be(n)),function(t,e){var n=new Xt;if(f.Image){var r=new Image;r.onload=w(mn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=w(mn,n,r,"TestLoadImage: error",!1,e),r.onabort=w(mn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=w(mn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else oe(2);t.v=0,t.f&&t.f.ra(e),$n(t),Dn(t)}function $n(t){t.v=0,t.I=-1,t.f&&(0==pn(t.b).length&&0==t.g.length||(t.b.c.length=0,A(t.g),t.g.length=0),t.f.qa())}function Jn(t,e,n){var r=function(t){return t instanceof Le?Me(t):new Le(t,void 0)}(n);if(""!=r.c)e&&Ue(r,e+"."+r.c),Ve(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Le(null,void 0);return t&&Fe(i,t),e&&Ue(i,e),n&&Ve(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,function(t,e){He(r,e,t)}),n=t.na,(e=t.A)&&n&&He(r,e,n),He(r,"VER",t.ha),Un(t,r),r}function Xn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t.Na)).F=t.C,e}function Yn(){}function Zn(){if(z&&!(10<=Number(et)))throw Error("Environmental error: no available transport.")}function tr(t,e){At.call(this),this.a=new xn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!k(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){de.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ge.call(this),this.status=1}function rr(t){this.a=t}(c=bn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:fe),this.a.onreadystatechange=_(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Cn(this,o)}t=n||"";var i=new xe(this.headers);r&&je(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=On,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=T(En,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{An(this),0<this.o&&((this.D=function(t){return z&&tt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=_(this.xa,this)):this.m=zt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Cn(this,o)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,kt(this,"timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,kt(this,"complete"),kt(this,"abort"),Sn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Sn(this,!0)),bn.X.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?In(this):this.Ua())},c.Ua=function(){In(this)},c.W=function(){try{return 2<kn(this)?this.a.status:-1}catch(H){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(H){return""}},c.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),yn(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=xn.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new me(this,this.c,t,void 0),r=this.l;if(this.O&&(r?U(r=M(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Vn(this,n,e),He(i=Me(this.B),"RID",t),He(i,"CVER",22),this.A&&He(i,"X-HTTP-Session-Id",this.A),Un(this,i),this.i&&r&&Nn(i,this.i,r),hn(this.b,n),this.Ia&&He(i,"TYPE","init"),this.da?(He(i,"$req",e),He(i,"SID","null"),n.U=!0,we(n,i,null)):we(n,i,e),this.v=2}}else 3==this.v&&(t?Fn(this,t):0==this.g.length||un(this.b)||Fn(this))},c.Aa=function(){if(this.j=null,zn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ae(_(this.Ta,this),t)}},c.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,oe(10),Pn(this),zn(this))},c.Sa=function(){null!=this.m&&(this.m=null,Pn(this),Hn(this),oe(19))},c.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),oe(2)):(this.c.info("Failed to ping google.com"),oe(1))},(c=Yn.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ja=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},O(tr,At),tr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;oe(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Jn(t,null,t.fa),Mn(t)},tr.prototype.close=function(){Rn(this.a)},tr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ln(this.a,e)}else this.l?((e={}).__data__=jt(t),Ln(this.a,e)):Ln(this.a,t)},tr.prototype.G=function(){this.a.f=null,delete this.f,Rn(this.a),delete this.a,tr.X.G.call(this)},O(er,de),O(nr,ge),O(rr,Yn),rr.prototype.ta=function(){kt(this.a,"a")},rr.prototype.sa=function(t){kt(this.a,new er(t))},rr.prototype.ra=function(t){kt(this.a,new nr(t))},rr.prototype.qa=function(){kt(this.a,"b")},Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.h,tr.prototype.open=tr.prototype.g,tr.prototype.close=tr.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ce.COMPLETE="complete",he.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",At.prototype.listen=At.prototype.va,bn.prototype.listenOnce=bn.prototype.wa,bn.prototype.getLastError=bn.prototype.Qa,bn.prototype.getLastErrorCode=bn.prototype.ua,bn.prototype.getStatus=bn.prototype.W,bn.prototype.getResponseJson=bn.prototype.Pa,bn.prototype.getResponseText=bn.prototype.$,bn.prototype.send=bn.prototype.ba;var ir=ue,or=ce,sr=Zt,ar=he,ur=bn,cr=n("/6Yf"),lr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},hr=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),fr=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();fr.UNAUTHENTICATED=new fr(null),fr.l=new fr("google-credentials-uid"),fr._=new fr("first-party-uid");var pr=new o.b("@firebase/firestore");function dr(){return pr.logLevel}function gr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=o.a.DEBUG){var r=e.map(yr);pr.debug.apply(pr,Object(i.g)(["Firestore (8.1.1): "+t],r))}}function vr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=o.a.ERROR){var r=e.map(yr);pr.error.apply(pr,Object(i.g)(["Firestore (8.1.1): "+t],r))}}function mr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(pr.logLevel<=o.a.WARN){var r=e.map(yr);pr.warn.apply(pr,Object(i.g)(["Firestore (8.1.1): "+t],r))}}function yr(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function br(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw vr(e),new Error(e)}function _r(t,e){t||br()}function wr(t,e){return t}var Er={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Or=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(i.c)(e,t),e}(Error),Cr=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},Tr=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(fr.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),Ir=function(){function t(t){var e=this;this.P=null,this.currentUser=fr.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.V!==e?(gr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(_r("string"==typeof n.accessToken),new Cr(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return _r(null===t||"string"==typeof t),new fr(t)},t}(),Sr=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=fr._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Ar=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new Sr(this.v,this.S))},t.prototype.A=function(t){t(fr._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function kr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Nr=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=kr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jr(t,e){return t<e?-1:t>e?1:0}function xr(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Rr(t){return t+"\0"}var Pr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Or(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Or(Er.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Or(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Or(Er.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?jr(this.nanoseconds,t.nanoseconds):jr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Dr=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new Pr(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),Lr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&br(),void 0===n?n=t.length-e:n>t.length-e&&br(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Mr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Or(Er.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.X=function(){return new e([])},e}(Lr),Fr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return Fr.test(t)},e.prototype.J=function(){return this.H().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.Z(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Or(Er.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Or(Er.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Or(Er.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Or(Er.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(Lr),Vr=function(){function t(t){this.path=t}return t.st=function(e){return new t(Mr.Y(e))},t.it=function(e){return new t(Mr.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Mr.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return Mr.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new Mr(e.slice()))},t}();function qr(t){return null==t}function Hr(t){return 0===t&&1/t==-1/0}function Br(t){return"number"==typeof t&&Number.isInteger(t)&&!Hr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zr=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function Wr(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new zr(t,e,n,r,i,o,s)}function Kr(t){var e=wr(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.J()+t.op.toString()+qi(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.J()+t.dir}(t)}).join(","),qr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=zs(e.startAt)),e.endAt&&(n+="|ub:",n+=zs(e.endAt)),e.ut=n}return e.ut}function Gr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$s(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Mi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ks(t.startAt,e.startAt)&&Ks(t.endAt,e.endAt)}function Qr(t){return Vr.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var $r=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return jr(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();$r.lt=new $r("");var Jr,Xr,Yr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Dr.min()),void 0===o&&(o=Dr.min()),void 0===s&&(s=$r.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),Zr=function(t){this.count=t};function ti(t){switch(t){case Er.OK:return br();case Er.CANCELLED:case Er.UNKNOWN:case Er.DEADLINE_EXCEEDED:case Er.RESOURCE_EXHAUSTED:case Er.INTERNAL:case Er.UNAVAILABLE:case Er.UNAUTHENTICATED:return!1;case Er.INVALID_ARGUMENT:case Er.NOT_FOUND:case Er.ALREADY_EXISTS:case Er.PERMISSION_DENIED:case Er.FAILED_PRECONDITION:case Er.ABORTED:case Er.OUT_OF_RANGE:case Er.UNIMPLEMENTED:case Er.DATA_LOSS:return!0;default:return br()}}function ei(t){if(void 0===t)return vr("GRPC error has no .code"),Er.UNKNOWN;switch(t){case Jr.OK:return Er.OK;case Jr.CANCELLED:return Er.CANCELLED;case Jr.UNKNOWN:return Er.UNKNOWN;case Jr.DEADLINE_EXCEEDED:return Er.DEADLINE_EXCEEDED;case Jr.RESOURCE_EXHAUSTED:return Er.RESOURCE_EXHAUSTED;case Jr.INTERNAL:return Er.INTERNAL;case Jr.UNAVAILABLE:return Er.UNAVAILABLE;case Jr.UNAUTHENTICATED:return Er.UNAUTHENTICATED;case Jr.INVALID_ARGUMENT:return Er.INVALID_ARGUMENT;case Jr.NOT_FOUND:return Er.NOT_FOUND;case Jr.ALREADY_EXISTS:return Er.ALREADY_EXISTS;case Jr.PERMISSION_DENIED:return Er.PERMISSION_DENIED;case Jr.FAILED_PRECONDITION:return Er.FAILED_PRECONDITION;case Jr.ABORTED:return Er.ABORTED;case Jr.OUT_OF_RANGE:return Er.OUT_OF_RANGE;case Jr.UNIMPLEMENTED:return Er.UNIMPLEMENTED;case Jr.DATA_LOSS:return Er.DATA_LOSS;default:return br()}}(Xr=Jr||(Jr={}))[Xr.OK=0]="OK",Xr[Xr.CANCELLED=1]="CANCELLED",Xr[Xr.UNKNOWN=2]="UNKNOWN",Xr[Xr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xr[Xr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xr[Xr.NOT_FOUND=5]="NOT_FOUND",Xr[Xr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xr[Xr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xr[Xr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xr[Xr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xr[Xr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xr[Xr.ABORTED=10]="ABORTED",Xr[Xr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xr[Xr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xr[Xr.INTERNAL=13]="INTERNAL",Xr[Xr.UNAVAILABLE=14]="UNAVAILABLE",Xr[Xr.DATA_LOSS=15]="DATA_LOSS";var ni=function(){function t(t,e){this.$=t,this.root=e||ii.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,ii.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,ii.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Pt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new ri(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new ri(this.root,t,this.$,!1)},t.prototype.vt=function(){return new ri(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new ri(this.root,t,this.$,!0)},t}(),ri=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),ii=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw br();if(this.right.Mt())throw br();var t=this.left.Qt();if(t!==this.right.Qt())throw br();return t+(this.Mt()?0:1)},t}();ii.EMPTY=null,ii.RED=!0,ii.It=!1,ii.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw br()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw br()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw br()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw br()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw br()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new ii(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var oi=function(){function t(t){this.$=t,this.data=new ni(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt(function(e,n){return t(e),!1})},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new si(this.data.yt())},t.prototype.Vt=function(t){return new si(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),si=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),ai=new ni(Vr.$);function ui(){return ai}function ci(){return ui()}var li=new ni(Vr.$);function hi(){return li}var fi=new ni(Vr.$),pi=new oi(Vr.$);function di(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=pi,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var gi=new oi(jr);function vi(){return gi}var mi=function(){function t(t){this.$=t?function(e,n){return t(e,n)||Vr.$(e.key,n.key)}:function(t,e){return Vr.$(t.key,e.key)},this.Ht=hi(),this.Jt=new ni(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),yi=function(){function t(){this.Xt=new ni(Vr.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):br():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt(function(e,n){t.push(n)}),t},t}(),bi=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,mi.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&ks(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),_i=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,wi.he(e,n)),new t(Dr.min(),r,vi(),ui(),di())},t}(),wi=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t($r.lt,n,di(),di(),di())},t}(),Ei=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},Oi=function(t,e){this.targetId=t,this.Te=e},Ci=function(t,e,n,r){void 0===n&&(n=$r.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ti=function(){function t(){this.Ie=0,this.me=Ai(),this.Ae=$r.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=di(),e=di(),n=di();return this.me.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:br()}}),new wi(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=Ai()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),Ii=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=ui(),this.Me=Si(),this.ke=new oi(jr)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof gs?this.Le(r,t.Ee):t.Ee instanceof vs&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:br()}})},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach(function(t,r){n.Ke(r)&&e(r)})},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(Qr(i))if(0===n){var o=new Vr(i.path);this.Be(e,o,new vs(o,Dr.min()))}else _r(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach(function(r,i){var o=e.Ge(i);if(o){if(r.le&&Qr(o.target)){var s=new Vr(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new vs(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}});var r=di();this.Me.forEach(function(t,n){var i=!0;n.Wt(function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)}),i&&(r=r.add(t))});var i=new _i(t,n,this.ke,this.Oe,r);return this.Oe=ui(),this.Me=Si(),this.ke=new oi(jr),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Ti,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new oi(jr),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||gr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Ti),this.xe.Xe(t).forEach(function(n){e.Be(t,n,null)})},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function Si(){return new ni(Vr.$)}function Ai(){return new ni(Vr.$)}function ki(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ji(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ri(t){var e=t.mapValue.fields.__previous_value__;return xi(e)?Ri(e):e}function Pi(t){var e=Bi(t.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}var Di=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xi(t)?4:10:br()}function Mi(t,e){var n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pi(t).isEqual(Pi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Bi(t.timestampValue),r=Bi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Wi(t.bytesValue).isEqual(Wi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zi(t.geoPointValue.latitude)===zi(e.geoPointValue.latitude)&&zi(t.geoPointValue.longitude)===zi(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zi(t.integerValue)===zi(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zi(t.doubleValue),r=zi(e.doubleValue);return n===r?Hr(n)===Hr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return xr(t.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ki(n)!==ki(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mi(n[i],r[i])))return!1;return!0}(t,e);default:return br()}}function Fi(t,e){return void 0!==(t.values||[]).find(function(t){return Mi(t,e)})}function Ui(t,e){var n=Li(t),r=Li(e);if(n!==r)return jr(n,r);switch(n){case 0:return 0;case 1:return jr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=zi(t.integerValue||t.doubleValue),r=zi(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Vi(t.timestampValue,e.timestampValue);case 4:return Vi(Pi(t),Pi(e));case 5:return jr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Wi(t),r=Wi(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jr(n[i],r[i]);if(0!==o)return o}return jr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jr(zi(t.latitude),zi(e.latitude));return 0!==n?n:jr(zi(t.longitude),zi(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ui(n[i],r[i]);if(o)return o}return jr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jr(r[s],o[s]);if(0!==a)return a;var u=Ui(n[r[s]],i[o[s]]);if(0!==u)return u}return jr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw br()}}function Vi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jr(t,e);var n=Bi(t),r=Bi(e),i=jr(n.seconds,r.seconds);return 0!==i?i:jr(n.nanos,r.nanos)}function qi(t){return Hi(t)}function Hi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Bi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wi(t.bytesValue).toBase64():"referenceValue"in t?Vr.it(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Hi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Hi(t.fields[o])}return e+"}"}(t.mapValue):br();var e}function Bi(t){if(_r(!!t),"string"==typeof t){var e=0,n=Di.exec(t);if(_r(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zi(t.seconds),nanos:zi(t.nanos)}}function zi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wi(t){return"string"==typeof t?$r.fromBase64String(t):$r.fromUint8Array(t)}function Ki(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function Gi(t){return!!t&&"integerValue"in t}function Qi(t){return!!t&&"arrayValue"in t}function $i(t){return!!t&&"nullValue"in t}function Ji(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xi(t){return!!t&&"mapValue"in t}var Yi={asc:"ASCENDING",desc:"DESCENDING"},Zi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},to=function(t,e){this.t=t,this.tn=e};function eo(t){return{integerValue:""+t}}function no(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hr(e)?"-0":e}}function ro(t,e){return Br(e)?eo(e):no(t,e)}function io(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function oo(t,e){return t.tn?e.toBase64():e.toUint8Array()}function so(t,e){return io(t,e.M())}function ao(t){return _r(!!t),Dr.N(function(t){var e=Bi(t);return new Pr(e.seconds,e.nanos)}(t))}function uo(t,e){return function(t){return new Mr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function co(t){var e=Mr.Y(t);return _r(Ro(e)),e}function lo(t,e){return uo(t.t,e.path)}function ho(t,e){var n=co(e);if(n.get(1)!==t.t.projectId)throw new Or(Er.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Or(Er.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Vr(vo(n))}function fo(t,e){return uo(t.t,e)}function po(t){var e=co(t);return 4===e.length?Mr.X():vo(e)}function go(t){return new Mr(["projects",t.t.projectId,"databases",t.t.database]).J()}function vo(t){return _r(t.length>4&&"documents"===t.get(4)),t.B(5)}function mo(t,e,n){return{name:lo(t,e),fields:n.proto.mapValue.fields}}function yo(t,e){var n;if(e instanceof rs)n={update:mo(t,e.key,e.value)};else if(e instanceof cs)n={delete:lo(t,e.key)};else if(e instanceof is)n={update:mo(t,e.key,e.data),updateMask:xo(e.en)};else if(e instanceof ss)n={transform:{document:lo(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Fo)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uo)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof qo)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Bo)return{fieldPath:e.field.J(),increment:n.nn};throw br()}(0,t)})}};else{if(!(e instanceof ls))return br();n={verify:lo(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:so(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:br()}(t,e.rn)),n}function bo(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?$o.updateTime(ao(t.updateTime)):void 0!==t.exists?$o.exists(t.exists):$o.on()}(e.currentDocument):$o.on();if(e.update){var r=ho(t,e.update.name),i=new hs({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Ko((t.fieldPaths||[]).map(function(t){return Ur.nt(t)}))}(e.updateMask);return new is(r,i,o,n)}return new rs(r,i,n)}if(e.delete){var s=ho(t,e.delete);return new cs(s,n)}if(e.transform){var a=ho(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(_r("REQUEST_TIME"===e.setToServerValue),n=new Fo):"appendMissingElements"in e?n=new Uo(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new qo(e.removeAllFromArray.values||[]):"increment"in e?n=new Bo(t,e.increment):br();var r=Ur.nt(e.fieldPath);return new Go(r,n)}(t,e)});return _r(!0===n.exists),new ss(a,u)}if(e.verify){var c=ho(t,e.verify);return new ls(c,n)}return br()}function _o(t,e){return{documents:[fo(t,e.path)]}}function wo(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=fo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=fo(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ji(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NAN"}};if($i(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ji(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NAN"}};if($i(t.value))return{unaryFilter:{field:Ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(t.field),op:So(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Ao(t.field),direction:Io(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||qr(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Co(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Co(e.endAt)),n}function Eo(t){var e=po(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){_r(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Oo(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Gs(ko(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return qr(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=To(n.startAt));var l=null;return n.endAt&&(l=To(n.endAt)),bs(e,i,a,s,u,"F",c,l)}function Oo(t){return t?void 0!==t.unaryFilter?[jo(t)]:void 0!==t.fieldFilter?[No(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Oo(t)}).reduce(function(t,e){return t.concat(e)}):br():[]}function Co(t){return{before:t.before,values:t.position}}function To(t){return new Bs(t.values||[],!!t.before)}function Io(t){return Yi[t]}function So(t){return Zi[t]}function Ao(t){return{fieldPath:t.J()}}function ko(t){return Ur.nt(t.fieldPath)}function No(t){return Ps.create(ko(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return br()}}(t.fieldFilter.op),t.fieldFilter.value)}function jo(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ko(t.unaryFilter.field);return Ps.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ko(t.unaryFilter.field);return Ps.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ko(t.unaryFilter.field);return Ps.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ko(t.unaryFilter.field);return Ps.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return br()}}function xo(t){var e=[];return t.fields.forEach(function(t){return e.push(t.J())}),{fieldPaths:e}}function Ro(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Po=function(){this.cn=void 0};function Do(t,e,n){return t instanceof Fo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Uo?Vo(t,e):t instanceof qo?Ho(t,e):function(t,e){var n=Mo(t,e),r=zo(n)+zo(t.nn);return Gi(n)&&Gi(t.nn)?eo(r):no(t.serializer,r)}(t,e)}function Lo(t,e,n){return t instanceof Uo?Vo(t,e):t instanceof qo?Ho(t,e):n}function Mo(t,e){return t instanceof Bo?Gi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e}(Po),Uo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(i.c)(e,t),e}(Po);function Vo(t,e){for(var n=Wo(e),r=function(t){n.some(function(e){return Mi(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(i.c)(e,t),e}(Po);function Ho(t,e){for(var n=Wo(e),r=function(t){n=n.filter(function(e){return!Mi(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Bo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(i.c)(e,t),e}(Po);function zo(t){return zi(t.integerValue||t.doubleValue)}function Wo(t){return Qi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ko=function(){function t(t){this.fields=t,t.sort(Ur.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return xr(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Go=function(t,e){this.field=t,this.transform=e},Qo=function(t,e){this.version=t,this.transformResults=e},$o=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Jo(t,e){return void 0!==t.updateTime?e instanceof gs&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof gs}var Xo=function(){};function Yo(t,e,n){return t instanceof rs?function(t,e,n){return new gs(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof is?function(t,e,n){if(!Jo(t.rn,e))return new ms(t.key,n.version);var r=os(t,e);return new gs(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ss?function(t,e,n){if(_r(null!=n.transformResults),!Jo(t.rn,e))return new ms(t.key,n.version);var r=as(0,e),i=function(t,e,n){var r=[];_r(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof gs&&(a=e.field(o.field)),r.push(Lo(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=us(t,r.data(),i);return new gs(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new vs(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Zo(t,e,n,r){return t instanceof rs?function(t,e){if(!Jo(t.rn,e))return e;var n=ns(e);return new gs(t.key,n,t.value,{an:!0})}(t,e):t instanceof is?function(t,e){if(!Jo(t.rn,e))return e;var n=ns(e),r=os(t,e);return new gs(t.key,n,r,{an:!0})}(t,e):t instanceof ss?function(t,e,n,r){if(!Jo(t.rn,e))return e;var i=as(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof gs&&(c=n.field(a.field)),null===c&&r instanceof gs&&(c=r.field(a.field)),i.push(Do(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=us(t,i.data(),o);return new gs(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return Jo(t.rn,e)?new vs(t.key,Dr.min()):e}(t,e)}function ts(t,e){return t instanceof ss?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof gs?e.field(o.field):void 0,a=Mo(o.transform,s||null);null!=a&&(n=null==n?(new fs).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function es(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||xr(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Uo&&e instanceof Uo||t instanceof qo&&e instanceof qo?xr(t.elements,e.elements,Mi):t instanceof Bo&&e instanceof Bo?Mi(t.nn,e.nn):t instanceof Fo&&e instanceof Fo}(t.transform,e.transform)}(t,e)}))}function ns(t){return t instanceof gs?t.version:Dr.min()}var rs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(i.c)(e,t),e}(Xo),is=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(i.c)(e,t),e}(Xo);function os(t,e){return function(t,e){var n=new fs(e);return t.en.fields.forEach(function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.hn()}(t,e instanceof gs?e.data():hs.empty())}var ss=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=$o.exists(!0),r}return Object(i.c)(e,t),e}(Xo);function as(t,e){return e}function us(t,e,n){for(var r=new fs(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var cs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(i.c)(e,t),e}(Xo),ls=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(i.c)(e,t),e}(Xo),hs=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Xi(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Mi(this.proto,t.proto)},t}(),fs=function(){function t(t){void 0===t&&(t=hs.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Li(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(Ur.X(),this._n);return null!=t?new hs(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Xi(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function ps(t){var e=[];return Ni(t.fields||{},function(t,n){var r=new Ur([t]);if(Xi(n)){var i=ps(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Ko(e)}var ds=function(t,e){this.key=t,this.version=e},gs=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(i.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ds),vs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(i.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ds),ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ds),ys=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function bs(t,e,n,r,i,o,s,a){return new ys(t,e,n,r,i,o,s,a)}function _s(t){return new ys(t)}function ws(t){return!qr(t.limit)&&"F"===t.limitType}function Es(t){return!qr(t.limit)&&"L"===t.limitType}function Os(t){return t.Tn.length>0?t.Tn[0].field:null}function Cs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function Ts(t){return null!==t.collectionGroup}function Is(t){var e=wr(t);if(null===e.In){e.In=[];var n=Cs(e),r=Os(e);if(null!==n&&null===r)n.tt()||e.In.push(new Gs(n)),e.In.push(new Gs(Ur.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new Gs(Ur.et(),u))}}}return e.In}function Ss(t){var e=wr(t);if(!e.mn)if("F"===e.limitType)e.mn=Wr(e.path,e.collectionGroup,Is(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Is(e);r<i.length;r++){var o=i[r];n.push(new Gs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Bs(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Bs(e.startAt.position,!e.startAt.before):null;e.mn=Wr(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function As(t,e,n){return new ys(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ks(t,e){return Gr(Ss(t),Ss(e))&&t.limitType===e.limitType}function Ns(t){return Kr(Ss(t))+"|lt:"+t.limitType}function js(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.J()+" "+e.op+" "+qi(e.value);var e}).join(", ")+"]"),qr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+zs(t.startAt)),t.endAt&&(e+=", endAt: "+zs(t.endAt)),"Target("+e+")"}(Ss(t))+"; limitType="+t.limitType+")"}function xs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):Vr.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ws(t.startAt,Is(t),e)||t.endAt&&Ws(t.endAt,Is(t),e))}(t,e)}function Rs(t){return function(e,n){for(var r=!1,i=0,o=Is(t);i<o.length;i++){var s=o[i],a=Qs(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var Ps=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(i.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new Ds(t,n,r):"array-contains"===n?new Us(t,r):"in"===n?new Vs(t,r):"not-in"===n?new qs(t,r):"array-contains-any"===n?new Hs(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new Ls(t,n):new Ms(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Ui(e,this.value)):null!==e&&Li(this.value)===Li(e)&&this.Pn(Ui(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return br()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Ds=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Vr.it(r.referenceValue),i}return Object(i.c)(e,t),e.prototype.matches=function(t){var e=Vr.$(t.key,this.key);return this.Pn(e)},e}(Ps),Ls=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Fs(0,n),r}return Object(i.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ps),Ms=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Fs(0,n),r}return Object(i.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Ps);function Fs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Vr.it(t.referenceValue)})}var Us=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(i.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Qi(e)&&Fi(e.arrayValue,this.value)},e}(Ps),Vs=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(i.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Fi(this.value.arrayValue,e)},e}(Ps),qs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(i.c)(e,t),e.prototype.matches=function(t){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Fi(this.value.arrayValue,e)},e}(Ps),Hs=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(i.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Qi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Fi(e.value.arrayValue,t)})},e}(Ps),Bs=function(t,e){this.position=t,this.before=e};function zs(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return qi(t)}).join(",")}function Ws(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?Vr.$(Vr.it(s.referenceValue),n.key):Ui(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ks(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Mi(t.position[n],e.position[n]))return!1;return!0}var Gs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Qs(t,e,n){var r=t.field.tt()?Vr.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ui(r,i):br()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return br()}}function $s(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Js=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Yo(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Zo(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Zo(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},di())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,function(t,e){return es(t,e)})&&xr(this.baseMutations,t.baseMutations,function(t,e){return es(t,e)})},t}(),Xs=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){_r(e.mutations.length===r.length);for(var i=fi,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ys=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ni(this.Nn,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.W=function(){return ji(this.Nn)},t}(),Zs=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&br(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t(function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}})},t.prototype.Ln=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn(function(){return e(n)}):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.qn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.qn(r)},t}(),ta=function(){function t(){this.Qn=new Ys(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:Dr.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Zs.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),ea=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function na(t){return new to(t,!0)}function ra(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ia="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",oa=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach(function(t){return t()})},t}(),sa=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next(function(r){return n.hs(t,e,r)})},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t})},t.prototype.ls=function(t,e,n){var r=ci();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)}),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next(function(e){return n.fs(t,e)})},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next(function(r){var i=n.ls(t,e,r),o=ui();return i.forEach(function(t,e){e||(e=new vs(t,Dr.min())),o=o.Tt(t,e)}),o})},t.prototype.ws=function(t,e,n){return function(t){return Vr.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):Ts(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new Vr(e)).next(function(t){var e=hi();return t instanceof gs&&(e=e.Tt(t.key,t)),e})},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=hi();return this.os.As(t,i).next(function(s){return Zs.forEach(s,function(s){var a=function(t,e){return new ys(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Tt(t,e)})})}).next(function(){return o})})},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next(function(n){return r=n,o.rs.Rs(t,e)}).next(function(e){return o.Ps(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=Zo(u,l,l,o.gn);r=h instanceof gs?r.Tt(c,h):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){xs(e,n)||(r=r.remove(t))}),r})},t.prototype.Ps=function(t,e,n){for(var r=di(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof is&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof gs&&(c=c.Tt(t,e))}),c})},t}(),aa=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=di(),i=di(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ua=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();ua.Ds=-1;var ca=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&gr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),la=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(s.p)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return gr("SimpleDb","Removing database:",t),va(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(s.p)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(gr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new fa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Or(Er.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new fa(t,n))},i.onupgradeneeded=function(t){gr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){gr("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}})})},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s,a,u,c;return Object(i.d)(this,function(l){switch(l.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,l,h;return Object(i.d)(this,function(i){switch(i.label){case 0:++s,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u.Xs(t)];case 2:return u.db=i.sent(),e=da.open(u.db,t,o?"readonly":"readwrite",n),a=r(e).catch(function(t){return e.abort(t),Zs.reject(t)}).Ln(),c={},a.catch(function(){}),[4,e.ei];case 3:return[2,(c.value=(i.sent(),a),c)];case 4:return gr("SimpleDb","Transaction failed with error:",(l=i.sent()).message,"Retrying:",h="FirebaseError"!==l.name&&s<3),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}})},u=this,l.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ha=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return va(this.ni.delete())},t}(),fa=function(t){function e(e,n){var r=this;return(r=t.call(this,Er.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(i.c)(e,t),e}(Or);function pa(t){return"IndexedDbTransactionError"===t.name}var da=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new ea,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new fa(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=ya(e.target.error);n.ci.reject(new fa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new fa(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(gr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ga(e)},t}(),ga=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(gr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(gr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),va(n)},t.prototype.add=function(t){return gr("SimpleDb","ADD",this.store.name,t,t),va(this.store.add(t))},t.prototype.get=function(t){var e=this;return va(this.store.get(t)).next(function(n){return void 0===n&&(n=null),gr("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return gr("SimpleDb","DELETE",this.store.name,t),va(this.store.delete(t))},t.prototype.count=function(){return gr("SimpleDb","COUNT",this.store.name),va(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.hi=function(t,e){gr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,function(t,e,n){return n.delete()})},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Zs(function(n,r){e.onerror=function(t){var e=ya(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.ai=function(t,e){var n=[];return new Zs(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ha(i),s=e(i.primaryKey,i.value,o);if(s instanceof Zs){var a=s.catch(function(t){return o.done(),Zs.reject(t)});n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}}).next(function(){return Zs.qn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function va(t){return new Zs(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=ya(t.target.error);n(e)}})}var ma=!1;function ya(t){var e=la.js(Object(s.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Or("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ma||(ma=!0,setTimeout(function(){throw r},0)),r}}return t}function ba(){return"undefined"!=typeof window?window:null}function _a(){return"undefined"!=typeof document?document:null}var wa=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new ea,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new Or(Er.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri(function(){return null!==t.mi?(t.clearTimeout(),t.op().then(function(e){return t.Ti.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),Ea=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new ca(this,"async_queue_retry"),this.Di=function(){var e=_a();e&&gr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=_a();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=_a();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},t.prototype.ki=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e=this;return Object(i.d)(this,function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!pa(t=n.sent()))throw t;return gr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs(function(){return e.ki()}),n.label=5;case 5:return[2]}})})},t.prototype.Fi=function(t){var e=this,n=this.Pi.then(function(){return e.vi=!0,t().catch(function(t){throw e.pi=t,e.vi=!1,vr("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.vi=!1,t})});return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=wa.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&br()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then(function(){e.Vi.sort(function(t,e){return t.wi-e.wi});for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()})},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function Oa(t,e){if(vr("AsyncQueue",e+": "+t),pa(t))return new Or(Er.UNAVAILABLE,e+": "+t);throw t}function Ca(t,e){var n=t[1],r=e[1],i=jr(t[0],e[0]);return 0===i?jr(n,r):i}var Ta=function(){function t(t){this.Ki=t,this.buffer=new oi(Ca),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ca(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ia={zi:!1,Hi:0,Ji:0,Yi:0},Sa=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Sa.nr=10,Sa.sr=1e3,Sa.ir=new Sa(41943040,Sa.nr,Sa.sr),Sa.rr=new Sa(-1,0,0);var Aa=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;gr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,function(){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return pa(e=n.sent())?(gr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,ec(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}})})})},t}(),ka=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Zs.resolve(ua.Ds);var r=new Ta(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(gr("LruGarbageCollector","Garbage collection skipped; disabled"),Zs.resolve(Ia)):this.Pr(t).next(function(r){return r<n.params.Xi?(gr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),Ia):n.gr(t,e)})},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,s,a,u,c,l=this,h=Date.now();return this.wr(t,this.params.Zi).next(function(e){return e>l.params.tr?(gr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.tr+" from "+e),r=l.params.tr):r=e,s=Date.now(),l.Tr(t,r)}).next(function(r){return n=r,a=Date.now(),l.mr(t,n,e)}).next(function(e){return i=e,u=Date.now(),l.Ar(t,n)}).next(function(t){return c=Date.now(),dr()<=o.a.DEBUG&&gr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),Zs.resolve({zi:!0,Hi:r,Ji:i,Yi:t})})},t}();function Na(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xa(e)),e=ja(t.get(n),e);return xa(e)}function ja(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function xa(t){return t+"\x01\x01"}function Ra(t){var e=t.length;if(_r(e>=2),2===e)return _r("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Mr.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&br(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:br()}o=s+2}return new Mr(r)}var Pa=function(t){this.yr=t};function Da(t,e){if(e.document)return function(t,e,n){var r=ho(t,e.name),i=ao(e.updateTime),o=new hs({mapValue:{fields:e.fields}});return new gs(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Vr.ct(e.noDocument.path),r=Va(e.noDocument.readTime);return new vs(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Vr.ct(e.unknownDocument.path),o=Va(e.unknownDocument.version);return new ms(i,o)}return br()}function La(t,e,n){var r=Ma(n),i=e.key.path.q().H();if(e instanceof gs){var o=function(t,e){return{name:lo(t,e.key),fields:e.En().mapValue.fields,updateTime:io(t,e.version.M())}}(t.yr,e);return new pu(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof vs){var s=e.key.path.H(),a=Ua(e.version),u=e.hasCommittedMutations;return new pu(null,new hu(s,a),null,u,r,i)}if(e instanceof ms){var c=e.key.path.H(),l=Ua(e.version);return new pu(new fu(c,l),null,null,!0,r,i)}return br()}function Ma(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Fa(t){var e=new Pr(t[0],t[1]);return Dr.N(e)}function Ua(t){var e=t.M();return new su(e.seconds,e.nanoseconds)}function Va(t){var e=new Pr(t.seconds,t.nanoseconds);return Dr.N(e)}function qa(t,e){var n=(e.baseMutations||[]).map(function(e){return bo(t.yr,e)}),r=e.mutations.map(function(e){return bo(t.yr,e)}),i=Pr.fromMillis(e.localWriteTimeMs);return new Js(e.batchId,i,n,r)}function Ha(t){var e,n,r=Va(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Va(t.lastLimboFreeSnapshotVersion):Dr.min();return void 0!==t.query.documents?(_r(1===(n=t.query).documents.length),e=Ss(_s(po(n.documents[0])))):e=function(t){return Ss(Eo(t))}(t.query),new Yr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,$r.fromBase64String(t.resumeToken))}function Ba(t,e){var n,r=Ua(e.ft),i=Ua(e.lastLimboFreeSnapshotVersion);n=Qr(e.target)?_o(t.yr,e.target):wo(t.yr,e.target);var o=e.resumeToken.toBase64();return new gu(e.targetId,Kr(e.target),r,o,e.sequenceNumber,i,n)}function za(t){var e=Eo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?As(e,e.limit,"L"):e}var Wa=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return _r(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qa(t)._i({index:cu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Sr=function(t,e,n,r){var i=this,o=$a(t),s=Qa(t);return s.add({}).next(function(a){_r("number"==typeof a);for(var u=new Js(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return yo(t.yr,e)}),i=n.mutations.map(function(e){return yo(t.yr,e)});return new cu(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new oi(function(t,e){return jr(t.J(),e.J())}),f=0,p=r;f<p.length;f++){var d=p[f],g=lu.key(i.userId,d.key.path,a);h=h.add(d.key.path.q()),l.push(s.put(c)),l.push(o.put(g,lu.PLACEHOLDER))}return h.forEach(function(e){l.push(i.os.Dr(t,e))}),t.es(function(){i.pr[a]=u.keys()}),Zs.qn(l).next(function(){return u})})},t.prototype.Cr=function(t,e){var n=this;return Qa(t).get(e).next(function(t){return t?(_r(t.userId===n.userId),qa(n.serializer,t)):null})},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?Zs.resolve(this.pr[e]):this.Cr(t,e).next(function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null})},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qa(t)._i({index:cu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(_r(e.batchId>=r),o=qa(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qa(t)._i({index:cu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qa(t).ui(cu.userMutationsIndex,n).next(function(t){return t.map(function(t){return qa(e.serializer,t)})})},t.prototype.us=function(t,e){var n=this,r=lu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return $a(t)._i({range:i},function(r,i,s){var a=r[0],u=r[2],c=Ra(r[1]);if(a===n.userId&&e.path.isEqual(c))return Qa(t).get(u).next(function(t){if(!t)throw br();_r(t.userId===n.userId),o.push(qa(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.ds=function(t,e){var n=this,r=new oi(jr),i=[];return e.forEach(function(e){var o=lu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=$a(t)._i({range:s},function(t,i,o){var s=t[0],a=t[2],u=Ra(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Zs.qn(i).next(function(){return n.kr(t,r)})},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=lu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new oi(jr);return $a(t)._i({range:s},function(t,e,o){var s=t[0],u=t[2],c=Ra(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.kr(t,a)})},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Qa(t).get(e).next(function(t){if(null===t)throw br();_r(t.userId===n.userId),r.push(qa(n.serializer,t))}))}),Zs.qn(i).next(function(){return r})},t.prototype.$r=function(t,e){var n=this;return Ga(t.Lr,this.userId,e).next(function(r){return t.es(function(){n.Br(e.batchId)}),Zs.forEach(r,function(e){return n.Vr.qr(t,e)})})},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next(function(n){if(!n)return Zs.resolve();var r=IDBKeyRange.lowerBound(lu.prefixForUser(e.userId)),i=[];return $a(t)._i({range:r},function(t,n,r){if(t[0]===e.userId){var o=Ra(t[1]);i.push(o)}else r.done()}).next(function(){_r(0===i.length)})})},t.prototype.Qr=function(t,e){return Ka(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return Ja(t).get(this.userId).next(function(t){return t||new uu(e.userId,-1,"")})},t}();function Ka(t,e,n){var r=lu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return $a(t)._i({range:o,li:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Ga(t,e,n){var r=t.store(cu.store),i=t.store(lu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){_r(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=lu.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Zs.qn(o).next(function(){return c})}function Qa(t){return Lu.Ys(t,cu.store)}function $a(t){return Lu.Ys(t,lu.store)}function Ja(t){return Lu.Ys(t,uu.store)}var Xa=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return tu(t).put(eu(e),n)},t.prototype.Hn=function(t,e){var n=tu(t),r=eu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Wr(t,r)})},t.prototype.Jn=function(t,e){var n=this;return tu(t).get(eu(e)).next(function(t){return n.jr(t)})},t.prototype.Gr=function(t,e){var n=this;return tu(t).get(eu(e)).next(function(t){var e=n.jr(t);return e?{zn:e,size:nu(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=ci();return this.zr(t,e,function(t,e){var i=n.jr(e);r=r.Tt(t,i)}).next(function(){return r})},t.prototype.Hr=function(t,e){var n=this,r=ci(),i=new ni(Vr.$);return this.zr(t,e,function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,nu(e))):(r=r.Tt(t,null),i=i.Tt(t,0))}).next(function(){return{Jr:r,Yr:i}})},t.prototype.zr=function(t,e,n){if(e.W())return Zs.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return tu(t)._i({range:r},function(t,e,r){for(var s=Vr.ct(t);o&&Vr.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null})},t.prototype.ws=function(t,e,n){var r=this,i=hi(),o=e.path.length+1,s={};if(n.isEqual(Dr.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=Ma(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=pu.collectionReadTimeIndex}return tu(t)._i(s,function(t,n,s){if(t.length===o){var a=Da(r.serializer,n);e.path.j(a.key.path)?a instanceof gs&&xs(e,a)&&(i=i.Tt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Xr=function(t){return new Ya(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Za(t).get(du.key).next(function(t){return _r(!!t),t})},t.prototype.Wr=function(t,e){return Za(t).put(du.key,e)},t.prototype.jr=function(t){if(t){var e=Da(this.serializer,t);return e instanceof vs&&e.version.isEqual(Dr.min())?null:e}return null},t}(),Ya=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new Ys(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(i.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new oi(function(t,e){return jr(t.J(),e.J())});return this.Qn.forEach(function(o,s){var a=e.so.get(o);if(s.zn){var u=La(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=nu(u);r+=c-a,n.push(e.no.jn(t,o,u))}else if(r-=a,e.Zr){var l=La(e.no.serializer,new vs(o,Dr.min()),e.Wn(o));n.push(e.no.jn(t,o,l))}else n.push(e.no.Hn(t,o))}),i.forEach(function(r){n.push(e.no.os.Dr(t,r))}),n.push(this.no.updateMetadata(t,r)),Zs.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next(function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)})},e.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next(function(t){var e=t.Jr;return t.Yr.forEach(function(t,e){n.so.set(t,e)}),e})},e}(ta);function Za(t){return Lu.Ys(t,du.store)}function tu(t){return Lu.Ys(t,pu.store)}function eu(t){return t.path.H()}function nu(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw br();e=t.noDocument}return JSON.stringify(e).length}var ru=function(){function t(){this.io=new iu}return t.prototype.Dr=function(t,e){return this.io.add(e),Zs.resolve()},t.prototype.As=function(t,e){return Zs.resolve(this.io.getEntries(e))},t}(),iu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new oi(Mr.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new oi(Mr.$)).H()},t}(),ou=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;_r(n<r&&n>=0&&r<=11);var o=new da("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(au.store)}(t),function(t){t.createObjectStore(uu.store,{keyPath:uu.keyPath}),t.createObjectStore(cu.store,{keyPath:cu.keyPath,autoIncrement:!0}).createIndex(cu.userMutationsIndex,cu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(lu.store)}(t),bu(t),function(t){t.createObjectStore(pu.store)}(t));var s=Zs.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vu.store),t.deleteObjectStore(gu.store),t.deleteObjectStore(mu.store)}(t),bu(t)),s=s.next(function(){return function(t){var e=t.store(mu.store),n=new mu(0,0,Dr.min().M(),0);return e.put(mu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(cu.store).ui().next(function(n){t.deleteObjectStore(cu.store),t.createObjectStore(cu.store,{keyPath:cu.keyPath,autoIncrement:!0}).createIndex(cu.userMutationsIndex,cu.userMutationsKeyPath,{unique:!0});var r=e.store(cu.store),i=n.map(function(t){return r.put(t)});return Zs.qn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(_u.store,{keyPath:_u.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(du.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pu.store);e.createIndex(pu.readTimeIndex,pu.readTimeIndexPath,{unique:!1}),e.createIndex(pu.collectionReadTimeIndex,pu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(wu.store,{keyPath:wu.keyPath})}(t),function(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(pu.store)._i(function(t,n){e+=nu(n)}).next(function(){var n=new du(e);return t.store(du.store).put(du.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(uu.store),r=t.store(cu.store);return n.ui().next(function(n){return Zs.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(cu.userMutationsIndex,i).next(function(r){return Zs.forEach(r,function(r){_r(r.userId===n.userId);var i=qa(e.serializer,r);return Ga(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(vu.store),n=t.store(pu.store);return t.store(mu.store).get(mu.key).next(function(t){var r=[];return n._i(function(n,i){var o=new Mr(n),s=function(t){return[0,Na(t)]}(o);r.push(e.get(s).next(function(n){return n?Zs.resolve():function(n){return e.put(new vu(0,Na(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Zs.qn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(yu.store,{keyPath:yu.keyPath});var n=e.store(yu.store),r=new iu,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:Na(i)})}};return e.store(pu.store)._i({li:!0},function(t,e){var n=new Mr(t);return i(n.q())}).next(function(){return e.store(lu.store)._i({li:!0},function(t,e){var n=Ra(t[1]);return i(n.q())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(gu.store);return n._i(function(t,r){var i=Ha(r),o=Ba(e.serializer,i);return n.put(o)})},t}(),su=function(t,e){this.seconds=t,this.nanoseconds=e},au=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};au.store="owner",au.key="owner";var uu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};uu.store="mutationQueues",uu.keyPath="userId";var cu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};cu.store="mutations",cu.keyPath="batchId",cu.userMutationsIndex="userMutationsIndex",cu.userMutationsKeyPath=["userId","batchId"];var lu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Na(e)]},t.key=function(t,e,n){return[t,Na(e),n]},t}();lu.store="documentMutations",lu.PLACEHOLDER=new lu;var hu=function(t,e){this.path=t,this.readTime=e},fu=function(t,e){this.path=t,this.version=e},pu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pu.store="remoteDocuments",pu.readTimeIndex="readTimeIndex",pu.readTimeIndexPath="readTime",pu.collectionReadTimeIndex="collectionReadTimeIndex",pu.collectionReadTimeIndexPath=["parentPath","readTime"];var du=function(t){this.byteSize=t};du.store="remoteDocumentGlobal",du.key="remoteDocumentGlobalKey";var gu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};gu.store="targets",gu.keyPath="targetId",gu.queryTargetsIndexName="queryTargetsIndex",gu.queryTargetsKeyPath=["canonicalId","targetId"];var vu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vu.store="targetDocuments",vu.keyPath=["targetId","path"],vu.documentTargetsIndex="documentTargetsIndex",vu.documentTargetsKeyPath=["path","targetId"];var mu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mu.key="targetGlobalKey",mu.store="targetGlobal";var yu=function(t,e){this.collectionId=t,this.parent=e};function bu(t){t.createObjectStore(vu.store,{keyPath:vu.keyPath}).createIndex(vu.documentTargetsIndex,vu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gu.store,{keyPath:gu.keyPath}).createIndex(gu.queryTargetsIndexName,gu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mu.store)}yu.store="collectionParents",yu.keyPath=["collectionId","parent"];var _u=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_u.store="clientMetadata",_u.keyPath="clientId";var wu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};wu.store="bundles",wu.keyPath="bundleId";var Eu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Eu.store="namedQueries",Eu.keyPath="name";var Ou=Object(i.g)(Object(i.g)(Object(i.g)(Object(i.g)([uu.store,cu.store,lu.store,pu.store,gu.store,au.store,mu.store,vu.store],[_u.store]),[du.store]),[yu.store]),[wu.store,Eu.store]),Cu=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return Tu(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Va(e.createTime),version:e.version};var e})},t.prototype.oo=function(t,e){return Tu(t).put({bundleId:(n=e).id,createTime:Ua(ao(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return Iu(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:za(e.bundledQuery),readTime:Va(e.readTime)};var e})},t.prototype.uo=function(t,e){return Iu(t).put(function(t){return{name:t.name,readTime:Ua(ao(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Tu(t){return Lu.Ys(t,wu.store)}function Iu(t){return Lu.Ys(t,Eu.store)}var Su=function(){function t(){this.ao=new iu}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es(function(){n.ao.add(e)});var o={collectionId:r,parent:Na(i)};return Au(t).put(o)}return Zs.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Rr(e),""],!1,!0);return Au(t).ui(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ra(o.parent))}return n})},t}();function Au(t){return Lu.Ys(t,yu.store)}var ku=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),Nu=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next(function(n){var r=new ku(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next(function(){return n.highestTargetId})})},t.prototype.To=function(t){return this.wo(t).next(function(t){return Dr.N(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Io=function(t){return this.wo(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)})},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next(function(){return n.wo(t).next(function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)})})},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next(function(){return ju(t).delete(e.targetId)}).next(function(){return n.wo(t)}).next(function(e){return _r(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)})},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return ju(t)._i(function(s,a){var u=Ha(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Vo(t,u)))}).next(function(){return Zs.qn(o)}).next(function(){return i})},t.prototype.Ue=function(t,e){return ju(t)._i(function(t,n){var r=Ha(n);e(r)})},t.prototype.wo=function(t){return xu(t).get(mu.key).next(function(t){return _r(null!==t),t})},t.prototype.Eo=function(t,e){return xu(t).put(mu.key,e)},t.prototype.Ro=function(t,e){return ju(t).put(Ba(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next(function(t){return t.targetCount})},t.prototype.bo=function(t,e){var n=Kr(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ju(t)._i({range:r,index:gu.queryTargetsIndexName},function(t,n,r){var o=Ha(n);Gr(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.So=function(t,e,n){var r=this,i=[],o=Ru(t);return e.forEach(function(e){var s=Na(e.path);i.push(o.put(new vu(n,s))),i.push(r.Vr.Do(t,n,e))}),Zs.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=Ru(t);return Zs.forEach(e,function(e){var o=Na(e.path);return Zs.qn([i.delete([n,o]),r.Vr.No(t,n,e)])})},t.prototype.po=function(t,e){var n=Ru(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Ru(t),i=di();return r._i({range:n,li:!0},function(t,e,n){var r=Ra(t[1]),o=new Vr(r);i=i.add(o)}).next(function(){return i})},t.prototype.Qr=function(t,e){var n=Na(e.path),r=IDBKeyRange.bound([n],[Rr(n)],!1,!0),i=0;return Ru(t)._i({index:vu.documentTargetsIndex,li:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ze=function(t,e){return ju(t).get(e).next(function(t){return t?Ha(t):null})},t}();function ju(t){return Lu.Ys(t,gu.store)}function xu(t){return Lu.Ys(t,mu.store)}function Ru(t){return Lu.Ys(t,vu.store)}var Pu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(i.c)(e,t),e}(oa),Lu=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Oo=c,this.Mo=l,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new Or(Er.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new Uu(this,i),this.Ko=n+"main",this.serializer=new Pa(u),this.Wo=new la(this.Ko,11,new ou(this.serializer)),this.jo=new Nu(this.Vr,this.serializer),this.os=new Su,this.ss=function(t,e){return new Xa(t,e)}(this.serializer,this.os),this.Go=new Cu(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===l&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof Du)return la.Ys(t.Lr,e);throw br()},t.prototype.start=function(){var t=this;return this.Ho().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Or(Er.FAILED_PRECONDITION,Pu);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.jo.Io(e)})}).then(function(e){t.ko=new ua(e,t.Oo)}).then(function(){t.$o=!0}).catch(function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)})},t.prototype.Zo=function(t){var e=this;return this.Qo=function(n){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){return this.lr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.tc=function(t){var e=this;this.Wo.ti(function(n){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.ec=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Fu(e).put(new _u(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nc(e).next(function(e){e||(t.isPrimary=!1,t.Cs.Mi(function(){return t.Qo(!1)}))})}).next(function(){return t.sc(e)}).next(function(n){return t.isPrimary&&!n?t.ic(e).next(function(){return!1}):!!n&&t.rc(e).next(function(){return!0})})}).catch(function(e){if(pa(e))return gr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return gr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Cs.Mi(function(){return t.Qo(e)}),t.isPrimary=e})},t.prototype.nc=function(t){var e=this;return Mu(t).get(au.key).next(function(t){return Zs.resolve(e.oc(t))})},t.prototype.cc=function(t){return Fu(t).delete(this.clientId)},t.prototype.uc=function(){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.Ys(e,_u.store);return n.ui().next(function(t){var e=o.hc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return Zs.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=i.sent(),this.zo)for(n=0,r=e;n<r.length;n++)this.zo.removeItem(this.lc(r[n].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.Ho().then(function(){return t.uc()}).then(function(){return t.Xo()})})},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?Zs.resolve(!0):Mu(t).get(au.key).next(function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new Or(Er.FAILED_PRECONDITION,Pu);return!1}}return!(!e.networkEnabled||!e.inForeground)||Fu(t).ui().next(function(t){return void 0===e.hc(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&gr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.fc=function(){return Object(i.b)(this,void 0,void 0,function(){var t=this;return Object(i.d)(this,function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[au.store,_u.store],function(e){var n=new Du(e,ua.Ds);return t.ic(n).next(function(){return t.cc(n)})})];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}})})},t.prototype.hc=function(t,e){var n=this;return t.filter(function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)})},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Fu(e).ui().next(function(e){return t.hc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Wa.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r,i=this;return gr("IndexedDbPersistence","Starting transaction:",t),this.Wo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Ou,function(o){return r=new Du(o,i.ko?i.ko.next():ua.Ds),"readwrite-primary"===e?i.nc(r).next(function(t){return!!t||i.sc(r)}).next(function(e){if(!e)throw vr("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.Qo(!1)}),new Or(Er.FAILED_PRECONDITION,ia);return n(r)}).next(function(t){return i.rc(r).next(function(){return t})}):i.yc(r).next(function(){return n(r)})}).then(function(t){return r.ns(),t})},t.prototype.yc=function(t){var e=this;return Mu(t).get(au.key).next(function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Or(Er.FAILED_PRECONDITION,Pu)})},t.prototype.rc=function(t){var e=new au(this.clientId,this.allowTabSynchronization,Date.now());return Mu(t).put(au.key,e)},t.Gs=function(){return la.Gs()},t.prototype.ic=function(t){var e=this,n=Mu(t);return n.get(au.key).next(function(t){return e.oc(t)?(gr("IndexedDbPersistence","Releasing primary lease."),n.delete(au.key)):Zs.resolve()})},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(vr("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()})},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri(function(){return e.fc()})},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return gr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return vr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){vr("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Mu(t){return Lu.Ys(t,au.store)}function Fu(t){return Lu.Ys(t,_u.store)}var Uu=function(){function t(t,e){this.db=t,this.cr=new ka(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Vc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,function(t,n){return e(n)})},t.prototype.Do=function(t,e,n){return Vu(t,n)},t.prototype.No=function(t,e,n){return Vu(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return Vu(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return Ja(t).fi(function(r){return Ka(t,r,e).next(function(t){return t&&(n=!0),Zs.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,function(s,a){if(a<=e){var u=n.bc(t,s).next(function(e){if(!e)return o++,r.Jn(t,s).next(function(){return r.Hn(s),Ru(t).delete([0,Na(s.path)])})});i.push(u)}}).next(function(){return Zs.qn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return Vu(t,e)},t.prototype.vc=function(t,e){var n,r=Ru(t),i=ua.Ds;return r._i({index:vu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==ua.Ds&&e(new Vr(Ra(n)),i),i=s,n=o):i=ua.Ds}).next(function(){i!==ua.Ds&&e(new Vr(Ra(n)),i)})},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function Vu(t,e){return Ru(t).put(function(t,e){return new vu(0,Na(t.path),e)}(e,t.Fo))}function qu(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Hu=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new ni(jr),this.Nc=new Ys(function(t){return Kr(t)},Gr),this.xc=Dr.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new sa(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Rr(n,e.Cc)})},t}();function Bu(t,e,n,r){return new Hu(t,e,n,r)}function zu(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=wr(t),r=n.rs,o=n.Oc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var i;return n.rs.Mr(t).next(function(s){return i=s,r=n.persistence.mc(e),o=new sa(n.Fc,r,n.persistence.Pc()),r.Mr(t)}).next(function(e){for(var n=[],r=[],s=di(),a=0,u=i;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];r.push(d.batchId);for(var g=0,v=d.mutations;g<v.length;g++)s=s.add(v[g].key)}return o._s(t,s).next(function(t){return{kc:t,$c:n,Lc:r}})})})];case 1:return s=i.sent(),[2,(n.rs=r,n.Oc=o,n.Dc.Mc(n.Oc),s)]}})})}function Wu(t,e){var n=wr(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Zs.resolve();return o.forEach(function(t){s=s.next(function(){return r.Jn(e,t)}).next(function(e){var o=e,s=n.Sn.get(t);_r(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)})}),s.next(function(){return t.rs.$r(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}function Ku(t){var e=wr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.jo.To(t)})}function Gu(t,e){var n=wr(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.jo.Co(t,e.de,o).next(function(){return n.jo.So(t,e._e,o)}));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return _r(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.jo.yo(t,c))}}});var a=ui();if(e.ce.forEach(function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))}),s.push(function(t,e,n,r,i){var o=di();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=ui();return n.forEach(function(n,o){var s=t.get(n),a=r;o instanceof vs&&o.version.isEqual(Dr.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):gr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.ce,r).next(function(t){a=t})),!r.isEqual(Dr.min())){var u=n.jo.To(t).next(function(e){return n.jo.mo(t,t.Fo,r)});s.push(u)}return Zs.qn(s).next(function(){return o.apply(t)}).next(function(){return n.Oc.fs(t,a)})}).then(function(t){return n.Cc=i,t})}function Qu(t,e){var n=wr(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)})}function $u(t,e){var n=wr(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.jo.bo(t,e).next(function(i){return i?Zs.resolve(r=i):n.jo.fo(t).next(function(i){return r=new Yr(e,i,0,t.Fo),n.jo.Ao(t,r).next(function(){return r})})})}).then(function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t})}function Ju(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:r=wr(t),o=r.Cc.get(e),s=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(t){return r.persistence.Vr.removeTarget(t,o)})];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!pa(a=i.sent()))throw a;return gr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Cc=r.Cc.remove(e),r.Nc.delete(o.target),[2]}})})}function Xu(t,e,n){var r=wr(t),i=Dr.min(),o=di();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=wr(t),i=r.Nc.get(n);return void 0!==i?Zs.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,Ss(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Dc.ws(t,e,n?i:Dr.min(),n?o:di())}).next(function(t){return{documents:t,Bc:o}})})}function Yu(t,e){var n=wr(t),r=wr(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function Zu(t){var e=wr(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=wr(t),i=ui(),o=Ma(n),s=tu(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:pu.readTimeIndex,range:a},function(t,e){var n=Da(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{qc:i,readTime:Fa(o)}})}(e.Fc,t,e.xc)}).then(function(t){var n=t.qc;return e.xc=t.readTime,n})}function tc(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){return[2,(e=wr(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=tu(t),n=Dr.min();return e._i({index:pu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Fa(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.xc=t})]})})}function ec(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){if(t.code!==Er.FAILED_PRECONDITION||t.message!==ia)throw t;return gr("LocalStore","Unexpectedly lost primary lease"),[2]})})}var nc=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new ca(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,function(){return t.Xc()}))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.zc()?[2,this.close(0)]:[2]})})},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():e&&e.code===Er.RESOURCE_EXHAUSTED?(vr(e.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===Er.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(e)];case 1:return n.sent(),[2]}})})},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then(function(e){t.Wc===n&&t.iu(e)},function(n){e(function(){var e=new Or(Er.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)})})},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu(function(){n(function(){return e.state=2,e.listener.cu()})}),this.stream.nu(function(t){n(function(){return e.ru(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs(function(){return Object(i.b)(t,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.ru=function(t){return gr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri(function(){return e.Wc===t?n():(gr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),rc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(i.c)(e,t),e.prototype.ou=function(t){return this.Qc.uu("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:br()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(_r(void 0===e||"string"==typeof e),$r.fromBase64String(e||"")):(_r(void 0===e||e instanceof Uint8Array),$r.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Er.UNKNOWN:ei(t.code);return new Or(e,t.message||"")}(s);n=new Ci(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=ho(t,u.document.name),l=ao(u.document.updateTime),h=new hs({mapValue:{fields:u.document.fields}}),f=new gs(c,l,h,{});n=new Ei(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var p=e.documentDelete,d=ho(t,p.document),g=p.readTime?ao(p.readTime):Dr.min(),v=new vs(d,g);n=new Ei([],p.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){var m=e.documentRemove,y=ho(t,m.document);n=new Ei([],m.removedTargetIds||[],y,null)}else{if(!("filter"in e))return br();var b=e.filter,_=new Zr(b.count||0);n=new Oi(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Dr.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Dr.min():e.readTime?ao(e.readTime):Dr.min()}(t);return this.listener.au(e,n)},e.prototype.hu=function(t){var e={};e.database=go(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Qr(r)?{documents:_o(t,r)}:{query:wo(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=oo(t,e.resumeToken):e.ft.F(Dr.min())>0&&(n.readTime=io(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return br()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Zc(e)},e.prototype.lu=function(t){var e={};e.database=go(this.serializer),e.removeTarget=t,this.Zc(e)},e}(nc),ic=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.eu=function(){this._u&&this.du([])},e.prototype.ou=function(t){return this.Qc.uu("Write",t)},e.prototype.onMessage=function(t){if(_r(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(_r(void 0!==e),t.map(function(t){return function(t,e){var n=ao(t.updateTime?t.updateTime:e);n.isEqual(Dr.min())&&(n=ao(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Qo(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=ao(t.commitTime);return this.listener.wu(n,e)}return _r(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},e.prototype.Tu=function(){var t={};t.database=go(this.serializer),this.Zc(t)},e.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return yo(e.serializer,t)})};this.Zc(n)},e}(nc),oc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(i.c)(e,t),e.prototype.mu=function(){if(this.Iu)throw new Or(Er.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Au(t,e,n,i)}).catch(function(t){throw t.code===Er.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Ru(t,e,n,i)}).catch(function(t){throw t.code===Er.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.terminate=function(){this.Iu=!1},e}(function(){}),sc=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()}))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(vr(e),this.Vu=!1):gr("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),ac=function(t,e,n,r,o){var s=this;this.Cu=t,this.Nu=e,this.di=n,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=o,this.$u.Lu(function(t){n.Ri(function(){return Object(i.b)(s,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return vc(this)?(gr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return(e=wr(t)).Mu.add(4),[4,cc(e)];case 1:return n.sent(),e.Bu.set("Unknown"),e.Mu.delete(4),[4,uc(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Bu=new sc(n,r)};function uc(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:if(!vc(t))return[3,4];e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function cc(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lc(t,e){var n=wr(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),gc(n)?dc(n):jc(n).zc()&&fc(n,e))}function hc(t,e){var n=wr(t),r=jc(n);n.Ou.delete(e),r.zc()&&pc(n,e),0===n.Ou.size&&(r.zc()?r.Yc():vc(n)&&n.Bu.set("Unknown"))}function fc(t,e){t.qu.De(e.targetId),jc(t).hu(e)}function pc(t,e){t.qu.De(e),jc(t).lu(e)}function dc(t){t.qu=new Ii({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),jc(t).start(),t.Bu.pu()}function gc(t){return vc(t)&&!jc(t).Gc()&&t.Ou.size>0}function vc(t){return 0===wr(t).Mu.size}function mc(t){t.qu=void 0}function yc(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){return t.Ou.forEach(function(e,n){fc(t,e)}),[2]})})}function bc(t,e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){return mc(t),gc(t)?(t.Bu.Su(e),dc(t)):t.Bu.set("Unknown"),[2]})})}function _c(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s;return Object(i.d)(this,function(a){switch(a.label){case 0:if(t.Bu.set("Online"),!(e instanceof Ci&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?t.Ou.has(s=o[r])?[4,t.xu.Uu(s,n)]:[3,3]:[3,5];case 2:i.sent(),t.Ou.delete(s),t.qu.removeTarget(s),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),gr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,wc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ei?t.qu.$e(e):e instanceof Oi?t.qu.je(e):t.qu.qe(e),n.isEqual(Dr.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ku(t.Cu)];case 8:return o=a.sent(),n.F(o)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach(function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}}),n.oe.forEach(function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt($r.lt,n.ft)),pc(t,e);var r=new Yr(n.target,e,1,n.sequenceNumber);fc(t,r)}}),t.xu.Qu(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return gr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,wc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function wc(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r=this;return Object(i.d)(this,function(o){switch(o.label){case 0:if(!pa(e))throw e;return t.Mu.add(1),[4,cc(t)];case 1:return o.sent(),t.Bu.set("Offline"),n||(n=function(){return Ku(t.Cu)}),t.di.Mi(function(){return Object(i.b)(r,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return gr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Mu.delete(1),[4,uc(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ec(t,e){return e().catch(function(n){return wc(t,n,e)})}function Oc(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:e=wr(t),n=xc(e),r=e.Fu.length>0?e.Fu[e.Fu.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return vc(t)&&t.Fu.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,Qu(e.Cu,r)];case 3:return null===(o=i.sent())?(0===e.Fu.length&&n.Yc(),[3,7]):(r=o.batchId,function(t,e){t.Fu.push(e);var n=xc(t);n.zc()&&n.fu&&n.du(e.mutations)}(e,o),[3,6]);case 4:return s=i.sent(),[4,wc(e,s)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return Cc(e)&&Tc(e),[2]}})})}function Cc(t){return vc(t)&&!xc(t).Gc()&&t.Fu.length>0}function Tc(t){xc(t).start()}function Ic(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){return xc(t).Tu(),[2]})})}function Sc(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(i){for(e=xc(t),n=0,r=t.Fu;n<r.length;n++)e.du(r[n].mutations);return[2]})})}function Ac(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return r=t.Fu.shift(),o=Xs.from(r,e,n),[4,Ec(t,function(){return t.xu.Ku(o)})];case 1:return i.sent(),[4,Oc(t)];case 2:return i.sent(),[2]}})})}function kc(t,e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return e&&xc(t).fu?[4,function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return ti(r=e.code)&&r!==Er.ABORTED?(n=t.Fu.shift(),xc(t).Jc(),[4,Ec(t,function(){return t.xu.Wu(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Oc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Cc(t)&&Tc(t),[2]}})})}function Nc(t,e){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return n=wr(t),e?(n.Mu.delete(2),[4,uc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Mu.add(2),[4,cc(n)]);case 3:r.sent(),n.Bu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function jc(t){var e=this;return t.ju||(t.ju=function(t,e,n){var r=wr(t);return r.mu(),new rc(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:yc.bind(null,t),nu:bc.bind(null,t),au:_c.bind(null,t)}),t.ku.push(function(n){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return n?(t.ju.Jc(),gc(t)?dc(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),mc(t),e.label=3;case 3:return[2]}})})})),t.ju}function xc(t){var e=this;return t.Gu||(t.Gu=function(t,e,n){var r=wr(t);return r.mu(),new ic(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:Ic.bind(null,t),nu:kc.bind(null,t),Eu:Sc.bind(null,t),wu:Ac.bind(null,t)}),t.ku.push(function(n){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return n?(t.Gu.Jc(),[4,Oc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(gr("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}})})})),t.Gu}var Rc=function(){this.zu=void 0,this.listeners=[]},Pc=function(){this.queries=new Ys(function(t){return Ns(t)},ks),this.onlineState="Unknown",this.Hu=new Set};function Dc(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u,c;return Object(i.d)(this,function(i){switch(i.label){case 0:if(n=wr(t),o=!1,(s=n.queries.get(r=e.query))||(o=!0,s=new Rc),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),a=s,[4,n.Ju(r)];case 2:return a.zu=i.sent(),[3,4];case 3:return u=i.sent(),c=Oa(u,"Initialization of query '"+js(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.Yu(n.onlineState),s.zu&&e.Xu(s.zu)&&Uc(n),[2]}})})}function Lc(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){return n=wr(t),o=!1,(s=n.queries.get(r=e.query))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(r),n.Zu(r))]:[2]})})}function Mc(t,e){for(var n=wr(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Xu(s)&&(r=!0);a.zu=s}}r&&Uc(n)}function Fc(t,e,n){var r=wr(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Uc(t){t.Hu.forEach(function(t){t.next()})}var Vc=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new bi(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){return!t.fromCache||!(this.options.oa&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){return t.docChanges.length>0||!!(t.ne||this.na&&this.na.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=bi.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),qc=function(){function t(){this.ca=new oi(Hc.ua),this.aa=new oi(Hc.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new Hc(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach(function(t){return n.Do(t,e)})},t.prototype.No=function(t,e){this._a(new Hc(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach(function(t){return n.No(t,e)})},t.prototype.da=function(t){var e=this,n=new Vr(new Mr([])),r=new Hc(n,t),i=new Hc(n,t+1),o=[];return this.aa.Kt([r,i],function(t){e._a(t),o.push(t.key)}),o},t.prototype.wa=function(){var t=this;this.ca.forEach(function(e){return t._a(e)})},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new Vr(new Mr([])),n=new Hc(e,t),r=new Hc(e,t+1),i=di();return this.aa.Kt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Qr=function(t){var e=new Hc(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Hc=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return Vr.$(t.key,e.key)||jr(t.Ta,e.Ta)},t.ha=function(t,e){return jr(t.Ta,e.Ta)||Vr.$(t.key,e.key)},t}();function Bc(t,e){return"firestore_clients_"+t+"_"+e}function zc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function Wc(t,e){return"firestore_targets_"+t+"_"+e}var Kc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Or(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(vr("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Or(r.error.code,r.error.message)),i?new t(e,r.state,o):(vr("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vi(),s=0;i&&s<r.activeTargetIds.length;++s)i=Br(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(vr("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$c=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(vr("SharedClientState","Failed to parse online state: "+e),null)},t}(),Jc=function(){function t(){this.activeTargetIds=vi()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Xc=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new ni(jr),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=Bc(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new Jc),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e,n,r,o,s,a,u,c,l,h=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,this.ga.Ic()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pa&&(o=this.getItem(Bc(this.persistenceKey,r)))&&(s=Qc.Ia(r,o))&&(this.pa=this.pa.Tt(s.clientId,s));for(this.Oa(),(a=this.storage.getItem(this.xa))&&(u=this.Ma(a))&&this.ka(u),c=0,l=this.va;c<l.length;c++)this.Va(l[c]);return this.va=[],this.window.addEventListener("unload",function(){return h.fc()}),this.lr=!0,[2]}})})},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(Wc(this.persistenceKey,t));if(n){var r=Gc.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(Wc(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach(function(t){r.Ka(t)}),this.currentUser=t,n.forEach(function(t){r.qa(t)})},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return gr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){gr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){gr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(gr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ba)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return Object(i.b)(e,void 0,void 0,function(){var t,e,r,o,s,a;return Object(i.d)(this,function(i){if(this.lr){if(null!==n.key)if(this.Da.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Ca.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.uh(r)]}else if(this.Na.test(n.key)){if(null!==n.newValue&&(o=this.ah(n.key,n.newValue)))return[2,this.hh(o)]}else if(n.key===this.xa){if(null!==n.newValue&&(s=this.Ma(n.newValue)))return[2,this.ka(s)]}else if(n.key===this.Sa)(a=function(t){var e=ua.Ds;if(null!=t)try{var n=JSON.parse(t);_r("number"==typeof n),e=n}catch(t){vr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==ua.Ds&&this.ps(a);else if(n.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new Kc(this.currentUser,t,e,n),i=zc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=zc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xa,JSON.stringify({clientId:this.Pa,onlineState:t}))},t.prototype.Ya=function(t,e,n){var r=Wc(this.persistenceKey,t),i=new Gc(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Qc.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]);return Kc.Ia(new fr(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return Gc.Ia(r,e)},t.prototype.Ma=function(t){return $c.Ia(t)},t.prototype.uh=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(gr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.ga.dh(s,a).then(function(){n.pa=r})},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=vi();return t.forEach(function(t,n){e=e.Gt(n.activeTargetIds)}),e},t}(),Yc=function(){function t(){this.wh=new Jc,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Jc,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),Zc=function(t){this.key=t},tl=function(t){this.key=t},el=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=di(),this.ee=di(),this.Ah=Rs(t),this.Rh=new mi(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new yi,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,a=!1,u=ws(this.query)&&i.size===this.query.limit?i.last():null,c=Es(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt(function(t,e){var l=i.get(t),h=e instanceof gs?e:null;h&&(h=xs(n.query,h)?h:null);var f=!!l&&n.ee.has(l.key),p=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Vh(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.Ah(h,u)>0||c&&n.Ah(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ws(this.query)||Es(this.query))for(;s.size>this.query.limit;){var l=ws(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Rh:s,yh:r,ph:a,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return br()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)}),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.le?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new bi(this.query,t.Rh,i,o,t.ee,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new yi,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Th=e.Th.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Th=e.Th.delete(t)}),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=di(),this.Rh.forEach(function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))});var n=[];return e.forEach(function(e){t.mh.has(e)||n.push(new tl(e))}),this.mh.forEach(function(t){e.has(t)||n.push(new Zc(t))}),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=di();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return bi.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),nl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},rl=function(t){this.key=t,this.Fh=!1},il=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new Ys(function(t){return Ns(t)},ks),this.qh=new Map,this.Uh=[],this.Qh=new ni(Vr.$),this.Kh=new Map,this.Wh=new qc,this.jh={},this.Gh=new Map,this.zh=ku._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function ol(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=Pl(t),(o=n.Bh.get(e))?(n.kh.Wa(o.targetId),r=o.view.xh(),[3,4]):[3,1];case 1:return[4,$u(n.Cu,Ss(e))];case 2:return s=i.sent(),a=n.kh.Wa(s.targetId),[4,sl(n,e,s.targetId,"current"===a)];case 3:r=i.sent(),n.Jh&&lc(n.Oh,s),i.label=4;case 4:return[2,r]}})})}function sl(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s,a,u,c,l;return Object(i.d)(this,function(h){switch(h.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return(o=e.view.gh(n)).ph?[4,Xu(t.Cu,e.query,!1).then(function(t){return e.view.gh(t.documents,o)})]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return s=r&&r.re.get(e.targetId),a=e.view.Zn(o,t.Jh,s),[2,(bl(t,e.targetId,a.Dh),a.snapshot)]}})})}(t,e,n,r)},[4,Xu(t.Cu,e,!0)];case 1:return o=h.sent(),s=new el(e,o.Bc),a=s.gh(o.documents),u=wi.he(n,r&&"Offline"!==t.onlineState),c=s.Zn(a,t.Jh,u),bl(t,n,c.Dh),l=new nl(e,n,s),[2,(t.Bh.set(e,l),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),c.snapshot)]}})})}function al(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=wr(t),r=n.Bh.get(e),(o=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,o.filter(function(t){return!ks(t,e)})),void n.Bh.delete(e))]:n.Jh?(n.kh.Ga(r.targetId),n.kh.Ba(r.targetId)?[3,2]:[4,Ju(n.Cu,r.targetId,!1).then(function(){n.kh.Ha(r.targetId),hc(n.Oh,r.targetId),ml(n,r.targetId)}).catch(ec)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return ml(n,r.targetId),[4,Ju(n.Cu,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}})})}function ul(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:r=Dl(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=wr(t),i=Pr.now(),o=e.reduce(function(t,e){return t.add(e.key)},di());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Oc._s(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ts(c,n.get(c.key));null!=l&&s.push(new is(c.key,l,ps(l.proto.mapValue),$o.exists(!0)))}return r.rs.Sr(t,i,s,e)})}).then(function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}})}(r.Cu,e)];case 2:return o=i.sent(),r.kh.qa(o.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new ni(jr)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(r,o.batchId,n),[4,El(r,o.Qn)];case 3:return i.sent(),[4,Oc(r.Oh)];case 4:return i.sent(),[3,6];case 5:return s=i.sent(),a=Oa(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function cl(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:n=wr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Gu(n.Cu,e)];case 2:return r=i.sent(),e.re.forEach(function(t,e){var r=n.Kh.get(e);r&&(_r(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.Fh=!0:t.fe.size>0?_r(r.Fh):t.de.size>0&&(_r(r.Fh),r.Fh=!1))}),[4,El(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,ec(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function ll(t,e,n){var r=wr(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach(function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=wr(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)}),r&&Uc(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function hl(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a,u,c;return Object(i.d)(this,function(i){switch(i.label){case 0:return(r=wr(t)).kh.Ja(e,"rejected",n),o=r.Kh.get(e),(s=o&&o.key)?(a=(a=new ni(Vr.$)).Tt(s,new vs(s,Dr.min())),u=di().add(s),c=new _i(Dr.min(),new Map,new oi(jr),a,u),[4,cl(r,c)]):[3,2];case 1:return i.sent(),r.Qh=r.Qh.remove(s),r.Kh.delete(e),wl(r),[3,4];case 2:return[4,Ju(r.Cu,e,!1).then(function(){return ml(r,e,n)}).catch(ec)];case 3:i.sent(),i.label=4;case 4:return[2]}})})}function fl(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:n=wr(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wu(n.Cu,e)];case 2:return o=i.sent(),vl(n,r,null),gl(n,r),n.kh.Qa(r,"acknowledged"),[4,El(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,ec(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function pl(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:r=wr(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.rs.Cr(t,e).next(function(e){return _r(null!==e),r=e.keys(),n.rs.$r(t,e)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}(r.Cu,e)];case 2:return o=i.sent(),vl(r,e,n),gl(r,e),r.kh.Qa(e,"rejected",n),[4,El(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,ec(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function dl(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:vc((n=wr(t)).Oh)||gr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=wr(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Or(t)})}(n.Cu)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.Gh.get(r)||[]).push(e),n.Gh.set(r,o),[3,4]);case 3:return s=i.sent(),a=Oa(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}function gl(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function vl(t,e,n){var r=wr(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function ml(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach(function(e){t.Wh.Qr(e)||yl(t,e)})}function yl(t,e){var n=t.Qh.get(e);null!==n&&(hc(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),wl(t))}function bl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Zc?(t.Wh.Do(o.key,e),_l(t,o)):o instanceof tl?(gr("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||yl(t,o.key)):br()}}function _l(t,e){var n=e.key;t.Qh.get(n)||(gr("SyncEngine","New document in limbo: "+n),t.Uh.push(n),wl(t))}function wl(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new rl(e)),t.Qh=t.Qh.Tt(e,n),lc(t.Oh,new Yr(Ss(_s(e.path)),n,2,ua.Ds))}}function El(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a;return Object(i.d)(this,function(u){switch(u.label){case 0:return r=wr(t),o=[],s=[],a=[],r.Bh.W()?[3,3]:(r.Bh.forEach(function(t,i){a.push(r.Yh(i,e,n).then(function(t){if(t){r.Jh&&r.kh.Ja(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=aa.Vs(i.targetId,t);s.push(e)}}))}),[4,Promise.all(a)]);case 1:return u.sent(),r.Lh.au(o),[4,function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u,c,l;return Object(i.d)(this,function(i){switch(i.label){case 0:n=wr(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Zs.forEach(e,function(e){return Zs.forEach(e.gs,function(r){return n.persistence.Vr.Do(t,e.targetId,r)}).next(function(){return Zs.forEach(e.ys,function(r){return n.persistence.Vr.No(t,e.targetId,r)})})})})];case 2:return i.sent(),[3,4];case 3:if(!pa(r=i.sent()))throw r;return gr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,s=e;o<s.length;o++)u=(a=s[o]).targetId,a.fromCache||(c=n.Cc.get(u),l=c.Et(c.ft),n.Cc=n.Cc.Tt(u,l));return[2]}})})}(r.Cu,s)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function Ol(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return(n=wr(t)).currentUser.isEqual(e)?[3,3]:(gr("SyncEngine","User change. New user:",e.h()),[4,zu(n.Cu,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach(function(t){t.forEach(function(t){t.reject(new Or(Er.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Gh.clear()}(n),n.kh.Xa(e,r.$c,r.Lc),[4,El(n,r.kc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Cl(t,e){var n=wr(t),r=n.Kh.get(e);if(r&&r.Fh)return di().add(r.key);var i=di(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Bh.get(a[s]);i=i.Gt(u.view.Ph)}return i}function Tl(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Xu((n=wr(t)).Cu,e.query,!0)];case 1:return r=i.sent(),o=e.view.Nh(r),[2,(n.Jh&&bl(n,e.targetId,o.Dh),o)]}})})}function Il(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){return[2,Zu((e=wr(t)).Cu).then(function(t){return El(e,t)})]})})}function Sl(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,function(t,e){var n=wr(t),r=wr(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Nr(t,e).next(function(e){return e?n.Oc._s(t,e):Zs.resolve(null)})})}((o=wr(t)).Cu,e)];case 1:return null===(s=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,Oc(o.Oh)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(vl(o,e,r||null),gl(o,e),function(t,e){wr(wr(t).rs).Br(e)}(o.Cu,e)):br(),i.label=4;case 4:return[4,El(o,s)];case 5:return i.sent(),[3,7];case 6:gr("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}})})}function Al(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u,c;return Object(i.d)(this,function(i){switch(i.label){case 0:return Pl(n=wr(t)),Dl(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$a(),[4,kl(n,r.H())]);case 1:return o=i.sent(),n.Hh=!0,[4,Nc(n.Oh,!0)];case 2:for(i.sent(),s=0,a=o;s<a.length;s++)lc(n.Oh,a[s]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(u=[],c=Promise.resolve(),n.qh.forEach(function(t,e){n.kh.za(e)?u.push(e):c=c.then(function(){return ml(n,e),Ju(n.Cu,e,!0)}),hc(n.Oh,e)}),[4,c]);case 4:return i.sent(),[4,kl(n,u)];case 5:return i.sent(),function(t){var e=wr(t);e.Kh.forEach(function(t,n){hc(e.Oh,n)}),e.Wh.wa(),e.Kh=new Map,e.Qh=new ni(Vr.$)}(n),n.Hh=!1,[4,Nc(n.Oh,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}})})}function kl(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u,c,l,h,f,p,d,g;return Object(i.d)(this,function(i){switch(i.label){case 0:n=wr(t),r=[],o=[],s=0,a=e,i.label=1;case 1:return s<a.length?(c=void 0,(l=n.qh.get(u=a[s]))&&0!==l.length?[4,$u(n.Cu,Ss(l[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,f=l,i.label=3;case 3:return h<f.length?(p=n.Bh.get(f[h]),[4,Tl(n,p)]):[3,6];case 4:(d=i.sent()).snapshot&&o.push(d.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Yu(n.Cu,u)];case 8:return g=i.sent(),[4,$u(n.Cu,g)];case 9:return c=i.sent(),[4,sl(n,Nl(g),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Lh.au(o),r)]}})})}function Nl(t){return bs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jl(t){var e=wr(t);return wr(wr(e.Cu).persistence).Ic()}function xl(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return(o=wr(t)).Hh?(gr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zu(o.Cu)];case 3:return s=i.sent(),a=_i.ae(e,"current"===n),[4,El(o,s,a)];case 4:return i.sent(),[3,8];case 5:return[4,Ju(o.Cu,e,!0)];case 6:return i.sent(),ml(o,e,r),[3,8];case 7:br(),i.label=8;case 8:return[2]}})})}function Rl(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a,u,c,l,h,f;return Object(i.d)(this,function(p){switch(p.label){case 0:if(!(r=Pl(t)).Hh)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?r.qh.has(a=s[o])?(gr("SyncEngine","Adding an already active target "+a),[3,5]):[4,Yu(r.Cu,a)]:[3,6];case 2:return u=p.sent(),[4,$u(r.Cu,u)];case 3:return c=p.sent(),[4,sl(r,Nl(u),c.targetId,!1)];case 4:p.sent(),lc(r.Oh,c),p.label=5;case 5:return o++,[3,1];case 6:l=function(t){return Object(i.d)(this,function(e){switch(e.label){case 0:return r.qh.has(t)?[4,Ju(r.Cu,t,!1).then(function(){hc(r.Oh,t),ml(r,t)}).catch(ec)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},h=0,f=n,p.label=7;case 7:return h<f.length?[5,l(f[h])]:[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}})})}function Pl(t){var e=wr(t);return e.Oh.xu.Qu=cl.bind(null,e),e.Oh.xu.Xe=Cl.bind(null,e),e.Oh.xu.Uu=hl.bind(null,e),e.Lh.au=Mc.bind(null,e.Mh),e.Lh.Xh=Fc.bind(null,e.Mh),e}function Dl(t){var e=wr(t);return e.Oh.xu.Ku=fl.bind(null,e),e.Oh.xu.Wu=pl.bind(null,e),e}var Ll=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(Dr.min())?this.tl(t,e):this.Zh._s(t,r).next(function(s){var a=i.el(e,s);return(ws(e)||Es(e))&&i.ph(e.limitType,a,r,n)?i.tl(t,e):(dr()<=o.a.DEBUG&&gr("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),js(e)),i.Zh.ws(t,e,n).next(function(t){return a.forEach(function(e){t=t.Tt(e.key,e)}),t}))})},t.prototype.el=function(t,e){var n=new oi(Rs(t));return e.forEach(function(e,r){r instanceof gs&&xs(t,r)&&(n=n.add(r))}),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return dr()<=o.a.DEBUG&&gr("IndexFreeQueryEngine","Using full collection scan to execute query:",js(e)),this.Zh.ws(t,e,Dr.min())},t}(),Ml=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new oi(Hc.ua)}return t.prototype.br=function(t){return Zs.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new Js(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Hc(u.key,i)),this.os.Dr(t,u.key.path.q())}return Zs.resolve(o)},t.prototype.Cr=function(t,e){return Zs.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return Zs.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Or=function(){return Zs.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return Zs.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Hc(e,0),i=new Hc(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],function(t){var e=n.il(t.Ta);o.push(e)}),Zs.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new oi(jr);return e.forEach(function(t){var e=new Hc(t,0),i=new Hc(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],function(t){r=r.add(t.Ta)})}),Zs.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;Vr.ot(i)||(i=i.child(""));var o=new Hc(new Vr(i),0),s=new oi(jr);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)},o),Zs.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.$r=function(t,e){var n=this;_r(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Zs.forEach(e.mutations,function(i){var o=new Hc(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)}).next(function(){n.sl=r})},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new Hc(e,0),r=this.sl.jt(n);return Zs.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return Zs.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Fl=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new ni(Vr.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Zs.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=ci();return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),Zs.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=hi(),i=new Vr(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof gs&&xs(e,u)&&(r=r.Tt(u.key,u))}return Zs.resolve(r)},t.prototype.al=function(t,e){return Zs.forEach(this.docs,function(t){return e(t)})},t.prototype.Xr=function(t){return new Ul(this)},t.prototype.eo=function(t){return Zs.resolve(this.size)},t}(),Ul=function(t){function e(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(i.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach(function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)}),Zs.qn(n)},e.prototype.Yn=function(t,e){return this.no.Jn(t,e)},e.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},e}(ta),Vl=function(){function t(t){this.persistence=t,this.hl=new Ys(function(t){return Kr(t)},Gr),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.ll=0,this._l=new qc,this.targetCount=0,this.fl=ku.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),Zs.resolve()},t.prototype.To=function(t){return Zs.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return Zs.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),Zs.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Zs.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new ku(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,Zs.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),Zs.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,Zs.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.po(t,a.targetId)),i++)}),Zs.qn(o).next(function(){return i})},t.prototype.vo=function(t){return Zs.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return Zs.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),Zs.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach(function(e){i.push(r.qr(t,e))}),Zs.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),Zs.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return Zs.resolve(n)},t.prototype.Qr=function(t,e){return Zs.resolve(this._l.Qr(e))},t}(),ql=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return Zs.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:ao(n.createTime)}),Zs.resolve()},t.prototype.co=function(t,e){return Zs.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:za(n.bundledQuery),readTime:ao(n.readTime)}),Zs.resolve()},t}(),Hl=function(){function t(t,e){var n=this;this.El={},this.ko=new ua(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new Vl(this),this.os=new ru,this.ss=function(t,e){return new Fl(t,function(t){return n.Vr.Tl(t)})}(this.os),this.serializer=new Pa(e),this.Go=new ql(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new Ml(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;gr("MemoryPersistence","Starting transaction:",t);var i=new Bl(this.ko.next());return this.Vr.Il(),n(i).next(function(t){return r.Vr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},t.prototype.Al=function(t,e){return Zs.Un(Object.values(this.El).map(function(n){return function(){return n.Qr(t,e)}}))},t}(),Bl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(i.c)(e,t),e}(oa),zl=function(){function t(t){this.persistence=t,this.Rl=new qc,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw br()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),Zs.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),Zs.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),Zs.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Ac();return r.xo(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Vo(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return Zs.forEach(this.yl,function(r){var i=Vr.st(r);return e.Vl(t,i).next(function(t){t||n.Hn(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Zs.Un([function(){return Zs.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Wl=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Kl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(i.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new ur;s.listenOnce(or.COMPLETE,function(){try{switch(s.getLastErrorCode()){case ir.NO_ERROR:var e=s.getResponseJson();gr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ir.TIMEOUT:gr("Connection",'RPC "'+t+'" timed out'),o(new Or(Er.DEADLINE_EXCEEDED,"Request time out"));break;case ir.HTTP_ERROR:var n=s.getStatus();if(gr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Er).indexOf(e)>=0?e:Er.UNKNOWN}(r.status);o(new Or(a,r.message))}else o(new Or(Er.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Or(Er.UNAVAILABLE,"Connection failed."));break;default:br()}}finally{gr("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Zn,i=ee(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(s.x)()||Object(s.A)()||Object(s.t)()||Object(s.v)()||Object(s.B)()||Object(s.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");gr("Connection","Creating WebChannel: "+a,o);var u=r.createWebChannel(a,o),c=!1,l=!1,h=new Wl({pl:function(t){l?gr("Connection","Not sending because WebChannel is closed:",t):(c||(gr("Connection","Opening WebChannel transport."),u.open(),c=!0),gr("Connection","WebChannel sending:",t),u.send(t))},vl:function(){return u.close()}}),f=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return f(u,ar.EventType.OPEN,function(){l||gr("Connection","WebChannel transport opened.")}),f(u,ar.EventType.CLOSE,function(){l||(l=!0,gr("Connection","WebChannel transport closed"),h.Nl())}),f(u,ar.EventType.ERROR,function(t){l||(l=!0,mr("Connection","WebChannel transport errored:",t),h.Nl(new Or(Er.UNAVAILABLE,"The operation could not be completed")))}),f(u,ar.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];_r(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){gr("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Jr[t];if(void 0!==e)return ei(e)}(i),s=r.message;void 0===o&&(o=Er.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,h.Nl(new Or(o,s)),u.close()}else gr("Connection","WebChannel received:",n),h.xl(n)}}),f(i,sr.STAT_EVENT,function(t){10===t.stat?gr("Connection","Detected buffering proxy"):11===t.stat&&gr("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Cl()},0),h},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);gr("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return gr("RestConnection","Received: ",t),t},function(e){throw mr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+Kl[t]},t}()),Ql=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){gr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){gr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),$l=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),Jl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return this.serializer=na(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Bu(this.persistence,new Ll,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Hl(zl.gl,this.serializer)},t.prototype.jl=function(t){return new Yc},t.prototype.terminate=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}})})},t}(),Xl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(i.c)(e,t),e.prototype.initialize=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,tc(this.Cu)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Dl(this.Xl.ga)];case 4:return n.sent(),[4,Oc(this.Xl.Oh)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return Bu(this.persistence,new Ll,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Aa(this.persistence.Vr.cr,t.di)},e.prototype.Gl=function(t){var e=qu(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Sa.er(this.cacheSizeBytes):Sa.ir;return new Lu(this.synchronizeTabs,e,t.clientId,n,t.di,ba(),_a(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Yc},e}(Jl),Yl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(i.c)(e,t),e.prototype.initialize=function(e){return Object(i.b)(this,void 0,void 0,function(){var n,r=this;return Object(i.d)(this,function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Xl.ga,this.kh instanceof Xc?(this.kh.ga={_h:Sl.bind(null,n),fh:xl.bind(null,n),dh:Rl.bind(null,n),Ic:jl.bind(null,n),lh:Il.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Zo(function(t){return Object(i.b)(r,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Al(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},e.prototype.jl=function(t){var e=ba();if(!Xc.Gs(e))throw new Or(Er.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qu(t.Fl.t,t.Fl.persistenceKey);return new Xc(e,t.di,n,t.clientId,t.Yl)},e}(Xl),Zl=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.ga=this.n_(e,!t.synchronizeTabs),this.kh.Pu=function(t){return ll(n.ga,t,1)},this.Oh.xu.s_=Ol.bind(null,this.ga),[4,Nc(this.Oh,this.ga.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Pc},t.prototype.Zl=function(t){var e=na(t.Fl.t),n=new Gl(t.Fl);return function(t,e,n){return new oc(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return ll(s.ga,t,0)},o=Ql.Gs()?new Ql:new $l,new ac(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new il(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return e=wr(t),gr("RemoteStore","RemoteStore shutting down."),e.Mu.add(5),[4,cc(e)];case 1:return n.sent(),e.$u.fc(),e.Bu.set("Unknown"),[2]}})})}(this.Oh)},t}(),th=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),eh=function(t){this.o_=t};function nh(t,e,n){if(!n)throw new Or(Er.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function rh(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Or(Er.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ih(t,e,n,r){if(!0===e&&!0===r)throw new Or(Er.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function oh(t){if(!Vr.ot(t))throw new Or(Er.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function sh(t){if(Vr.ot(t))throw new Or(Er.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ah(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":br()}function uh(t,e){if(t instanceof eh&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Or(Er.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ah(t);throw new Or(Er.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ch(t,e){if(e<=0)throw new Or(Er.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var lh=function(t){this.c_=t},hh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.u_=function(t){if(2!==t.a_)throw t.h_(1===t.a_?this.c_+"() can only appear at the top level of your update data":this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(lh);function fh(t,e,n){return new vf({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.u_=function(t){return new Go(t.path,new Fo)},e.prototype.isEqual=function(t){return t instanceof e},e}(lh),dh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(i.c)(e,t),e.prototype.u_=function(t){var e=fh(this,t,!0),n=this.f_.map(function(t){return Ef(t,e)}),r=new Uo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lh),gh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(i.c)(e,t),e.prototype.u_=function(t){var e=fh(this,t,!0),n=this.f_.map(function(t){return Ef(t,e)}),r=new qo(n);return new Go(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(lh),vh=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(i.c)(e,t),e.prototype.u_=function(t){var e=new Bo(t.serializer,ro(t.serializer,this.d_));return new Go(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(lh),mh=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Or(Er.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Or(Er.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return jr(this.w_,t.w_)||jr(this.E_,t.E_)},t}(),yh=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t($r.fromBase64String(e))}catch(e){throw new Or(Er.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t($r.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),bh=new Map,_h=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Or(Er.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Or(Er.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ih("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),wh=function(){function t(t,e){this.I_="(lite)",this.m_=new _h({}),this.A_=!1,t instanceof hr?(this.R_=t,this.P_=new Tr):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Or(Er.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hr(t.options.projectId)}(t),this.P_=new Ir(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new Or(Er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new Or(Er.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new _h(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new Tr;switch(t.type){case"gapi":var e=t.client;return _r(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ar(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Or(Er.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=bh.get(t);e&&(gr("ComponentProvider","Removing Datastore"),bh.delete(t),e.terminate())}(this),Promise.resolve()},t}();function Eh(){if("undefined"==typeof Uint8Array)throw new Or(Er.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Oh(){if("undefined"==typeof atob)throw new Or(Er.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.fromBase64String=function(t){return Oh(),new e(yh.fromBase64String(t))},e.fromUint8Array=function(t){return Eh(),new e(yh.fromUint8Array(t))},e.prototype.toBase64=function(){return Oh(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return Eh(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(eh),Th=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),Li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zi(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(Wi(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw br()}},t.prototype.L_=function(t,e){var n=this,r={};return Ni(t.fields||{},function(t,i){r[t]=n.C_(i,e)}),r},t.prototype.M_=function(t){return new mh(zi(t.latitude),zi(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.C_(t,e)})},t.prototype.x_=function(t,e){switch(e){case"previous":var n=Ri(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(Pi(t));default:return null}},t.prototype.N_=function(t){var e=Bi(t);return new Pr(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=Mr.Y(t);_r(Ro(n));var r=new hr(n.get(1),n.get(3)),i=new Vr(n.B(5));return r.isEqual(e)||vr("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Ih=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(i.c)(e,t),e.prototype.F_=function(t){return new Ch(new yh(t))},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return tp.q_(e,this.firestore,null)},e}(Th),Sh=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zh(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new Ah(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(kh("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),Ah=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Sh);function kh(t,e){return"string"==typeof e?Af(t,e):e instanceof eh?e.o_.G_:e.G_}var Nh=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Or(Er.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new Ur(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),jh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new Ea,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(i.c)(e,t),e.prototype.D_=function(){return this.H_||Xf(this),this.H_.terminate()},e}(wh);function xh(t,e,n){var r=this,o=new ea;return t.di.enqueue(function(){return Object(i.b)(r,void 0,void 0,function(){var r;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Pf(t,n)];case 1:return i.sent(),[4,Df(t,e)];case 2:return i.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Er.FAILED_PRECONDITION||t.code===Er.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),o.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function Rh(t){if(t.y_||t.V_)throw new Or(Er.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ph=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).U_=e,a.J_=e,a.metadata=o,a}return Object(i.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new Dh(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(kh("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},e}(Sh),Dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ph),Lh=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new ip(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach(function(r){t.call(e,new Dh(n.U_,n.Q_,r.key,r,new ip(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new Or(Er.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map(function(e){return{type:"added",doc:new Dh(t.U_,t.Q_,e.doc.key,e.doc,new ip(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),oldIndex:-1,newIndex:n++}})}var r=t.Y_.te;return t.Y_.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Dh(t.U_,t.Q_,e.doc.key,e.doc,new ip(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Mh(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.Z_=e),this.X_},t}();function Mh(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return br()}}function Fh(t,e){return t instanceof Ph&&e instanceof Ph?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof Lh&&e instanceof Lh&&t.U_===e.U_&&lf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var Uh=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(i.c)(e,t),e.prototype.F_=function(t){return new yh(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new zh(this.firestore,null,e)},e}(Th);function Vh(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=uh(t.firestore,jh),s=hf(o);return e instanceof eh&&(e=e.o_),Hh(o,("string"==typeof e||e instanceof Nh?_f(s,"updateDoc",t.K_,e,n,r):bf(s,"updateDoc",t.K_,e)).ef(t.K_,$o.exists(!0)))}function qh(t){for(var e,n,r,o=this,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||ra(s[c])||(u=s[c],c++);var l,h,f,p={includeMetadataChanges:u.includeMetadataChanges};if(ra(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),s[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof zh)h=uh(t.firestore,jh),f=_s(t.K_.path),l={next:function(e){s[c]&&s[c](Bh(h,t,e))},error:s[c+1],complete:s[c+2]};else{h=uh(t.firestore,jh),f=t.tf;var g=new Uh(h);l={next:function(e){s[c]&&s[c](new Lh(h,g,t,e))},error:s[c+1],complete:s[c+2]},rf(t.tf)}var v=Jf(h),m=new th(l),y=new Vc(f,m,p);return h.z_.Ri(function(){return Object(i.b)(o,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return t=Dc,[4,Hf(v)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}})})}),function(){m.r_(),h.z_.Ri(function(){return Object(i.b)(o,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return t=Lc,[4,Hf(v)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}})})})}}function Hh(t,e){return function(t,e){var n=this,r=new ea;return t.di.Ri(function(){return Object(i.b)(n,void 0,void 0,function(){var n;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=ul,[4,qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Jf(t),e)}function Bh(t,e,n){var r=n.docs.get(e.K_),i=new Uh(t);return new Ph(t,i,e.K_,r,new ip(n.hasPendingWrites,n.fromCache),e.j_)}var zh=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new of(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),Wh=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),Kh=function(){};function Gh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var Qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(i.c)(e,t),e.prototype.sf=function(t){var e=hf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new Or(Er.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ef(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(tf(r,t,l[c]));a={arrayValue:{values:u}}}else a=tf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ef(s,o),a=wf(n,"where",s,"in"===o||"not-in"===o);var h=Ps.create(i,o,a);return function(t,e){if(e.An()){var n=Cs(t);if(null!==n&&!n.isEqual(e.field))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Os(t);null!==r&&nf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Or(Er.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new Wh(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},e}(Kh),$h=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(i.c)(e,t),e.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Or(Er.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Or(Er.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Gs(e,n);return function(t,e){if(null===Os(t)){var n=Cs(t);null!==n&&nf(0,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new Wh(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new ys(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},e}(Kh),Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(i.c)(e,t),e.prototype.sf=function(t){return new Wh(t.firestore,t.j_,As(t.tf,this.hf,this.lf))},e}(Kh),Xh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(i.c)(e,t),e.prototype.sf=function(t){var e=Zh(t,this.type,this._f,this.ff);return new Wh(t.firestore,t.j_,function(t,e){return new ys(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},e}(Kh),Yh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(i.c)(e,t),e.prototype.sf=function(t){var e=Zh(t,this.type,this._f,this.ff);return new Wh(t.firestore,t.j_,function(t,e){return new ys(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},e}(Kh);function Zh(t,e,n,r){if(n[0]instanceof eh&&(n[0]=n[0].o_),n[0]instanceof Sh)return function(t,e,n,r,i){if(!r)throw new Or(Er.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Is(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(Ki(e,r.key));else{var c=r.field(u.field);if(xi(c))throw new Or(Er.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.J();throw new Or(Er.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Bs(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=hf(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new Or(Er.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new Or(Er.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ts(t)&&-1!==c.indexOf("/"))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Mr.Y(c));if(!Vr.ot(l))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Vr(l);a.push(Ki(e,h))}else{var f=wf(n,r,c);a.push(f)}}return new Bs(a,o)}(t.tf,t.firestore.R_,i,e,n,r)}function tf(t,e,n){if(n instanceof eh&&(n=n.o_),"string"==typeof n){if(""===n)throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ts(e)&&-1!==n.indexOf("/"))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Mr.Y(n));if(!Vr.ot(r))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ki(t,new Vr(r))}if(n instanceof zh)return Ki(t,n.K_);throw new Or(Er.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ah(n)+".")}function ef(t,e){if(!Array.isArray(t)||0===t.length)throw new Or(Er.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Or(Er.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function nf(t,e,n){if(!n.isEqual(e))throw new Or(Er.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function rf(t){if(Es(t)&&0===t.Tn.length)throw new Or(Er.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var of=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_s(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new zh(this.firestore,null,new Vr(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.nf)},e}(Wh);function sf(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(nh("collection","path",e),t instanceof wh){var o=Mr.Y.apply(Mr,Object(i.g)([e],n));return sh(o),new of(t,null,o)}if(!(t instanceof zh||t instanceof of))throw new Or(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=Mr.Y.apply(Mr,Object(i.g)([t.path],n)).child(Mr.Y(e));return sh(s),new of(t.firestore,null,s)}function af(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=Nr.D()),nh("doc","path",e),t instanceof wh){var o=Mr.Y.apply(Mr,Object(i.g)([e],n));return oh(o),new zh(t,null,new Vr(o))}if(!(t instanceof zh||t instanceof of))throw new Or(Er.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var s=t.nf.child(Mr.Y.apply(Mr,Object(i.g)([e],n)));return oh(s),new zh(t.firestore,t instanceof of?t.j_:null,new Vr(s))}var uf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(i.c)(e,t),e.prototype.F_=function(t){return new yh(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new zh(this.firestore,null,e)},e}(Th);function cf(t,e){return(t instanceof zh||t instanceof of)&&(e instanceof zh||e instanceof of)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function lf(t,e){return t instanceof Wh&&e instanceof Wh&&t.firestore===e.firestore&&ks(t.tf,e.tf)&&t.j_===e.j_}function hf(t){var e=t.S_(),n=na(t.R_);return new mf(t.R_,!!e.ignoreUndefinedProperties,n)}var ff=/^__.*__$/,pf=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return n.push(null!==this.en?new is(t,this.data,this.en,e):new rs(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new ss(t,this.fieldTransforms)),n},t}(),df=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new is(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new ss(t,this.fieldTransforms)),n},t}();function gf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw br()}}var vf=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return kf(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find(function(e){return t.j(e)})||void 0!==this.fieldTransforms.find(function(e){return t.j(e.field)})},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(gf(this.a_)&&ff.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),mf=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||na(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new vf({a_:t,methodName:e,l_:n,path:Ur.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function yf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);Tf("Data must be an object, but it was:",s,r);var a,u,c=Of(r,s);if(o.merge)a=new Ko(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=If(e,f[h],n);if(!s.contains(p))throw new Or(Er.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Nf(l,p)||l.push(p)}a=new Ko(l),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new pf(new hs(c),a,u)}function bf(t,e,n,r){var i=t.Rf(1,e,n);Tf("Data must be an object, but it was:",i,r);var o=[],s=new fs;Ni(r,function(t,r){var a=Af(e,t,n);r instanceof eh&&(r=r.o_);var u=i.If(a);if(r instanceof hh)o.push(a);else{var c=Ef(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Ko(o);return new df(s.hn(),a,i.fieldTransforms)}function _f(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[If(e,r,n)],u=[i];if(o.length%2!=0)throw new Or(Er.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(If(e,o[c])),u.push(o[c+1]);for(var l=[],h=new fs,f=a.length-1;f>=0;--f)if(!Nf(l,a[f])){var p=a[f],d=u[f];d instanceof eh&&(d=d.o_);var g=s.If(p);if(d instanceof hh)l.push(p);else{var v=Ef(d,g);null!=v&&(l.push(p),h.set(p,v))}}var m=new Ko(l);return new df(h.hn(),m,s.fieldTransforms)}function wf(t,e,n,r){return void 0===r&&(r=!1),Ef(n,t.Rf(r?4:3,e))}function Ef(t,e){if(t instanceof eh&&(t=t.o_),Cf(t))return Tf("Unsupported field value:",e,t),Of(t,e);if(t instanceof lh)return function(t,e){if(!gf(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ef(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof eh&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ro(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Pr.fromDate(t);return{timestampValue:io(e.serializer,n)}}if(t instanceof Pr){var r=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:io(e.serializer,r)}}if(t instanceof mh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof yh)return{bytesValue:oo(e.serializer,t.T_)};if(t instanceof zh){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:uo(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+ah(t))}(t,e)}function Of(t,e){var n={};return ji(t)?e.path&&e.path.length>0&&e.en.push(e.path):Ni(t,function(t,r){var i=Ef(r,e.Ef(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Cf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Pr||t instanceof mh||t instanceof yh||t instanceof zh||t instanceof lh)}function Tf(t,e,n){if(!Cf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ah(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function If(t,e,n){if(e instanceof eh&&(e=e.o_),e instanceof Nh)return e.G_;if("string"==typeof e)return Af(t,e);throw kf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Sf=new RegExp("[~\\*/\\[\\]]");function Af(t,e,n){if(e.search(Sf)>=0)throw kf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Nh.bind.apply(Nh,Object(i.g)([void 0],e.split("."))))).G_}catch(r){throw kf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function kf(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Or(Er.INVALID_ARGUMENT,(a+=". ")+t+u)}function Nf(t,e){return t.some(function(t){return t.isEqual(e)})}var jf=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:if(this.vf(),this.mutations.length>0)throw new Or(Er.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=wr(t),r=go(n.serializer)+"/documents",o={documents:e.map(function(t){return lo(n.serializer,t)})},[4,n.Ru("BatchGetDocuments",r,o)];case 1:return s=i.sent(),a=new Map,s.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){_r(!!e.found);var n=ho(t,e.found.name),r=ao(e.found.updateTime),i=new hs({mapValue:{fields:e.found.fields}});return new gs(n,r,i,{})}(t,e):"missing"in e?function(t,e){_r(!!e.missing),_r(!!e.readTime);var n=ho(t,e.missing),r=ao(e.readTime);return new vs(n,r)}(t,e):br()}(n.serializer,t);a.set(e.key.toString(),e)}),u=[],[2,(e.forEach(function(t){var e=a.get(t.toString());_r(!!e),u.push(e)}),u)]}})})}(this.Nu,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof vs||t instanceof gs?n.bf(t):br()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new cs(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e=this;return Object(i.d)(this,function(n){switch(n.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Vr.st(n);e.mutations.push(new ls(r,e.rn(r)))}),[4,function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=wr(t),r=go(n.serializer)+"/documents",o={writes:e.map(function(t){return yo(n.serializer,t)})},[4,n.Au("Commit",r,o)];case 1:return i.sent(),[2]}})})}(this.Nu,this.mutations)];case 1:return n.sent(),this.gf=!0,[2]}})})},t.prototype.bf=function(t){var e;if(t instanceof gs)e=t.version;else{if(!(t instanceof vs))throw br();e=Dr.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Or(Er.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?$o.updateTime(e):$o.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(Dr.min()))throw new Or(Er.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $o.updateTime(e)}return $o.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),xf=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new ca(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs(function(){return Object(i.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(i.d)(this,function(r){return t=new jf(this.Nu),(e=this.Nf(t))&&e.then(function(e){n.di.Ri(function(){return t.commit().then(function(){n.Ti.resolve(e)}).catch(function(t){n.xf(t)})})}).catch(function(t){n.xf(t)}),[2]})})})},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!qr(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri(function(){return e.Cf(),Promise.resolve()})):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ti(e)}return!1},t}(),Rf=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=fr.UNAUTHENTICATED,this.clientId=Nr.D(),this.Of=function(){},this.g=new ea,this.credentials.A(function(t){gr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()})}return t.prototype.getConfiguration=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then(function(){return e.Of(e.user)})},t.prototype.kf=function(){if(this.di.Ci)throw new Or(Er.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new ea;return this.di.Ni(function(){return Object(i.b)(t,void 0,void 0,function(){var t,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Oa(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Pf(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r=this;return Object(i.d)(this,function(o){switch(o.label){case 0:return t.di.Li(),gr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),t.Mf(function(n){return t.di.Mi(function(){return Object(i.b)(r,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,zu(e.Cu,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.tc(function(){return t.terminate()}),t.Lf=e,[2]}})})}function Df(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(o){switch(o.label){case 0:return t.di.Li(),[4,Lf(t)];case 1:return n=o.sent(),gr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.Mf(function(n){return t.di.Mi(function(){return function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return(n=wr(t)).di.Li(),gr("RemoteStore","RemoteStore received new credentials"),r=vc(n),n.Mu.add(3),[4,cc(n)];case 1:return i.sent(),r&&n.Bu.set("Unknown"),[4,n.xu.s_(e)];case 2:return i.sent(),n.Mu.delete(3),[4,uc(n)];case 3:return i.sent(),[2]}})})}(e.Oh,n)})}),t.$f=e,[2]}})})}function Lf(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return t.Lf?[3,2]:(gr("FirestoreClient","Using default OfflineComponentProvider"),[4,Pf(t,new Jl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}})})}function Mf(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return t.$f?[3,2]:(gr("FirestoreClient","Using default OnlineComponentProvider"),[4,Df(t,new Zl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}})})}function Ff(t){return Lf(t).then(function(t){return t.persistence})}function Uf(t){return Lf(t).then(function(t){return t.Cu})}function Vf(t){return Mf(t).then(function(t){return t.Oh})}function qf(t){return Mf(t).then(function(t){return t.ga})}function Hf(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,Mf(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ju=ol.bind(null,e.ga),n.Zu=al.bind(null,e.ga),n)]}})})}function Bf(t,e,n,r,i){var o=new th({next:function(o){e.Ri(function(){return Lc(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Or(Er.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Or(Er.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Vc(_s(n.path),o,{includeMetadataChanges:!0,oa:!0});return Dc(t,s)}function zf(t,e,n,r,i){var o=new th({next:function(n){e.Ri(function(){return Lc(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Or(Er.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Vc(n,o,{includeMetadataChanges:!0,oa:!0});return Dc(t,s)}var Wf=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=hf(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=Kf(t,this.U_),i=fp(r.j_,e,n),o=yf(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,$o.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=Kf(t,this.U_);return e instanceof eh&&(e=e.o_),o="string"==typeof e||e instanceof Nh?_f(this.Qf,"WriteBatch.update",s.K_,e,n,r):bf(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,$o.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=Kf(t,this.U_);return this.qf=this.qf.concat(new cs(e.K_,$o.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new Or(Er.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Kf(t,e){if(t instanceof eh&&(t=t.o_),t.firestore!==e)throw new Or(Er.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(i.c)(e,t),e.prototype.get=function(e){var n=this,r=Kf(e,this.U_),i=new Uh(this.U_);return t.prototype.get.call(this,e).then(function(t){return new Ph(n.U_,i,r.K_,t.W_,new ip(!1,!1),r.j_)})},e}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=hf(t)}return t.prototype.get=function(t){var e=this,n=Kf(t,this.U_),r=new uf(this.U_);return this.Wf.pf([n.K_]).then(function(t){if(!t||1!==t.length)return br();var i=t[0];if(i instanceof vs)return new Sh(e.U_,r,n.K_,null,n.j_);if(i instanceof gs)return new Sh(e.U_,r,i.key,i,n.j_);throw br()})},t.prototype.set=function(t,e,n){var r=Kf(t,this.U_),i=fp(r.j_,e,n),o=yf(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Kf(t,this.U_);return e instanceof eh&&(e=e.o_),o="string"==typeof e||e instanceof Nh?_f(this.Qf,"Transaction.update",s.K_,e,n,r):bf(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=Kf(t,this.U_);return this.Wf.delete(e.K_),this},t}()),Qf=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Rh(t);var n=Jf(t),r=t.S_(),i=new Zl;return xh(n,i,new Xl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Rh(t);var e=Jf(t),n=t.S_(),r=new Zl;return xh(e,r,new Yl(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.y_&&!t.V_)throw new Or(Er.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ea;return t.z_.Ni(function(){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return la.Gs()?[4,la.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(qu(t.R_,t.I_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),$f=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof hr||(i.Gf=e),i}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&mr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(i.b)(e,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,Ff(t)];case 1:return e=r.sent(),[4,Vf(t)];case 2:return n=r.sent(),[2,(e.ec(!0),function(t){var e=wr(t);return e.Mu.delete(0),uc(e)}(n))]}})})})}(Jf(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(i.b)(e,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,Ff(t)];case 1:return e=r.sent(),[4,Vf(t)];case 2:return n=r.sent(),[2,(e.ec(!1),function(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return(e=wr(t)).Mu.add(0),[4,cc(e)];case 1:return n.sent(),e.Bu.set("Offline"),[2]}})})}(n))]}})})})}(Jf(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ih("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ea;return t.di.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.d)(this,function(r){switch(r.label){case 0:return e=dl,[4,qf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Jf(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=Jf(t),o=ra(e)?e:{next:e},s=new th(o);return t.z_.Ri(function(){return Object(i.b)(n,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){wr(t).Hu.add(e),e.next()},[4,Hf(r)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}})})}),function(){s.r_(),t.z_.Ri(function(){return Object(i.b)(n,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){wr(t).Hu.delete(e)},[4,Hf(r)];case 1:return t.apply(void 0,[e.sent(),s]),[2]}})})})}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Gf)throw new Or(Er.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new lp(this,sf(this.o_,t))}catch(t){throw ep(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new tp(this,af(this.o_,t))}catch(t){throw ep(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new ap(this,function(t,e){if(nh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Or(Er.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wh(t,null,function(t){return new ys(Mr.X(),t)}(e))}(this.o_,t))}catch(t){throw ep(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ea;return t.di.Ri(function(){return Object(i.b)(n,void 0,void 0,function(){var n;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Mf(t).then(function(t){return t.Nu})}(t)];case 1:return n=i.sent(),new xf(t.di,n,e,r).run(),[2]}})})}),r.promise}(Jf(t),function(n){return e(new Gf(t,n))})}(this.o_,function(n){return t(new Yf(e,n))})},e.prototype.batch=function(){var t=this;return Jf(this.o_),new Zf(new Wf(this.o_,function(e){return Hh(t.o_,e)}))},e}(eh);function Jf(t){return t.H_||Xf(t),t.H_.kf(),t.H_}function Xf(t){var e=t.S_(),n=function(t,e,n){return new lr(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new Rf(t.P_,t.z_,n)}var Yf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(i.c)(e,t),e.prototype.get=function(t){var e=this,n=hp(t);return this.o_.get(n).then(function(t){return new op(e.U_,t)})},e.prototype.set=function(t,e,n){var r=hp(t);return n?(rh("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=hp(t);return 2===arguments.length?this.o_.update(a,e):(r=this.o_).update.apply(r,Object(i.g)([a,e,n],o)),this},e.prototype.delete=function(t){var e=hp(t);return this.o_.delete(e),this},e}(eh),Zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.set=function(t,e,n){var r=hp(t);return n?(rh("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=hp(t);return 2===arguments.length?this.o_.update(a,e):(r=this.o_).update.apply(r,Object(i.g)([a,e,n],o)),this},e.prototype.delete=function(t){var e=hp(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(eh),tp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new Ih(e),r}return Object(i.c)(e,t),e.zf=function(t,n,r){if(t.length%2!=0)throw new Or(Er.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new zh(n.o_,r,new Vr(t)))},e.q_=function(t,n,r){return new e(n,new zh(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new lp(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new lp(this.firestore,sf(this.o_,t))}catch(t){throw ep(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof eh&&(t=t.o_),t instanceof zh&&cf(this.o_,t)},e.prototype.set=function(t,e){e=rh("DocumentReference.set",e);try{return function(t,e,n){var r=uh(t.firestore,jh),i=fp(t.j_,e,n);return Hh(r,yf(hf(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,$o.on()))}(this.o_,t,e)}catch(t){throw ep(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Vh(this.o_,t):Vh.apply(void 0,Object(i.g)([this.o_,t,e],n))}catch(t){throw ep(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Hh(uh((t=this.o_).firestore,jh),[new cs(t.K_,$o.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=np(e),i=rp(e,function(e){return new op(t.firestore,new Ph(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))});return qh(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new Uh(n),s=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Uf(r)];case 1:return[4,function(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=wr(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Oc.cs(t,e)})}(t,e)];case 1:return(r=i.sent())instanceof gs?n.resolve(r):r instanceof vs?n.resolve(null):n.reject(new Or(Er.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=i.sent(),s=Oa(o,"Failed to get document '"+e+" from cache"),n.reject(s),[3,3];case 3:return[2]}})})}(e.sent(),t.K_,s)];case 2:return e.sent(),[2]}})})}),s.promise.then(function(e){return new Ph(n,o,t.K_,e,new ip(e instanceof gs&&e.an,!0),t.j_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Hf(r)];case 1:return[4,Bf(e.sent(),n.z_,t.K_,{source:"server"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return Bh(n,t,e)})}(this.o_):function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Hf(r)];case 1:return[4,Bf(e.sent(),n.z_,t.K_,{source:"default"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return Bh(n,t,e)})}(this.o_)).then(function(t){return new op(e.firestore,new Ph(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(eh);function ep(t,e,n){return t.message=t.message.replace(e,n),t}function np(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ra(r))return r}return{}}function rp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ra(t[0])?t[0]:ra(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ip=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),op=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new tp(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Fh(this.o_,t.o_)},e}(eh),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(op),ap=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(i.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Gh(this.o_,function(t,e,n){var r=e,i=kh("where",t);return new Qh(i,r,n)}(t,n,r)))}catch(t){throw ep(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Gh(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=kh("orderBy",t);return new $h(r,n)}(t,n)))}catch(t){throw ep(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Gh(this.o_,function(t){return ch("limit",t),new Jh("limit",t,"F")}(t)))}catch(t){throw ep(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Gh(this.o_,function(t){return ch("limitToLast",t),new Jh("limitToLast",t,"L")}(t)))}catch(t){throw ep(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gh(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xh("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw ep(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gh(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xh("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw ep(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gh(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yh("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw ep(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Gh(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yh("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw ep(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return lf(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new Uh(n),s=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Uf(r)];case 1:return[4,function(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a,u,c;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Xu(t,e,!0)];case 1:return r=i.sent(),o=new el(e,r.Bc),s=o.gh(r.documents),a=o.Zn(s,!1),n.resolve(a.snapshot),[3,3];case 2:return u=i.sent(),c=Oa(u,"Failed to execute query '"+e+" against cache"),n.reject(c),[3,3];case 3:return[2]}})})}(e.sent(),t.tf,s)];case 2:return e.sent(),[2]}})})}),s.promise.then(function(e){return new Lh(n,o,t,e)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new Uh(n),s=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Hf(r)];case 1:return[4,zf(e.sent(),n.z_,t.tf,{source:"server"},s)];case 2:return e.sent(),[2]}})})}),s.promise.then(function(e){return new Lh(n,o,t,e)})}(this.o_):function(t){var e=this,n=uh(t.firestore,jh),r=Jf(n),o=new Uh(n);rf(t.tf);var s=new ea;return n.z_.Ri(function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return[4,Hf(r)];case 1:return[4,zf(e.sent(),n.z_,t.tf,{source:"default"},s)];case 2:return e.sent(),[2]}})})}),s.promise.then(function(e){return new Lh(n,o,t,e)})}(this.o_)).then(function(t){return new cp(e.firestore,t)})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=np(e),i=rp(e,function(e){return new cp(t.firestore,e)});return qh(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(eh),up=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new sp(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(eh),cp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new ap(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new sp(t.U_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new up(e.U_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new sp(n.U_,r))})},e.prototype.isEqual=function(t){return Fh(this.o_,t.o_)},e}(eh),lp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(i.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new tp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new tp(this.firestore,void 0===t?af(this.o_):af(this.o_,t))}catch(t){throw ep(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=uh(t.firestore,jh),r=af(t),i=fp(t.j_,e);return Hh(n,yf(hf(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,$o.exists(!1))).then(function(){return r})}(this.o_,t).then(function(t){return new tp(e.firestore,t)})},e.prototype.isEqual=function(t){return cf(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(ap);function hp(t){return t instanceof eh&&(t=t.o_),uh(t,zh)}function fp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var pp,dp=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Nh.bind.apply(Nh,Object(i.g)([void 0],e))))||this}return Object(i.c)(e,t),e.documentId=function(){return new e(Ur.et().J())},e.prototype.isEqual=function(t){return t instanceof eh&&(t=t.o_),t instanceof Nh&&this.o_.G_.isEqual(t.G_)},e}(eh),gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.serverTimestamp=function(){var t=new ph("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new hh("deleteField");return t.c_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new dh("arrayUnion",t)}).apply(void 0,t);return r.c_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gh("arrayRemove",t)}).apply(void 0,t);return r.c_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new vh("increment",t)}(t);return n.c_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(eh),vp={Firestore:$f,GeoPoint:mh,Timestamp:Pr,Blob:Ch,Transaction:Yf,WriteBatch:Zf,DocumentReference:tp,DocumentSnapshot:op,Query:ap,QueryDocumentSnapshot:sp,QuerySnapshot:cp,CollectionReference:lp,FieldPath:dp,FieldValue:gp,setLogLevel:function(t){pr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new cr.a("firestore",function(t){return function(t,e){return new $f(t,new jh(t,e),new Qf)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},vp)))})(pp=r.a),pp.registerVersion("@firebase/firestore","2.0.4");var mp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yp=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(i.c)(e,t),e}(Error),bp=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function _p(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var wp,Ep,Op,Cp=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return _p(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?_p(t,function(t){return e.decode(t)}):t},t}(),Tp=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Cp,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new bp(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:n["Content-Type"]="application/json",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{status:0,json:null}];case 4:o=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.json()];case 6:return o=i.sent(),[3,8];case 7:return i.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}})})},t.prototype.call=function(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a,u,c,l,h,f,p;return Object(i.d)(this,function(i){switch(i.label){case 0:return r=this._url(t),e=this.serializer.encode(e),o={data:e},s={},[4,this.contextProvider.getContext()];case 1:return(a=i.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new yp("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),c=u.timer,l=u.promise,[4,Promise.race([Ip(c,this.postJSON(r,o,s)),l,Ip(c,this.cancelAllRequests)])];case 2:if(!(h=i.sent()))throw new yp("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!mp[a])return new yp("internal","internal");r=mp[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new yp(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new yp("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new yp("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}})})},t}();function Ip(t,e){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}wp=r.a,Ep=fetch.bind(self),Op={Functions:Tp},wp.INTERNAL.registerComponent(new cr.a("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Tp(n,r,i,e,Ep)},"PUBLIC").setServiceProps(Op).setMultipleInstances(!0)),r.a.registerVersion("@firebase/functions","0.6.1");var Sp,Ap=n("nbvr"),kp="w:0.4.19",Np=((Sp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Sp["not-registered"]="Firebase Installation is not registered.",Sp["installation-not-found"]="Firebase Installation not found.",Sp["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Sp["app-offline"]="Could not process request. Application offline.",Sp["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Sp),jp=new s.b("installations","Installations",Np);function xp(t){return t instanceof s.c&&t.code.includes("request-failed")}function Rp(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Pp(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Dp(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,jp.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Lp(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function Mp(t,e){var n=e.refreshToken,r=Lp(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Fp(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function Up(t,e){var n=e.fid;return Object(i.b)(this,void 0,void 0,function(){var e,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return e=Rp(t),r=Lp(t),o={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:kp})},[4,Fp(function(){return fetch(e,o)})];case 1:return(s=i.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,{fid:(a=i.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:Pp(a.authToken)}];case 3:return[4,Dp("Create Installation",s)];case 4:throw i.sent()}})})}function Vp(t){return new Promise(function(e){setTimeout(e,t)})}var qp=/^[cdef][\w-]{21}$/;function Hp(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(i.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return qp.test(e)?e:""}catch(n){return""}}function Bp(t){return t.appName+"!"+t.appId}var zp=new Map;function Wp(t,e){var n=Bp(t);Kp(n,e),function(t,e){var n=Qp();n&&n.postMessage({key:t,fid:e}),$p()}(n,e)}function Kp(t,e){var n,r,o=zp.get(t);if(o)try{for(var s=Object(i.h)(o),a=s.next();!a.done;a=s.next())(0,a.value)(e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var Gp=null;function Qp(){return!Gp&&"BroadcastChannel"in self&&((Gp=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Kp(t.data.key,t.data.fid)}),Gp}function $p(){0===zp.size&&Gp&&(Gp.close(),Gp=null)}var Jp,Xp="firebase-installations-store",Yp=null;function Zp(){return Yp||(Yp=Object(Ap.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Xp)}})),Yp}function td(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=Bp(t),[4,Zp()];case 1:return r=i.sent(),o=r.transaction(Xp,"readwrite"),[4,(s=o.objectStore(Xp)).get(n)];case 2:return a=i.sent(),[4,s.put(e,n)];case 3:return i.sent(),[4,o.complete];case 4:return i.sent(),a&&a.fid===e.fid||Wp(t,e.fid),[2,e]}})})}function ed(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return e=Bp(t),[4,Zp()];case 1:return n=i.sent(),[4,(r=n.transaction(Xp,"readwrite")).objectStore(Xp).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function nd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=Bp(t),[4,Zp()];case 1:return r=i.sent(),o=r.transaction(Xp,"readwrite"),[4,(s=o.objectStore(Xp)).get(n)];case 2:return a=i.sent(),void 0!==(u=e(a))?[3,4]:[4,s.delete(n)];case 3:return i.sent(),[3,6];case 4:return[4,s.put(u,n)];case 5:i.sent(),i.label=6;case 6:return[4,o.complete];case 7:return i.sent(),!u||a&&a.fid===u.fid||Wp(t,u.fid),[2,u]}})})}function rd(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(o){switch(o.label){case 0:return[4,nd(t,function(n){var r=function(t){return sd(t||{fid:Hp(),registrationStatus:0})}(n),o=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(jp.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,Up(t,e)];case 1:return n=i.sent(),[2,td(t,n)];case 2:return xp(r=i.sent())&&409===r.customData.serverCode?[4,ed(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,td(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:id(t)}:{installationEntry:e}}(t,r);return e=o.registrationPromise,o.installationEntry})];case 1:return""!==(n=o.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=o.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function id(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,od(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Vp(100)];case 3:return i.sent(),[4,od(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,rd(t)];case 6:return n=i.sent(),r=n.installationEntry,(o=n.registrationPromise)?[2,o]:[2,r];case 7:return[2,e]}})})}function od(t){return nd(t,function(t){if(!t)throw jp.create("installation-not-found");return sd(t)})}function sd(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function ad(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(i.b)(this,void 0,void 0,function(){var t,o,s,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return t=function(t,e){var n=e.fid;return Rp(t)+"/"+n+"/authTokens:generate"}(n,e),o=Mp(n,e),(s=r.getImmediate({optional:!0}))&&o.append("x-firebase-client",s.getPlatformInfoString()),a={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:kp}})},[4,Fp(function(){return fetch(t,a)})];case 1:return(u=i.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,Pp(i.sent())];case 3:return[4,Dp("Generate Auth Token",u)];case 4:throw i.sent()}})})}function ud(t,e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(s){switch(s.label){case 0:return[4,nd(t.appConfig,function(r){if(!ld(r))throw jp.create("not-registered");var o,s=r.authToken;if(!e&&2===(o=s).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(o))return r;if(1===s.requestStatus)return n=function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,cd(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Vp(100)];case 3:return i.sent(),[4,cd(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ud(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw jp.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(i.a)(Object(i.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,ad(t,e)];case 1:return n=s.sent(),o=Object(i.a)(Object(i.a)({},e),{authToken:n}),[4,td(t.appConfig,o)];case 2:return s.sent(),[2,n];case 3:return!xp(r=s.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,ed(t.appConfig)];case 4:return s.sent(),[3,7];case 5:return o=Object(i.a)(Object(i.a)({},e),{authToken:{requestStatus:0}}),[4,td(t.appConfig,o)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}(t,a),a})];case 1:return r=s.sent(),n?[4,n]:[3,3];case 2:return o=s.sent(),[3,4];case 3:o=r.authToken,s.label=4;case 4:return[2,o]}})})}function cd(t){return nd(t,function(t){if(!ld(t))throw jp.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(i.a)(Object(i.a)({},t),{authToken:{requestStatus:0}}):t})}function ld(t){return void 0!==t&&2===t.registrationStatus}function hd(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,rd(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function fd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=function(t,e){var n=e.fid;return Rp(t)+"/"+n}(t,e),r=Mp(t,e),o={method:"DELETE",headers:r},[4,Fp(function(){return fetch(n,o)})];case 1:return(s=i.sent()).ok?[3,3]:[4,Dp("Delete Installation",s)];case 2:throw i.sent();case 3:return[2]}})})}function pd(t){return jp.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new cr.a("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw pd("App Configuration");if(!t.name)throw pd("App Name");try{for(var r=Object(i.h)(["projectId","apiKey","appId"]),o=r.next();!o.done;o=r.next()){var s=o.value;if(!t.options[s])throw pd(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,rd(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ud(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,hd(t.appConfig)];case 1:return n.sent(),[4,ud(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,nd(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw jp.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw jp.create("app-offline");case 3:return[4,fd(e,n)];case 4:return r.sent(),[4,ed(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Qp();var n=Bp(t),r=zp.get(n);r||(r=new Set,zp.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Bp(t),r=zp.get(n);r&&(r.delete(e),0===r.size&&zp.delete(n),$p())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(r.a);var dd=((Jp={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Jp["only-available-in-window"]="This method is available in a Window context.",Jp["only-available-in-sw"]="This method is available in a service worker context.",Jp["permission-default"]="The notification permission was not granted and dismissed instead.",Jp["permission-blocked"]="The notification permission was not granted and blocked instead.",Jp["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Jp["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Jp["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Jp["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Jp["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Jp["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Jp["token-update-no-token"]="FCM returned no token when updating the user to push.",Jp["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Jp["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Jp["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Jp["invalid-vapid-key"]="The public VAPID key must be a string.",Jp["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Jp),gd=new s.b("messaging","Messaging",dd),vd="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",md=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function yd(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(i.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bd(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var _d="fcm_token_details_db",wd="fcm_token_object_Store";function Ed(t){return Object(i.b)(this,void 0,void 0,function(){var e,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(_d))return[2,null];r.label=2;case 2:return e=null,[4,Object(Ap.openDb)(_d,5,function(r){return Object(i.b)(n,void 0,void 0,function(){var n,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(wd)?[4,(n=r.transaction.objectStore(wd)).index("fcmSenderId").get(t)]:[2];case 1:return o=i.sent(),[4,n.clear()];case 2:if(i.sent(),!o)return[2];if(2===r.oldVersion){if(!(s=o).auth||!s.p256dh||!s.endpoint)return[2];e={token:s.fcmToken,createTime:null!==(a=s.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:s.auth,p256dh:s.p256dh,endpoint:s.endpoint,swScope:s.swScope,vapidKey:"string"==typeof s.vapidKey?s.vapidKey:yd(s.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(s=o).fcmToken,createTime:s.createTime,subscriptionOptions:{auth:yd(s.auth),p256dh:yd(s.p256dh),endpoint:s.endpoint,swScope:s.swScope,vapidKey:yd(s.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(Ap.deleteDb)(_d)];case 4:return r.sent(),[4,Object(Ap.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Ap.deleteDb)("undefined")];case 6:return r.sent(),[2,Od(e)?e:null]}})})}function Od(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Cd="firebase-messaging-store",Td=null;function Id(){return Td||(Td=Object(Ap.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Cd)}})),Td}function Sd(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return e=Nd(t),[4,Id()];case 1:return[4,i.sent().transaction(Cd).objectStore(Cd).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Ed(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Ad(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function Ad(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=Nd(t),[4,Id()];case 1:return r=i.sent(),[4,(o=r.transaction(Cd,"readwrite")).objectStore(Cd).put(e,n)];case 2:return i.sent(),[4,o.complete];case 3:return i.sent(),[2,e]}})})}function kd(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return e=Nd(t),[4,Id()];case 1:return n=i.sent(),[4,(r=n.transaction(Cd,"readwrite")).objectStore(Cd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Nd(t){return t.appConfig.appId}function jd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Dd(t)];case 1:n=i.sent(),r=Ld(e),o={method:"POST",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Pd(t.appConfig),o)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw a=i.sent(),gd.create("token-subscribe-failed",{errorInfo:a});case 6:if(s.error)throw gd.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw gd.create("token-subscribe-no-token");return[2,s.token]}})})}function xd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Dd(t)];case 1:n=i.sent(),r=Ld(e.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Pd(t.appConfig)+"/"+e.token,o)];case 3:return[4,i.sent().json()];case 4:return s=i.sent(),[3,6];case 5:throw a=i.sent(),gd.create("token-update-failed",{errorInfo:a});case 6:if(s.error)throw gd.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw gd.create("token-update-no-token");return[2,s.token]}})})}function Rd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Dd(t)];case 1:n=i.sent(),r={method:"DELETE",headers:n},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(Pd(t.appConfig)+"/"+e,r)];case 3:return[4,i.sent().json()];case 4:if((o=i.sent()).error)throw gd.create("token-unsubscribe-failed",{errorInfo:o.error.message});return[3,6];case 5:throw s=i.sent(),gd.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}})})}function Pd(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Dd(t){var e=t.appConfig,n=t.installations;return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function Ld(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==vd&&(n.web.applicationPubKey=e),n}function Md(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a;return Object(i.d)(this,function(i){switch(i.label){case 0:if("granted"!==Notification.permission)throw gd.create("permission-blocked");return[4,qd(e,n)];case 1:return r=i.sent(),[4,Sd(t)];case 2:return o=i.sent(),s={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:yd(r.getKey("auth")),p256dh:yd(r.getKey("p256dh"))},o?[3,3]:[2,Vd(t,s)];case 3:if(l=(c=s).endpoint===(u=o.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];i.label=4;case 4:return i.trys.push([4,6,,7]),[4,Rd(t,o.token)];case 5:return i.sent(),[3,7];case 6:return a=i.sent(),console.warn(a),[3,7];case 7:return[2,Vd(t,s)];case 8:return Date.now()>=o.createTime+6048e5?[2,Ud({token:o.token,createTime:Date.now(),subscriptionOptions:s},t,e)]:[2,o.token];case 9:return[2]}var u,c,l})})}function Fd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Sd(t)];case 1:return(n=i.sent())?[4,Rd(t,n.token)]:[3,4];case 2:return i.sent(),[4,kd(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function Ud(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s;return Object(i.d)(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,xd(e,t)];case 1:return r=a.sent(),o=Object(i.a)(Object(i.a)({},t),{token:r,createTime:Date.now()}),[4,Ad(e,o)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,Fd(e,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function Vd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,jd(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Ad(t,r)];case 2:return i.sent(),[2,r.token]}})})}function qd(t,e){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bd(e)})]}})})}function Hd(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Bd(t){return new Promise(function(e){setTimeout(e,t)})}var zd=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw gd.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Sd(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:vd,r.label=2;case 2:return[2,Md(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return Fd(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw gd.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw gd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw gd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw gd.create("only-available-in-window")},t.prototype.onMessage=function(){throw gd.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw gd.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,Qd()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=i.sent())?[2,Gd(n,e)]:(r=!1,e.notification?[4,$d(Wd(e))]:[3,3]);case 2:i.sent(),r=!0,i.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(o):this.bgMessageHandler.next(o)),[4,Bd(1e3)]);case 4:return i.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(i.b)(this,void 0,void 0,function(){var r;return Object(i.d)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Fd(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Sd(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Fd(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Md(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:vd)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(i.b)(this,void 0,void 0,function(){var r,o,s,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(o=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(Hd(t.data)?self.location.origin:null)}(r))?(s=new URL(o,self.location.href),a=new URL(self.location.origin),s.host!==a.host?[2]:[4,Kd(s)]):[2]):[2];case 1:return(u=i.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return u=i.sent(),[4,Bd(3e3)];case 3:return i.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=i.sent(),i.label=6;case 6:return u?(r.messageType=md.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}})})},t}();function Wd(t){var e,n=Object(i.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function Kd(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o,s,a,u;return Object(i.d)(this,function(c){switch(c.label){case 0:return[4,Qd()];case 1:e=c.sent();try{for(n=Object(i.h)(e),r=n.next();!r.done;r=n.next())if(o=r.value,s=new URL(o.url,self.location.href),t.host===s.host)return[2,o]}catch(l){a={error:l}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function Gd(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=md.PUSH_RECEIVED;try{for(var o=Object(i.h)(t),s=o.next();!s.done;s=o.next())s.value.postMessage(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Qd(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function $d(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var Jd=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===md.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Hd(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw gd.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Md(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=vd),[2]})})},t.prototype.updateSwReg=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw gd.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e;return Object(i.d)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),gd.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Fd(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw gd.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw gd.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw gd.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw gd.create("invalid-sw-registration");if(this.swRegistration)throw gd.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw gd.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw gd.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case md.NOTIFICATION_CLICKED:return"notification_open";case md.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function Xd(t){return gd.create("missing-app-config-values",{valueName:t})}var Yd={isSupported:Zd};function Zd(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}r.a.INTERNAL.registerComponent(new cr.a("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Xd("App Configuration Object");if(!t.name)throw Xd("App Name");var r=t.options;try{for(var o=Object(i.h)(["projectId","apiKey","appId","messagingSenderId"]),s=o.next();!s.done;s=o.next()){var a=s.value;if(!r[a])throw Xd(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Zd())throw gd.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new zd(n):new Jd(n)},"PUBLIC").setServiceProps(Yd));var tg="firebasestorage.googleapis.com",eg=function(t){function e(n,r){var i=t.call(this,og(n),"Firebase Storage: "+r+" ("+og(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(i.c)(e,t),e.prototype.codeEquals=function(t){return og(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(s.c),ng="canceled",rg="invalid-argument",ig="unsupported-environment";function og(t){return"storage/"+t}function sg(){return new eg("unknown","An unknown error occurred, please check the error payload for server response.")}function ag(){return new eg(ng,"User canceled the upload/download.")}function ug(){return new eg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function cg(t){return new eg(rg,t)}function lg(){return new eg("app-deleted","The Firebase app was deleted.")}function hg(t){return new eg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fg(t,e){return new eg("invalid-format","String does not match format '"+t+"': "+e)}function pg(t){throw new eg("internal-error","Internal error: "+t)}var dg={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gg=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function vg(t,e){switch(t){case dg.RAW:return new gg(mg(e));case dg.BASE64:case dg.BASE64URL:return new gg(yg(t,e));case dg.DATA_URL:return new gg((n=new bg(e)).base64?yg(dg.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw fg(dg.DATA_URL,"Malformed data URL.")}return mg(e)}(n.rest),new bg(e).contentType)}var n;throw sg()}function mg(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function yg(t,e){switch(t){case dg.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw fg(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case dg.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw fg(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw fg(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var bg=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw fg(dg.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),_g={STATE_CHANGED:"state_changed"},wg="running",Eg="pausing",Og="paused",Cg="success",Tg="canceling",Ig="canceled",Sg="error",Ag={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kg(t){switch(t){case wg:case Eg:case Tg:return Ag.RUNNING;case Og:return Ag.PAUSED;case Cg:return Ag.SUCCESS;case Ig:return Ag.CANCELED;case Sg:default:return Ag.ERROR}}var Ng=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),jg=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ng.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Ng.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Ng.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw pg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw pg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw pg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw pg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),xg=function(){function t(){}return t.prototype.createXhrIo=function(){return new jg},t}();function Rg(t){return"string"==typeof t||t instanceof String}function Pg(t){return Dg()&&t instanceof Blob}function Dg(){return"undefined"!=typeof Blob}function Lg(t,e,n,r){if(r<e)throw new eg(rg,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new eg(rg,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Mg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Fg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Mg();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Dg())return new Blob(t);throw new eg(ig,"This browser doesn't seem to support creating Blobs")}var Ug=function(){function t(t,e){var n=0,r="";Pg(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Pg(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Dg()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Fg.apply(null,r))}var i=e.map(function(t){return Rg(t)?vg(dg.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Vg=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new eg("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=tg.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new eg("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function qg(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Hg(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Bg(t){return"https://"+tg+"/v0"+t}function zg(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Wg(t,e){return e}var Kg=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Wg}}(),Gg=null;function Qg(){if(Gg)return Gg;var t=[];t.push(new Kg("bucket")),t.push(new Kg("generation")),t.push(new Kg("metageneration")),t.push(new Kg("name","fullPath",!0));var e=new Kg("name");e.xform=function(t,e){return function(t){return!Rg(t)||t.length<2?t:Hg(t)}(e)},t.push(e);var n=new Kg("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Kg("timeCreated")),t.push(new Kg("updated")),t.push(new Kg("md5Hash",null,!0)),t.push(new Kg("cacheControl",null,!0)),t.push(new Kg("contentDisposition",null,!0)),t.push(new Kg("contentEncoding",null,!0)),t.push(new Kg("contentLanguage",null,!0)),t.push(new Kg("contentType",null,!0)),t.push(new Kg("metadata","customMetadata",!0)),Gg=t}function $g(t,e,n){var r=qg(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Vg(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Jg(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Xg=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Yg(t){if(!t)throw sg()}function Zg(t,e){return function(n,r){var i=$g(t,r,e);return Yg(null!==i),i}}function tv(t){return function(e,n){var r;return(r=401===e.getStatus()?new eg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new eg("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new eg("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function ev(t){var e=tv(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new eg("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function nv(t,e,n){var r=Bg(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Xg(r,"GET",Zg(t,n),i);return o.errorHandler=ev(e),o}function rv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var iv=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function ov(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){Yg(!1)}return Yg(!!n&&-1!==(e||["active"]).indexOf(n)),n}var sv=262144,av=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),uv=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function cv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var lv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Qg(),this._resumable=this._shouldDoResumable(this._blob),this._state=wg,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(ng)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Sg))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(ng)?r.completeTransitions_():(r._error=t,r._transition(Sg))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===wg&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case wg:t(n);break;case Tg:e._transition(Ig);break;case Eg:e._transition(Og)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=rv(e,r,i),a={name:s.fullPath},u=Bg(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Jg(s,n),h=new Xg(u,"POST",function(t){var e;ov(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Yg(!1)}return Yg(Rg(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=tv(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new Xg(n,"POST",function(t){var e=ov(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Yg(!1)}n||Yg(!1);var i=Number(n);return Yg(!isNaN(i)),new iv(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=tv(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=sv*this._chunkMultiplier,n=new iv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new iv(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new eg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw ug();var d=new Xg(n,"POST",function(t,n){var i,s=ov(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Zg(e,o)(t,n):null,new iv(a,c,"final"===s,i)},e.maxUploadRetryTime);return d.headers=f,d.body=p.uploadData(),d.progressCallback=a||null,d.errorHandler=tv(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(Sg)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Cg)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){sv*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=nv(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(Cg)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=rv(e,r,i),c=Jg(u,n),l=Ug.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw ug();var h={name:u.fullPath},f=Bg(o),p=t.maxUploadRetryTime,d=new Xg(f,"POST",Zg(t,n),p);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=tv(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Cg)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Tg:case Eg:this._state=t,void 0!==this._request&&this._request.cancel();break;case wg:var e=this._state===Og;this._state=t,e&&(this._notifyObservers(),this._start());break;case Og:this._state=t,this._notifyObservers();break;case Ig:this._error=ag(),this._state=t,this._notifyObservers();break;case Sg:case Cg:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case Eg:this._transition(Og);break;case Tg:this._transition(Ig);break;case wg:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=kg(this._state);return new uv(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new av(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(kg(this._state)){case Ag.SUCCESS:cv(this._resolve.bind(null,this.snapshot))();break;case Ag.CANCELED:case Ag.ERROR:cv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(kg(this._state)){case Ag.RUNNING:case Ag.PAUSED:t.next&&cv(t.next.bind(t,this.snapshot))();break;case Ag.SUCCESS:t.complete&&cv(t.complete.bind(t))();break;case Ag.CANCELED:case Ag.ERROR:t.error&&cv(t.error.bind(t,this._error))();break;default:t.error&&cv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Og||this._state===Eg;return t&&this._transition(wg),t},t.prototype.pause=function(){var t=this._state===wg;return t&&this._transition(Eg),t},t.prototype.cancel=function(){var t=this._state===wg||this._state===Eg;return t&&this._transition(Tg),t},t}(),hv=function(){function t(t,e){this._service=t,this._location=e instanceof Vg?e:Vg.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Vg(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Hg(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Vg(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw hg(t)},t}();function fv(t){var e={prefixes:[],items:[]};return pv(t,e).then(function(){return e})}function pv(t,e,n){return Object(i.b)(this,void 0,void 0,function(){var r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,dv(t,{pageToken:n})];case 1:return r=i.sent(),(o=e.prefixes).push.apply(o,r.prefixes),(s=e.items).push.apply(s,r.items),null==r.nextPageToken?[3,3]:[4,pv(t,e,r.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function dv(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Lg("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),o=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Bg(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Xg(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=qg(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Vg(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Vg(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Yg(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=tv(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(o,n).getPromise()]}})})}function gv(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Vg(t._location.bucket,n);return new hv(t.storage,r)}var vv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),mv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new vv(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new vv(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new vv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new vv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),yv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new bv(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new bv(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),bv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(gv(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new mv(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new lv(t,new Ug(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=dg.RAW),this._throwIfRoot("putString"),new mv(function(t,e,n,r){void 0===n&&(n=dg.RAW),t._throwIfRoot("putString");var o=vg(n,e),s=Object(i.a)({},r);return null==s.contentType&&null!=o.contentType&&(s.contentType=o.contentType),new lv(t,new Ug(o.data,!0),s)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return fv(this._delegate).then(function(e){return new yv(e,t.storage)})},t.prototype.list=function(t){var e=this;return dv(this._delegate,t).then(function(t){return new yv(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=nv(t.storage,t._location,Qg()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r;return Object(i.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=Bg(e.fullServerUrl()),o=Jg(n,r),s=t.maxOperationRetryTime,a=new Xg(i,"PATCH",Zg(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=ev(e),a}(t.storage,t._location,e,Qg()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=Bg(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Xg(r,"GET",function(t,e){return function(n,r){var i=$g(t,r,e);return Yg(null!==i),function(t,e){var n=qg(e);if(null===n)return null;if(!Rg(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return Bg("/b/"+i(t.bucket)+"/o/"+i(n))+zg({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=ev(e),o}(t.storage,t._location,Qg()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new eg("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=Bg(e.fullServerUrl()),r=new Xg(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=ev(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw hg(t)},t}(),_v=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),wv=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=sg()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?lg():ag():new eg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ev(!1,null,!0)):this.backoffId_=function(e,n,r){var o=1,s=null,a=!1,u=0;function c(){return 2===u}var l=!1;function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l||(l=!0,n.apply(null,t))}function f(e){s=setTimeout(function(){s=null,function(e,n){if(n)e(!1,new Ev(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Ng.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Ev(s,n))}else{var a=n.getErrorCode()===Ng.ABORT;e(!1,new Ev(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(p,c())},e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!l)if(t)h.call.apply(h,Object(i.g)([null,t],e));else{var r;c()||a?h.call.apply(h,Object(i.g)([null,t],e)):(o<64&&(o*=2),1===u?(u=2,r=0):r=1e3*(o+Math.random()),f(r))}}var d=!1;function g(t){d||(d=!0,l||(null!==s?(t||(u=2),clearTimeout(s),f(0)):t||(u=1)))}return f(0),setTimeout(function(){a=!0,g(!0)},r),g}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ev=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Ov(t){return/^[A-Za-z]+:\/\//.test(t)}function Cv(t,e){if(t instanceof Iv){var n=t;if(null==n._bucket)throw new eg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new hv(n,n._bucket);return null!=e?Cv(r,e):r}if(void 0!==e){if(e.includes(".."))throw cg('`path` param cannot contain ".."');return gv(t,e)}return t}function Tv(t,e){if(e&&Ov(e)){if(t instanceof Iv)return new hv(t,e);throw cg("To use ref(service, url), the first argument must be a Storage instance.")}return Cv(t,e)}var Iv=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Vg.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:Vg.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Lg("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Lg("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e;return Object(i.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new hv(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new _v(lg());var i=function(t,e,n,i){var o=zg(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==r.a?r.a.SDK_VERSION:"AppManager")}(a),new wv(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,this._pool);return this._requests.add(i),i.getPromise().then(function(){return n._requests.delete(i)},function(){return n._requests.delete(i)}),i},t}(),Sv=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ov(t))throw cg("ref() expected a child path but got a URL, use refFromURL instead.");return new bv(Tv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ov(t))throw cg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vg.makeFromUrl(t)}catch(e){throw cg("refFromUrl() expected a valid full URL but got an invalid one.")}return new bv(Tv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Av(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Sv(n,new Iv(n,r,new xg,e))}!function(t){var e={TaskState:Ag,TaskEvent:_g,StringFormat:dg,Storage:Iv,Reference:bv};t.INTERNAL.registerComponent(new cr.a("storage",Av,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(r.a);var kv,Nv,jv,xv="0.4.4",Rv=xv,Pv="FB-PERF-TRACE-MEASURE",Dv="_wt_",Lv="_fcp",Mv="_fid",Fv="@firebase/performance/config",Uv="@firebase/performance/configexpire",Vv="Performance",qv=((kv={})["trace started"]="Trace {$traceName} was started before.",kv["trace stopped"]="Trace {$traceName} is not running.",kv["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",kv["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",kv["no window"]="Window is not available.",kv["no app id"]="App id is not available.",kv["no project id"]="Project id is not available.",kv["no api key"]="Api key is not available.",kv["invalid cc log"]="Attempted to queue invalid cc event",kv["FB not default"]="Performance can only start when Firebase app instance is the default one.",kv["RC response not ok"]="RC response is not ok",kv["invalid attribute name"]="Attribute name {$attributeName} is invalid.",kv["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",kv["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",kv["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",kv),Hv=new s.b("performance",Vv,qv),Bv=new o.b(Vv);Bv.logLevel=o.a.INFO;var zv,Wv=function(){function t(t){if(this.window=t,!t)throw Hv.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(s.w)()||(Bv.info("IndexedDB is not supported by current browswer"),!1):(Bv.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Nv&&(Nv=new t(jv)),Nv},t}();function Kv(t,e){var n=t.length-e.length;if(n<0||n>1)throw Hv.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Gv,Qv=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Kv("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Kv("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Hv.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Hv.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Hv.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===zv&&(zv=new t),zv},t}();function $v(){return Gv}var Jv=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),Xv=["firebase_","google_","ga_"],Yv=new RegExp("^[a-zA-Z]\\w*$");function Zv(){var t=Wv.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function tm(){switch(Wv.getInstance().document.visibilityState){case"visible":return Jv.VISIBLE;case"hidden":return Jv.HIDDEN;default:return Jv.UNKNOWN}}function em(){var t=Wv.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function nm(t){if(!t)return t;var e=Qv.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=rm(e.tracesSamplingRate),e.logNetworkAfterSampling=rm(e.networkRequestsSamplingRate),t}function rm(t){return Math.random()<=t}var im,om=1;function sm(){return om=2,im=im||function(){var t=Wv.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=Qv.getInstance().installationsService.getId()).then(function(t){Gv=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=Wv.getInstance().localStorage;if(t){var e=t.getItem(Uv);if(e&&Number(e)>Date.now()){var n=t.getItem(Fv);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(nm(e),Promise.resolve()):function(t){return(e=Qv.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Qv.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Qv.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Qv.getInstance().getAppId(),app_version:Rv,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw Hv.create("RC response not ok")})}).catch(function(){Bv.info("Could not fetch config, will use default configs")});var e}(t).then(nm).then(function(t){return function(t){var e=Wv.getInstance().localStorage;t&&e&&(e.setItem(Fv,JSON.stringify(t)),e.setItem(Uv,String(Date.now()+60*Qv.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return am()},function(){return am()})}function am(){om=3}var um,cm=1e4,lm=3,hm=[],fm=!1;function pm(t){setTimeout(function(){if(0!==lm)return hm.length?void function(){var t=Object(i.g)(hm);hm=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,e){return function(t){var e=Qv.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||Bv.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=cm;isNaN(n)||(r=Math.max(n,r));var o=t.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(hm=Object(i.g)(e,hm),Bv.info("Retry transport request later.")),lm=3,pm(r)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Qv.getInstance().logSource,log_event:e},t).catch(function(){hm=Object(i.g)(t,hm),lm--,Bv.info("Tries left: "+lm+"."),pm(cm)})}():pm(cm)},t)}function dm(t){if(!t.eventTime||!t.message)throw Hv.create("invalid cc log");hm=Object(i.g)(hm,[t])}function gm(t,e){um||(um=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];dm({message:t.apply(void 0,e),eventTime:Date.now()})}}(ym)),um(t,e)}function vm(t){var e=Qv.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Wv.getInstance().requiredApisAvailable()&&(t.isAuto&&tm()!==Jv.VISIBLE||(3===om?mm(t):sm().then(function(){return mm(t)},function(){return mm(t)})))}function mm(t){if($v()){var e=Qv.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return gm(t,1)},0)}}function ym(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:bm(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:bm(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function bm(){return{google_app_id:Qv.getInstance().getAppId(),app_instance_id:$v(),web_app_info:{sdk_version:Rv,page_url:Wv.getInstance().getUrl(),service_worker_status:Zv(),visibility_state:tm(),effective_connection_type:em()},application_process_state:0}}var _m=["_fp",Lv,Mv],wm=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Wv.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Hv.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Hv.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),vm(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Hv.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Hv.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(i.a)({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var s=o[r];isNaN(Number(n.metrics[s]))||(this.counters[s]=Number(Math.floor(n.metrics[s])))}vm(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(Dv)&&_m.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw Hv.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Bv.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||Xv.some(function(e){return t.startsWith(e)})||!t.match(Yv))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw Hv.create("invalid attribute name",{attributeName:t});if(!r)throw Hv.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(i.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=Wv.getInstance().getUrl();if(i){var o=new t(Dv+i,!0),s=Math.floor(1e3*Wv.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(Lv,Math.floor(1e3*u.startTime)),r&&o.putMetric(Mv,Math.floor(1e3*r))}vm(o)}},t.createUserTimingTrace=function(e){vm(new t(e,!1,e))},t}();function Em(t){var e=t;if(e&&void 0!==e.responseStart){var n=Wv.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Qv.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return gm(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Om(){$v()&&(setTimeout(function(){return function(){var t=Wv.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){wm.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),wm.createOobTrace(e,n,t))})}else wm.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=Wv.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)Em(n[e]);t.setupObserver("resource",Em)}()},0),setTimeout(function(){return function(){for(var t=Wv.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)Cm(n[e]);t.setupObserver("measure",Cm)}()},0))}function Cm(t){var e=t.name;e.substring(0,Pv.length)!==Pv&&wm.createUserTimingTrace(e)}var Tm=function(){function t(t){this.app=t,Wv.getInstance().requiredApisAvailable()&&Object(s.N)().then(function(t){t&&(fm||(pm(5500),fm=!0),sm().then(Om,Om))}).catch(function(t){Bv.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new wm(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Qv.getInstance().instrumentationEnabled},set:function(t){Qv.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Qv.getInstance().dataCollectionEnabled},set:function(t){Qv.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new cr.a("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw Hv.create("FB not default");if("undefined"==typeof window)throw Hv.create("no window");return function(t){jv=t}(window),Qv.getInstance().firebaseAppInstance=t,Qv.getInstance().installationsService=e,new Tm(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",xv)}(r.a);var Im,Sm="https://www.googletagmanager.com/gtag/js",Am=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),km=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),Nm=new o.b("@firebase/analytics");function jm(t,e,n,r,o,s){return Object(i.b)(this,void 0,void 0,function(){var a,u,c,l;return Object(i.d)(this,function(i){switch(i.label){case 0:a=r[o],i.label=1;case 1:return i.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return i.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=i.sent(),(c=u.find(function(t){return t.measurementId===o}))?[4,e[c.appId]]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return l=i.sent(),Nm.error(l),[3,8];case 8:return t(Am.CONFIG,o,s),[2]}})})}function xm(t,e,n,r,o){return Object(i.b)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),s=[],o&&o.send_to?(a=o.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(u=i.sent(),c=function(t){var n=u.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return s=[],"break";s.push(r)},l=0,h=a;l<h.length&&"break"!==c(h[l]);l++);i.label=2;case 2:return 0===s.length&&(s=Object.values(e)),[4,Promise.all(s)];case 3:return i.sent(),t(Am.EVENT,r,o||{}),[3,5];case 4:return f=i.sent(),Nm.error(f),[3,5];case 5:return[2]}})})}var Rm=((Im={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Im["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Im["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Im["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Im["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Im["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Im["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Im["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Im["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Im),Pm=new s.b("analytics","Analytics",Rm),Dm=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Lm(t){var e;return Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,r)];case 1:if(200===(s=i.sent()).status||304===s.status)return[3,6];a="",i.label=2;case 2:return i.trys.push([2,4,,5]),[4,s.json()];case 3:return u=i.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return i.sent(),[3,5];case 5:throw Pm.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}var c})})}function Mm(t,e,n,r){var o=e.throttleEndTimeMillis,a=e.backoffCount;return void 0===r&&(r=Dm),Object(i.b)(this,void 0,void 0,function(){var e,u,c,l,h,f,p;return Object(i.d)(this,function(i){switch(i.label){case 0:e=t.appId,u=t.measurementId,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Fm(n,o)];case 2:return i.sent(),[3,4];case 3:if(c=i.sent(),u)return Nm.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:u}];throw c;case 4:return i.trys.push([4,6,,7]),[4,Lm(t)];case 5:return l=i.sent(),r.deleteThrottleMetadata(e),[2,l];case 6:if(!function(t){if(!(t instanceof s.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=i.sent())){if(r.deleteThrottleMetadata(e),u)return Nm.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+u+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:u}];throw h}return f=503===Number(h.customData.httpStatus)?Object(s.j)(a,r.intervalMillis,30):Object(s.j)(a,r.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(e,p),Nm.debug("Calling attemptFetch again in "+f+" millis"),[2,Mm(t,p,n,r)];case 7:return[2]}})})}function Fm(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(Pm.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var Um,Vm,qm=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),Hm={},Bm=[],zm={},Wm="dataLayer",Km="gtag",Gm=!1;function Qm(t){if(Gm)throw Pm.create("already-initialized");t.dataLayerName&&(Wm=t.dataLayerName),t.gtagName&&(Km=t.gtagName)}var $m="analytics";function Jm(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:if(Object(s.s)())return[2,!1];if(!Object(s.e)())return[2,!1];if(!Object(s.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(s.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new cr.a($m,function(t){return function(t,e){!function(){var t=[];if(Object(s.s)()&&t.push("This is a browser extension environment."),Object(s.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=Pm.create("invalid-analytics-context",{errorInfo:e});Nm.warn(n.message)}}();var n=t.options.appId;if(!n)throw Pm.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Pm.create("no-api-key");Nm.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Hm[n])throw Pm.create("already-exists",{id:n});if(!Gm){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Sm))return r}return null})()||function(t){var e=document.createElement("script");e.src=Sm+"?l="+t,e.async=!0,document.head.appendChild(e)}(Wm),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Wm);var r=function(t,e,n,r,o){var s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(s=window[o]),window[o]=function(t,e,n,r){return function(o,s,a){return Object(i.b)(this,void 0,void 0,function(){var u;return Object(i.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),o!==Am.EVENT?[3,2]:[4,xm(t,e,n,s,a)];case 1:return i.sent(),[3,5];case 2:return o!==Am.CONFIG?[3,4]:[4,jm(t,e,n,r,s,a)];case 3:return i.sent(),[3,5];case 4:t(Am.SET,s),i.label=5;case 5:return[3,7];case 6:return u=i.sent(),Nm.error(u),[3,7];case 7:return[2]}})})}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[o]}}(Hm,Bm,zm,Wm,Km);Vm=r.wrappedGtag,Um=r.gtagCore,Gm=!0}return Hm[n]=function(t,e,n,r,o){return Object(i.b)(this,void 0,void 0,function(){var a,u,c,l,h,f,p;return Object(i.d)(this,function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Dm),Object(i.b)(this,void 0,void 0,function(){var n,r,o,s,a,u,c=this;return Object(i.d)(this,function(l){if(o=(n=t.options).apiKey,s=n.measurementId,!(r=n.appId))throw Pm.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:r}];throw Pm.create("no-api-key")}return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new qm,setTimeout(function(){return Object(i.b)(c,void 0,void 0,function(){return Object(i.d)(this,function(t){return u.abort(),[2]})})},6e4),[2,Mm({appId:r,apiKey:o,measurementId:s},a,u,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Nm.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return Nm.error(t)}),e.push(a),u=function(){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(e){switch(e.label){case 0:return Object(s.w)()?[3,1]:(Nm.warn(Pm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(s.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Nm.warn(Pm.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([a,u])];case 1:return c=d.sent(),l=c[0],h=c[1],o("js",new Date),(p={}).origin="firebase",p.update=!0,f=p,null!=h&&(f.firebase_id=h),o(Am.CONFIG,l.measurementId,f),[2,l.measurementId]}})})}(t,Bm,zm,e,Um),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,o){return Object(i.b)(this,void 0,void 0,function(){var s,a;return Object(i.d)(this,function(u){switch(u.label){case 0:return o&&o.global?(t(Am.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:s=u.sent(),a=Object(i.a)(Object(i.a)({},r),{send_to:s}),t(Am.EVENT,n,a),u.label=3;case 3:return[2]}})})})(Vm,Hm[n],t,e,r).catch(function(t){return Nm.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o;return Object(i.d)(this,function(i){switch(i.label){case 0:return r&&r.global?(t(Am.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Am.CONFIG,o,{update:!0,screen_name:n}),i.label=3;case 3:return[2]}})})})(Vm,Hm[n],t,e).catch(function(t){return Nm.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o;return Object(i.d)(this,function(i){switch(i.label){case 0:return r&&r.global?(t(Am.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:o=i.sent(),t(Am.CONFIG,o,{update:!0,user_id:n}),i.label=3;case 3:return[2]}})})})(Vm,Hm[n],t,e).catch(function(t){return Nm.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(i.b)(this,void 0,void 0,function(){var o,s,a,u,c;return Object(i.d)(this,function(i){switch(i.label){case 0:if(!r||!r.global)return[3,1];for(o={},s=0,a=Object.keys(n);s<a.length;s++)o["user_properties."+(u=a[s])]=n[u];return t(Am.SET,o),[2,Promise.resolve()];case 1:return[4,e];case 2:c=i.sent(),t(Am.CONFIG,c,{update:!0,user_properties:n}),i.label=3;case 3:return[2]}})})})(Vm,Hm[n],t,e).catch(function(t){return Nm.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(Hm[n],t).catch(function(t){return Nm.error(t)})},INTERNAL:{delete:function(){return delete Hm[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:Qm,EventName:km,isSupported:Jm})),t.INTERNAL.registerComponent(new cr.a("analytics-internal",function(t){try{return{logEvent:t.getProvider($m).getImmediate().logEvent}}catch(e){throw Pm.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(r.a);var Xm,Ym=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=i.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return o=i.sent(),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===o.status&&s.push(this.storage.setLastSuccessfulFetchResponse(o)),[4,Promise.all(s)];case 3:return i.sent(),[2,o]}})})},t}(),Zm=((Xm={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Xm["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Xm["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Xm["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Xm["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Xm["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Xm["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Xm["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Xm["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Xm["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Xm["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Xm["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Xm["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Xm),ty=new s.b("remoteconfig","Remote Config",Zm),ey=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n,r,o,s,a,u,c,l,h,f,p,d,g,v,m;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=i.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,o={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},s={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(o)},a=fetch(r,s),u=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,Promise.race([a,u])];case 3:return i.sent(),[4,a];case 4:return c=i.sent(),[3,6];case 5:throw l=i.sent(),h="fetch-client-network","AbortError"===l.name&&(h="fetch-timeout"),ty.create(h,{originalErrorMessage:l.message});case 6:if(f=c.status,p=c.headers.get("ETag")||void 0,200!==c.status)return[3,11];v=void 0,i.label=7;case 7:return i.trys.push([7,9,,10]),[4,c.json()];case 8:return v=i.sent(),[3,10];case 9:throw m=i.sent(),ty.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:d=v.entries,g=v.state,i.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?f=500:"NO_CHANGE"===g?f=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(d={}),304!==f&&200!==f)throw ty.create("fetch-status",{httpStatus:f});return[2,{status:f,eTag:p,config:d}]}var y})})},t}(),ny=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),ry=["1","true","t","yes","y","on"],iy=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&ry.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),oy=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=o.a.DEBUG;break;case"silent":this._logger.logLevel=o.a.SILENT;break;default:this._logger.logLevel=o.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e,n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(i.d)(this,function(o){switch(o.label){case 0:t=new ny,setTimeout(function(){return Object(i.b)(r,void 0,void 0,function(){return Object(i.d)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return o.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return o.sent(),[3,6];case 4:return e=o.sent(),n=(a=e)instanceof s.c&&-1!==a.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw o.sent(),e;case 6:return[2]}var a})})},t.prototype.fetchAndActivate=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(i.a)(Object(i.a)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new iy("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new iy("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new iy("static"))},t}();function sy(t,e){var n=t.target.error||void 0;return ty.create(e,{originalErrorMessage:n&&n.message})}var ay="app_namespace_store",uy=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(sy(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(ay,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([ay],"readonly").objectStore(ay),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(sy(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(u){i(ty.create("storage-get",{originalErrorMessage:u&&u.message}))}})]}})})},t.prototype.set=function(t,e){return Object(i.b)(this,void 0,void 0,function(){var n,r=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([ay],"readwrite").objectStore(ay),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(sy(t,"storage-set"))},u.onsuccess=function(){i()}}catch(c){o(ty.create("storage-set",{originalErrorMessage:c&&c.message}))}})]}})})},t.prototype.delete=function(t){return Object(i.b)(this,void 0,void 0,function(){var e,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([ay],"readwrite").objectStore(ay),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(sy(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(u){i(ty.create("storage-delete",{originalErrorMessage:u&&u.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),cy=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(i.b)(this,void 0,void 0,function(){var t,e,n,r,o,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=i.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(o=i.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,n];case 3:return(s=i.sent())&&(this.activeConfig=s),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function ly(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(ty.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var hy,fy=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(i.b)(this,void 0,void 0,function(){var e,o,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,ly(t.signal,n)];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=i.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return i.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof s.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(o=i.sent()))throw o;return a={throttleEndTimeMillis:Date.now()+Object(s.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(a)];case 6:return i.sent(),[2,this.attemptFetch(t,a)];case 7:return[2]}})})},t}(),py="@firebase/remote-config";(hy=r.a).INTERNAL.registerComponent(new cr.a("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw ty.create("registration-window");var i=n.options,s=i.projectId,a=i.apiKey,u=i.appId;if(!s)throw ty.create("registration-project-id");if(!a)throw ty.create("registration-api-key");if(!u)throw ty.create("registration-app-id");var c=new uy(u,n.name,e=e||"firebase"),l=new cy(c),h=new o.b(py);h.logLevel=o.a.ERROR;var f=new ey(r,hy.SDK_VERSION,e,s,a,u),p=new fy(f,c),d=new Ym(p,c,l,h),g=new oy(n,d,l,c,h);return g.ensureInitialized(),g},"PUBLIC").setMultipleInstances(!0)),hy.registerVersion(py,"0.1.30"),r.a.registerVersion("firebase","8.1.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),r.a.registerVersion("firebase","8.1.1");var dy=n("fXoL"),gy=n("tyNb");let vy=(()=>{class t{constructor(t){this.router=t}signUp(t,e){r.a.auth().createUserWithEmailAndPassword(t,e).catch(t=>console.log(t))}signInUser(t,e){r.a.auth().signInWithEmailAndPassword(t,e).then(t=>{this.router.navigate([""]),r.a.auth().currentUser.getIdToken().then(t=>{this.token=t}),console.log(t)}).catch(t=>console.log(t))}getToken(){return r.a.auth().currentUser.getIdToken().then(t=>{this.token=t}),this.token}logOut(){r.a.auth().signOut(),this.token=null}isAuthenticated(){return null!=this.token}}return t.\u0275fac=function(e){return new(e||t)(dy.Ob(gy.c))},t.\u0275prov=dy.Db({token:t,factory:t.\u0275fac}),t})()},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},tyNb:function(t,e,n){"use strict";n.d(e,"a",function(){return ye}),n.d(e,"b",function(){return Kn}),n.d(e,"c",function(){return Fn}),n.d(e,"d",function(){return Hn}),n.d(e,"e",function(){return Vn}),n.d(e,"f",function(){return tr}),n.d(e,"g",function(){return Bn});var r=n("ofXK"),i=n("fXoL"),o=n("LRne"),s=n("Cfvw"),a=n("XNiG"),u=n("9ppp");class c extends a.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u.a;return this._value}next(t){super.next(this._value=t)}}var l=n("z+Ro"),h=n("DH7j"),f=n("7o/Q");class p extends f.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class d extends f.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var g=n("SeVD"),v=n("HDdC");function m(t,e,n,r,i=new d(t,n,r)){if(!i.closed)return e instanceof v.a?e.subscribe(i):Object(g.a)(e)(i)}var y=n("yCtX");const b={};class _{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new w(t,this.resultSelector))}}class w extends p{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(b),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(m(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===b?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const E=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),O=new v.a(t=>t.complete());function C(t){return t?function(t){return new v.a(e=>t.schedule(()=>e.complete()))}(t):O}function T(t){return new v.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(s.a)(n):C()).subscribe(e)})}var I=n("lJxs"),S=n("bHdf");function A(){return Object(S.a)(1)}var k=n("pLZG");const N=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function j(t){return function(e){return 0===t?C():e.lift(new x(t))}}class x{constructor(t){if(this.total=t,this.total<0)throw new N}call(t,e){return e.subscribe(new R(t,this.total))}}class R extends f.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function P(t=M){return e=>e.lift(new D(t))}class D{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new L(t,this.errorFactory))}}class L extends f.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function M(){return new E}function F(t=null){return e=>e.lift(new U(t))}class U{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new V(t,this.defaultValue))}}class V extends f.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var q=n("SpAZ"),H=n("zx2A");function B(t,e){return"function"==typeof e?n=>n.pipe(B((n,r)=>Object(s.a)(t(n,r)).pipe(Object(I.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new z(t))}class z{constructor(t){this.project=t}call(t,e){return e.subscribe(new W(t,this.project))}}class W extends H.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new H.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(H.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function K(t){return e=>0===t?C():e.lift(new G(t))}class G{constructor(t){if(this.total=t,this.total<0)throw new N}call(t,e){return e.subscribe(new Q(t,this.total))}}class Q extends f.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function $(...t){return A()(Object(o.a)(...t))}class J{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new X(t,this.accumulator,this.seed,this.hasSeed))}}class X extends f.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Y(t){return function(e){const n=new Z(t),r=e.lift(n);return n.caught=r}}class Z{constructor(t){this.selector=t}call(t,e){return e.subscribe(new tt(t,this.selector,this.caught))}}class tt extends H.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new H.a(this);this.add(r);const i=Object(H.c)(n,r);i!==r&&this.add(i)}}}var et=n("bOdf");function nt(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(k.a)((e,n)=>t(e,n,r)):q.a,K(1),n?F(e):P(()=>new E))}var rt=n("5+tZ");function it(){}var ot=n("n6bG");function st(t,e,n){return function(r){return r.lift(new at(t,e,n))}}class at{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new ut(t,this.nextOrObserver,this.error,this.complete))}}class ut extends f.a{constructor(t,e,n,r){super(t),this._tapNext=it,this._tapError=it,this._tapComplete=it,this._tapError=n||it,this._tapComplete=r||it,Object(ot.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||it,this._tapError=e.error||it,this._tapComplete=e.complete||it)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}var ct=n("quSY");class lt{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ht(t,this.callback))}}class ht extends f.a{constructor(t,e){super(t),this.add(new ct.a(e))}}class ft{constructor(t,e){this.id=t,this.url=e}}class pt extends ft{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dt extends ft{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gt extends ft{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vt extends ft{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mt extends ft{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yt extends ft{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bt extends ft{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _t extends ft{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wt extends ft{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Et{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ot{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ct{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tt{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class It{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class St{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class At{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class Nt{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function jt(t){return new Nt(t)}function xt(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Rt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Pt(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Dt(t[i],e[i]))return!1;return!0}function Dt(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Lt(t){return Array.prototype.concat.apply([],t)}function Mt(t){return t.length>0?t[t.length-1]:null}function Ft(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ut(t){return Object(i.ob)(t)?t:Object(i.pb)(t)?Object(s.a)(Promise.resolve(t)):Object(o.a)(t)}function Vt(t,e,n){return n?function(t,e){return Pt(t,e)}(t.queryParams,e.queryParams)&&qt(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Dt(t[n],e[n]))}(t.queryParams,e.queryParams)&&Ht(t.root,e.root)}function qt(t,e){if(!Gt(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!qt(t.children[n],e.children[n]))return!1}return!0}function Ht(t,e){return Bt(t,e,e.segments)}function Bt(t,e,n){if(t.segments.length>n.length)return!!Gt(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Gt(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Ht(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Gt(t.segments,r)&&!!t.children.primary&&Bt(t.children.primary,e,i)}}class zt{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jt(this.queryParams)),this._queryParamMap}toString(){return Xt.serialize(this)}}class Wt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ft(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yt(this)}}class Kt{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=jt(this.parameters)),this._parameterMap}toString(){return oe(this)}}function Gt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Qt(t,e){let n=[];return Ft(t.children,(t,r)=>{r===kt&&(n=n.concat(e(t,r)))}),Ft(t.children,(t,r)=>{r!==kt&&(n=n.concat(e(t,r)))}),n}class $t{}class Jt{parse(t){const e=new le(t);return new zt(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+Zt(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${ee(e)}=${ee(t)}`).join("&"):`${ee(e)}=${ee(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const Xt=new Jt;function Yt(t){return t.segments.map(t=>oe(t)).join("/")}function Zt(t,e){if(!t.hasChildren())return Yt(t);if(e){const e=t.children.primary?Zt(t.children.primary,!1):"",n=[];return Ft(t.children,(t,e)=>{e!==kt&&n.push(`${e}:${Zt(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=Qt(t,(e,n)=>n===kt?[Zt(t.children.primary,!1)]:[`${n}:${Zt(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${Yt(t)}/${e[0]}`:`${Yt(t)}/(${e.join("//")})`}}function te(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ee(t){return te(t).replace(/%3B/gi,";")}function ne(t){return te(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function re(t){return decodeURIComponent(t)}function ie(t){return re(t.replace(/\+/g,"%20"))}function oe(t){return`${ne(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${ne(t)}=${ne(e[t])}`).join("")}`;var e}const se=/^[^\/()?;=#]+/;function ae(t){const e=t.match(se);return e?e[0]:""}const ue=/^[^=?&#]+/,ce=/^[^?&#]+/;class le{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Wt(t,e)),n}parseSegment(){const t=ae(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Kt(re(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ae(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=ae(this.remaining);t&&(n=t,this.capture(n))}t[re(e)]=re(n)}parseQueryParam(t){const e=function(t){const e=t.match(ue);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(ce);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ie(e),i=ie(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ae(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=kt);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Wt([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class he{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=fe(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=fe(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pe(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return pe(t,this._root).map(t=>t.value)}}function fe(t,e){if(t===e.value)return e;for(const n of e.children){const e=fe(t,n);if(e)return e}return null}function pe(t,e){if(t===e.value)return[e];for(const n of e.children){const r=pe(t,n);if(r.length)return r.unshift(e),r}return[]}class de{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ge(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class ve extends he{constructor(t,e){super(t),this.snapshot=e,Ee(this,t)}toString(){return this.snapshot.toString()}}function me(t,e){const n=function(t,e){const n=new _e([],{},{},"",{},kt,e,null,t.root,-1,{});return new we("",new de(n,[]))}(t,e),r=new c([new Kt("",{})]),i=new c({}),o=new c({}),s=new c({}),a=new c(""),u=new ye(r,i,s,a,o,kt,e,n.root);return u.snapshot=n.root,new ve(new de(u,[]),n)}class ye{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(I.a)(t=>jt(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(I.a)(t=>jt(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function be(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class _e{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class we extends he{constructor(t,e){super(e),this.url=t,Ee(this,e)}toString(){return Oe(this._root)}}function Ee(t,e){e.value._routerState=t,e.children.forEach(e=>Ee(t,e))}function Oe(t){const e=t.children.length>0?` { ${t.children.map(Oe).join(", ")} } `:"";return`${t.value}${e}`}function Ce(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Pt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Pt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Pt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Pt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Te(t,e){var n,r;return Pt(t.params,e.params)&&Gt(n=t.url,r=e.url)&&n.every((t,e)=>Pt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Te(t.parent,e.parent))}function Ie(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Ie(t,e,r);return Ie(t,e)})}(t,e,n);return new de(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Se(e,t),t}{const n=new ye(new c((r=e.value).url),new c(r.params),new c(r.queryParams),new c(r.fragment),new c(r.data),r.outlet,r.component,r),i=e.children.map(e=>Ie(t,e));return new de(n,i)}}var r}function Se(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Se(t.children[n],e.children[n])}function Ae(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ke(t){return"object"==typeof t&&null!=t&&t.outlets}function Ne(t,e,n,r,i){let o={};return r&&Ft(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new zt(n.root===t?e:je(n.root,t,e),o,i)}function je(t,e,n){const r={};return Ft(t.children,(t,i)=>{r[i]=t===e?n:je(t,e,n)}),new Wt(t.segments,r)}class xe{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ae(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(ke);if(r&&r!==Mt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Re{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Pe(t,e,n){if(t||(t=new Wt([],{})),0===t.segments.length&&t.hasChildren())return De(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(ke(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Ue(a,u,e))return o;r+=2}else{if(!Ue(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Wt(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Wt(t.segments.slice(r.pathIndex),t.children),De(e,0,i)}return r.match&&0===i.length?new Wt(t.segments,{}):r.match&&!t.hasChildren()?Le(t,e,n):r.match?De(t,0,i):Le(t,e,n)}function De(t,e,n){if(0===n.length)return new Wt(t.segments,{});{const r=function(t){return ke(t[0])?t[0].outlets:{[kt]:t}}(n),i={};return Ft(r,(n,r)=>{null!==n&&(i[r]=Pe(t.children[r],e,n))}),Ft(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Wt(t.segments,i)}}function Le(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(ke(o)){const t=Me(o.outlets);return new Wt(r,t)}if(0===i&&Ae(n[0])){r.push(new Kt(t.segments[e].path,n[0])),i++;continue}const s=ke(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&Ae(a)?(r.push(new Kt(s,Fe(a))),i+=2):(r.push(new Kt(s,{})),i++)}return new Wt(r,{})}function Me(t){const e={};return Ft(t,(t,n)=>{null!==t&&(e[n]=Le(new Wt([],{}),0,t))}),e}function Fe(t){const e={};return Ft(t,(t,n)=>e[n]=""+t),e}function Ue(t,e,n){return t==n.path&&Pt(e,n.parameters)}class Ve{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ce(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=ge(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ft(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=ge(t),i=t.value.component?n.children:e;Ft(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=ge(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new St(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Tt(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ce(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),qe(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function qe(t){Ce(t.value),t.children.forEach(qe)}class He{constructor(t,e){this.routes=t,this.module=e}}function Be(t){return"function"==typeof t}function ze(t){return t instanceof zt}const We=Symbol("INITIAL_VALUE");function Ke(){return B(t=>function(...t){let e=void 0,n=void 0;return Object(l.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(h.a)(t[0])&&(t=t[0]),Object(y.a)(t,n).lift(new _(e))}(...t.map(t=>t.pipe(K(1),function(...t){const e=t[t.length-1];return Object(l.a)(e)?(t.pop(),n=>$(t,n,e)):e=>$(t,e)}(We)))).pipe(function(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new J(t,e,n))}}((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==We)return t;if(r===We&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ze(r))return r}return t},t)},We),Object(k.a)(t=>t!==We),Object(I.a)(t=>ze(t)?t:!0===t),K(1)))}let Ge=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Bb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&i.Ib(0,"router-outlet")},directives:function(){return[Bn]},encapsulation:2}),t})();function Qe(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];$e(r,Je(e,r))}}function $e(t,e){t.children&&Qe(t.children,e)}function Je(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Xe(t){const e=t.children&&t.children.map(Xe),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==kt&&(n.component=Ge),n}function Ye(t){return t.outlet||kt}class Ze{constructor(t){this.segmentGroup=t||null}}class tn{constructor(t){this.urlTree=t}}function en(t){return new v.a(e=>e.error(new Ze(t)))}function nn(t){return new v.a(e=>e.error(new tn(t)))}function rn(t){return new v.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class on{constructor(t,e,n,r,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(i.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,kt).pipe(Object(I.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Y(t=>{if(t instanceof tn)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Ze)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,kt).pipe(Object(I.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Y(t=>{if(t instanceof Ze)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Wt([],{[kt]:t}):t;return new zt(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(I.a)(t=>new Wt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(o.a)({});const n=[],r=[],i={};return Ft(t,(t,o)=>{const s=e(o,t).pipe(Object(I.a)(t=>i[o]=t));o===kt?n.push(s):r.push(s)}),o.a.apply(null,n.concat(r)).pipe(A(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(k.a)((e,n)=>t(e,n,r)):q.a,j(1),n?F(e):P(()=>new E))}(),Object(I.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,a){const u=function(t){return t.reduce((t,e)=>{const n=Ye(e);return t.has(n)?t.get(n).push(e):t.set(n,[e]),t},new Map)}(n);u.has(i)||u.set(i,[]);const c=n=>Object(s.a)(n).pipe(Object(et.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,a).pipe(Y(t=>{if(t instanceof Ze)return Object(o.a)(null);throw t}))),nt(t=>null!==t),Y(t=>{if(t instanceof E||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(o.a)(new Wt([],{}));throw new Ze(e)}throw t})),l=Array.from(u.entries()).map(([t,e])=>{const n=c(e);return t===i?n:n.pipe(Object(I.a)(()=>null),Y(()=>Object(o.a)(null)))});return Object(s.a)(l).pipe(t=>t.lift(new _(void 0)),nt(),Object(I.a)(t=>t.find(t=>null!==t)))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ye(r)!==o&&""!==r.path?en(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):en(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?nn(i):this.lineralizeSegments(n,i).pipe(Object(rt.a)(n=>{const i=new Wt(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=sn(e,r,i);if(!s)return en(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?nn(l):this.lineralizeSegments(r,l).pipe(Object(rt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(I.a)(t=>(n._loadedConfig=t,new Wt(r,{})))):Object(o.a)(new Wt(r,{}));const{matched:i,consumedSegments:s,lastChild:a}=sn(e,n,r);if(!i)return en(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(rt.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:a}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>un(t,e,n)&&Ye(n)!==kt)}(t,n,r)?{segmentGroup:an(new Wt(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&Ye(r)!==kt&&(n[Ye(r)]=new Wt([],{}));return n}(r,new Wt(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>un(t,e,n))}(t,n,r)?{segmentGroup:an(new Wt(t.segments,function(t,e,n,r){const i={};for(const o of n)un(t,e,o)&&!r[Ye(o)]&&(i[Ye(o)]=new Wt([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,s,u,r);return 0===a.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(I.a)(t=>new Wt(s,t))):0===r.length&&0===a.length?Object(o.a)(new Wt(s,{})):this.expandSegment(n,i,r,a,kt,!0).pipe(Object(I.a)(t=>new Wt(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(o.a)(new He(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(o.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(rt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(I.a)(t=>(e._loadedConfig=t,t))):function(t){return new v.a(e=>e.error(xt(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(o.a)(new He([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Be(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Be(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ut(o)});return Object(o.a)(i).pipe(Ke(),st(t=>{if(!ze(t))return;const e=xt(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(I.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(o.a)(n);if(r.numberOfChildren>1||!r.children.primary)return rn(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new zt(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ft(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Ft(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Wt(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function sn(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||Rt)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function an(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Wt(t.segments.concat(e.segments),e.children)}return t}function un(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}class cn{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ln{constructor(t,e){this.component=t,this.route=e}}function hn(t,e,n){const r=t._root;return pn(r,e?e._root:null,n,[r.value])}function fn(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function pn(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=ge(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Gt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gt(t.url,e.url)||!Pt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Te(t,e)||!Pt(t.queryParams,e.queryParams);case"paramsChange":default:return!Te(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new cn(r)):(o.data=s.data,o._resolvedData=s._resolvedData),pn(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ln(a.outlet.component,s))}else s&&dn(e,a,i),i.canActivateChecks.push(new cn(r)),pn(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ft(o,(t,e)=>dn(t,n.getContext(e),i)),i}function dn(t,e,n){const r=ge(t),i=t.value;Ft(r,(t,r)=>{dn(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new ln(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gn(t,e){return null!==t&&e&&e(new It(t)),Object(o.a)(!0)}function vn(t,e){return null!==t&&e&&e(new Ct(t)),Object(o.a)(!0)}function mn(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(o.a)(!0);const i=r.map(r=>T(()=>{const i=fn(r,e,n);let o;if(function(t){return t&&Be(t.canActivate)}(i))o=Ut(i.canActivate(e,t));else{if(!Be(i))throw new Error("Invalid CanActivate guard");o=Ut(i(e,t))}return o.pipe(nt())}));return Object(o.a)(i).pipe(Ke())}function yn(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>T(()=>{const i=e.guards.map(i=>{const o=fn(i,e.node,n);let s;if(function(t){return t&&Be(t.canActivateChild)}(o))s=Ut(o.canActivateChild(r,t));else{if(!Be(o))throw new Error("Invalid CanActivateChild guard");s=Ut(o(r,t))}return s.pipe(nt())});return Object(o.a)(i).pipe(Ke())}));return Object(o.a)(i).pipe(Ke())}class bn{}class _n{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=On(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,kt),n=new _e([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new de(n,e),i=new we(this.url,r);return this.inheritParamsAndData(i._root),Object(o.a)(i)}catch(t){return new v.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=be(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Qt(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===kt?-1:e.value.outlet===kt?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof bn))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new bn}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new bn;if((t.outlet||kt)!==r)throw new bn;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?Mt(n).parameters:{};i=new _e(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,In(t),r,t.component,t,wn(e),En(e)+n.length,Sn(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new bn;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||Rt)(n,t,e);if(!r)throw new bn;const i={};Ft(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new _e(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,In(t),r,t.component,t,wn(e),En(e)+o.length,Sn(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=On(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new de(i,t)]}if(0===a.length&&0===c.length)return[new de(i,[])];const l=this.processSegment(a,u,c,kt);return[new de(i,l)]}}function wn(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function En(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function On(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Cn(t,e,n)&&Tn(n)!==kt)}(t,n,r)){const i=new Wt(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Tn(o)!==kt){const n=new Wt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Tn(o)]=n}return i}(t,e,r,new Wt(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Cn(t,e,n))}(t,n,r)){const o=new Wt(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Cn(t,n,a)&&!i[Tn(a)]){const n=new Wt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Tn(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Wt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Cn(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Tn(t){return t.outlet||kt}function In(t){return t.data||{}}function Sn(t){return t.resolve||{}}function An(t){return function(e){return e.pipe(B(e=>{const n=t(e);return n?Object(s.a)(n).pipe(Object(I.a)(()=>e)):Object(s.a)([e])}))}}class kn extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Nn=new i.q("ROUTES");class jn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(I.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new He(Lt(r.injector.get(Nn)).map(Xe),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(s.a)(this.loader.load(t)):Ut(t()).pipe(Object(rt.a)(t=>t instanceof i.v?Object(o.a)(t):Object(s.a)(this.compiler.compileModuleAsync(t))))}}class xn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rn,this.attachRef=null}}class Rn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new xn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Pn{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Dn(t){throw t}function Ln(t,e,n){return e.parse("/")}function Mn(t,e){return Object(o.a)(null)}let Fn=(()=>{class t{constructor(t,e,n,r,o,s,u,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new a.a,this.errorHandler=Dn,this.malformedUriErrorHandler=Ln,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mn,afterPreactivation:Mn},this.urlHandlingStrategy=new Pn,this.routeReuseStrategy=new kn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(i.x),this.console=o.get(i.W);const h=o.get(i.z);this.isNgZoneEnabled=h instanceof i.z,this.resetConfig(l),this.currentUrlTree=new zt(new Wt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new jn(s,u,t=>this.triggerEvent(new Et(t)),t=>this.triggerEvent(new Ot(t))),this.routerState=me(this.currentUrlTree,this.rootComponentType),this.transitions=new c({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(k.a)(t=>0!==t.id),Object(I.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),B(t=>{let n=!1,r=!1;return Object(o.a)(t).pipe(st(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),B(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(o.a)(t).pipe(B(t=>{const n=this.transitions.getValue();return e.next(new pt(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?O:[t]}),B(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,a=this.config,function(t){return t.pipe(B(t=>function(t,e,n,r,i){return new on(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,a).pipe(Object(I.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),st(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(rt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new _n(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(I.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),st(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),st(t=>{const n=new mt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,a;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:a}=t,u=new pt(n,this.serializeUrl(r),i,s);e.next(u);const c=me(r,this.rootComponentType).snapshot;return Object(o.a)(Object.assign(Object.assign({},t),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},a),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),O}),An(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),st(t=>{const e=new yt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(I.a)(t=>Object.assign(Object.assign({},t),{guards:hn(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(rt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=n;return 0===u.length&&0===a.length?Object(o.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(s.a)(t).pipe(Object(rt.a)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Object(o.a)(!0);const a=s.map(o=>{const s=fn(o,e,i);let a;if(function(t){return t&&Be(t.canDeactivate)}(s))a=Ut(s.canDeactivate(t,e,n,r));else{if(!Be(s))throw new Error("Invalid CanDeactivate guard");a=Ut(s(t,e,n,r))}return a.pipe(nt())});return Object(o.a)(a).pipe(Ke())}(t.component,t.route,n,e,r)),nt(t=>!0!==t,!0))}(u,r,i,t).pipe(Object(rt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(s.a)(e).pipe(Object(et.a)(e=>Object(s.a)([vn(e.route.parent,r),gn(e.route,r),yn(t,e.path,n),mn(t,e.route,n)]).pipe(A(),nt(t=>!0!==t,!0))),nt(t=>!0!==t,!0))}(r,a,t,e):Object(o.a)(n)),Object(I.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),st(t=>{if(ze(t.guardsResult)){const e=xt(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),st(t=>{const e=new bt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(k.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new gt(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),An(t=>{if(t.guards.canActivateChecks.length)return Object(o.a)(t).pipe(st(t=>{const e=new _t(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),B(t=>{let n=!1;return Object(o.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(rt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(o.a)(t);let a=0;return Object(s.a)(n).pipe(Object(et.a)(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(o.a)({});const a={};return Object(s.a)(i).pipe(Object(rt.a)(i=>function(t,e,n,r){const i=fn(t,e,r);return Ut(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(st(t=>{a[i]=t}))),j(1),Object(rt.a)(()=>Object.keys(a).length===i.length?Object(o.a)(a):O))}(t._resolve,t,e,r).pipe(Object(I.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),be(t,n).resolve),null)))}(t.route,e,r,i)),st(()=>a++),j(1),Object(rt.a)(e=>a===n.length?Object(o.a)(t):O))}))}),st({next:()=>n=!0,complete:()=>{if(!n){const n=new gt(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),st(t=>{const e=new wt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),An(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(I.a)(t=>{const e=function(t,e,n){const r=Ie(t,e._root,n?n._root:void 0);return new ve(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),st(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(a=this.rootContexts,u=this.routeReuseStrategy,c=t=>this.triggerEvent(t),Object(I.a)(t=>(new Ve(u,t.targetRouterState,t.currentRouterState,c).activate(a),t))),st({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new gt(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new lt(i))),Y(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ze(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new gt(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new vt(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return O}));var i,a,u,c}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qe(t),this.config=t.map(Xe),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ne(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xe(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ft(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new xe(n,e,r)}(n);if(o.toRoot())return Ne(e.root,new Wt([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Re(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Re(t,t===e.root,0)}const r=Ae(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Re(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?De(s.segmentGroup,s.index,o.commands):Pe(s.segmentGroup,s.index,o.commands);return Ne(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ze(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(ze(t))return Vt(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Vt(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new dt(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.M),i.Ob($t),i.Ob(Rn),i.Ob(r.f),i.Ob(i.r),i.Ob(i.w),i.Ob(i.i),i.Ob(void 0))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac}),t})(),Un=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new a.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:qn(this.skipLocationChange),replaceUrl:qn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(Fn),i.Hb(ye),i.Pb("tabindex"),i.Hb(i.D),i.Hb(i.l))},t.\u0275dir=i.Cb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&i.Rb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[i.vb]}),t})(),Vn=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new a.a,this.subscription=t.events.subscribe(t=>{t instanceof dt&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:qn(this.skipLocationChange),replaceUrl:qn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qn(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(Fn),i.Hb(ye),i.Hb(r.g))},t.\u0275dir=i.Cb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&i.Rb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(i.Nb("href",e.href,i.ac),i.yb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[i.vb]}),t})();function qn(t){return""===t||!!t}let Hn=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof dt&&this.update()})}ngAfterContentInit(){Object(s.a)([this.links.changes,this.linksWithHrefs.changes,Object(o.a)(null)]).pipe(Object(S.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(s.a)(e).pipe(Object(S.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(Fn),i.Hb(i.l),i.Hb(i.D),i.Hb(i.h),i.Hb(Un,8),i.Hb(Vn,8))},t.\u0275dir=i.Cb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(i.Ab(n,Un,!0),i.Ab(n,Vn,!0)),2&t){let t;i.Xb(t=i.Sb())&&(e.links=t),i.Xb(t=i.Sb())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[i.vb]}),t})(),Bn=(()=>{class t{constructor(t,e,n,r,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.n,this.deactivateEvents=new i.n,this.name=r||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new zn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(i.Hb(Rn),i.Hb(i.O),i.Hb(i.j),i.Pb("name"),i.Hb(i.h))},t.\u0275dir=i.Cb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class zn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ye?this.route:t===Rn?this.childContexts:this.parent.get(t,e)}}class Wn{}class Kn{preload(t,e){return e().pipe(Y(()=>Object(o.a)(null)))}}class Gn{preload(t,e){return Object(o.a)(null)}}let Qn=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new jn(e,n,e=>t.triggerEvent(new Et(e)),e=>t.triggerEvent(new Ot(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(k.a)(t=>t instanceof dt),Object(et.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(s.a)(n).pipe(Object(S.a)(),Object(I.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(rt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(Fn),i.Ob(i.w),i.Ob(i.i),i.Ob(i.r),i.Ob(Wn))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac}),t})(),$n=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof dt&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof At&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new At(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(Fn),i.Ob(r.l),i.Ob(void 0))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac}),t})();const Jn=new i.q("ROUTER_CONFIGURATION"),Xn=new i.q("ROUTER_FORROOT_GUARD"),Yn=[r.f,{provide:$t,useClass:Jt},{provide:Fn,useFactory:function(t,e,n,i,o,s,a,u={},c,l){const h=new Fn(null,t,e,n,i,o,s,Lt(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=Object(r.o)();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[$t,Rn,r.f,i.r,i.w,i.i,Nn,Jn,[class{},new i.A],[class{},new i.A]]},Rn,{provide:ye,useFactory:function(t){return t.routerState.root},deps:[Fn]},{provide:i.w,useClass:i.J},Qn,Gn,Kn,{provide:Jn,useValue:{enableTracing:!1}}];function Zn(){return new i.y("Router",Fn)}let tr=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Yn,ir(e),{provide:Xn,useFactory:rr,deps:[[Fn,new i.A,new i.I]]},{provide:Jn,useValue:n||{}},{provide:r.g,useFactory:nr,deps:[r.k,[new i.p(r.a),new i.A],Jn]},{provide:$n,useFactory:er,deps:[Fn,r.l,Jn]},{provide:Wn,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Gn},{provide:i.y,multi:!0,useFactory:Zn},[or,{provide:i.d,multi:!0,useFactory:sr,deps:[or]},{provide:ur,useFactory:ar,deps:[or]},{provide:i.b,multi:!0,useExisting:ur}]]}}static forChild(e){return{ngModule:t,providers:[ir(e)]}}}return t.\u0275mod=i.Fb({type:t}),t.\u0275inj=i.Eb({factory:function(e){return new(e||t)(i.Ob(Xn,8),i.Ob(Fn,8))}}),t})();function er(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new $n(t,e,n)}function nr(t,e,n={}){return n.useHash?new r.d(t,e):new r.j(t,e)}function rr(t){return"guarded"}function ir(t){return[{provide:i.a,multi:!0,useValue:t},{provide:Nn,multi:!0,useValue:t}]}let or=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new a.a}appInitializer(){return this.injector.get(r.e,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Fn),r=this.injector.get(Jn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(o.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Jn),n=this.injector.get(Qn),r=this.injector.get($n),o=this.injector.get(Fn),s=this.injector.get(i.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),r.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.r))},t.\u0275prov=i.Db({token:t,factory:t.\u0275fac}),t})();function sr(t){return t.appInitializer.bind(t)}function ar(t){return t.bootstrapListener.bind(t)}const ur=new i.q("Router Initializer")},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("os0x"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.n)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),g=p.next();!g.done;g=p.next())e[g.value]._addComponent(a)}catch(v){u={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL"),i=n("ozzT"),o=n("9rNa"),s=n("3Pt+");const a=["f"];let u=(()=>{class t{constructor(t){this.slService=t,this.editMode=!1}onSubmit(t){const e=t.value,n=new o.a(e.name,e.amount);this.editMode?this.slService.updateIngredient(this.editedIndex,n):this.slService.addIngredient(n),this.editMode=!1,t.reset()}onDelete(){this.slService.deleteIngredient(this.editedIndex),this.onClear()}onClear(){this.shoppingListForm.reset(),this.editMode=!1}ngOnInit(){this.subscription=this.slService.startedEditing.subscribe(t=>{this.editMode=!0,this.editedIndex=t,this.editedItem=this.slService.getIngredient(t),this.shoppingListForm.setValue({name:this.editedItem.name,amount:this.editedItem.amount})})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(i.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-shopping-edit"]],viewQuery:function(t,e){if(1&t&&r.hc(a,!0),2&t){let t;r.Xb(t=r.Sb())&&(e.shoppingListForm=t.first)}},decls:21,vars:3,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit"],["f","ngForm"],[1,"col-md-5","form-group"],["for","text"],["type","text","name","name","ngModel","","required","",1,"form-control"],[1,"col-md-2","form-group"],["type","number","name","amount","ngModel","","required","","pattern","^[1-9]+[0-9]*$",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-danger",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=r.Lb();r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"form",2,3),r.Rb("ngSubmit",function(){r.Zb(t);const n=r.Yb(3);return e.onSubmit(n)}),r.Kb(4,"div",0),r.Kb(5,"div",4),r.Kb(6,"label",5),r.dc(7,"Name"),r.Jb(),r.Ib(8,"input",6),r.Jb(),r.Kb(9,"div",7),r.Kb(10,"label",5),r.dc(11,"Amount"),r.Jb(),r.Ib(12,"input",8),r.Jb(),r.Jb(),r.Kb(13,"div",0),r.Kb(14,"div",1),r.Kb(15,"button",9),r.dc(16),r.Jb(),r.Kb(17,"button",10),r.Rb("click",function(){return e.onDelete()}),r.dc(18,"Delete"),r.Jb(),r.Kb(19,"button",11),r.Rb("click",function(){return e.onClear()}),r.dc(20,"Clear"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&t){const t=r.Yb(3);r.xb(15),r.Ub("disabled",!t.valid),r.xb(1),r.ec(e.editMode?"Update":"Add"),r.xb(1),r.Ub("disabled",!e.editMode)}},directives:[s.s,s.k,s.l,s.a,s.j,s.m,s.q,s.n,s.o],styles:[""]}),t})();var c=n("ofXK");function l(t,e){if(1&t){const t=r.Lb();r.Kb(0,"a",4),r.Rb("click",function(){r.Zb(t);const n=e.index;return r.Tb().onEditItem(n)}),r.dc(1),r.Jb()}if(2&t){const t=e.$implicit;r.xb(1),r.gc(" ",t.name," (",t.amount,") ")}}let h=(()=>{class t{constructor(t){this.shoppingListService=t}ngOnInit(){this.ingredients=this.shoppingListService.getIngredients(),this.subscription=this.shoppingListService.ingredientChange.subscribe(t=>{this.ingredients=t})}onEditItem(t){this.shoppingListService.startedEditing.next(t)}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(i.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-shopping-list"]],decls:6,vars:1,consts:[[1,"row"],[1,"col-md-10"],[1,"list-group"],["class","list-group-item","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(r.Kb(0,"div",0),r.Kb(1,"div",1),r.Ib(2,"app-shopping-edit"),r.Ib(3,"hr"),r.Kb(4,"ul",2),r.cc(5,l,2,2,"a",3),r.Jb(),r.Jb(),r.Jb()),2&t&&(r.xb(5),r.Ub("ngForOf",e.ingredients))},directives:[u,c.h],styles:[""]}),t})();var f=n("tyNb");const p=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Bb({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Kb(0,"h2"),r.dc(1,"Welcome to the Recipe Book"),r.Jb())},styles:[""]}),t})()},{path:"recipes",loadChildren:()=>n.e(4).then(n.bind(null,"7Lvj")).then(t=>t.RecipesModule)},{path:"shopping-list",component:h}];let d=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[f.f.forRoot(p,{preloadingStrategy:f.b})],f.f]}),t})();class g extends c.m{constructor(){super()}supportsDOMEvents(){return!0}}class v extends g{static makeCurrent(){Object(c.q)(new v)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=y||(y=document.querySelector("base"),y)?y.getAttribute("href"):null;return null==e?null:(n=e,m||(m=document.createElement("a")),m.setAttribute("href",n),"/"===m.pathname.charAt(0)?m.pathname:"/"+m.pathname);var n}resetBaseElement(){y=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(c.p)(document.cookie,t)}}let m,y=null;const b=new r.q("TRANSITION_ID"),_=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=Object(c.o)();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[b,c.c,r.r],multi:!0}];class w{static init(){Object(r.V)(new w)}addToWindow(t){r.mb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.mb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.mb.getAllAngularRootElements=()=>t.getAllRootElements(),r.mb.frameworkStabilizers||(r.mb.frameworkStabilizers=[]),r.mb.frameworkStabilizers.push(t=>{const e=r.mb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Object(c.o)().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const E=new r.q("EventManagerPlugins");let O=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(E),r.Ob(r.z))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();class C{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Object(c.o)().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let T=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),I=(()=>{class t extends T{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Object(c.o)().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();const S={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},A=/%COMP%/g;function k(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?k(t,i,n):(i=i.replace(A,t),n.push(i))}return n}function N(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let j=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new x(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.P.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new R(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.P.ShadowDom:return new P(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=k(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(O),r.Ob(I),r.Ob(r.c))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();class x{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(S[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=S[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=S[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.F.DashCase|r.F.Important)?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,N(n)):this.eventManager.addEventListener(t,e,N(n))}}class R extends x{constructor(t,e,n,r){super(t),this.component=n;const i=k(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(A,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(A,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class P extends x{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=k(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let D=(()=>{class t extends C{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();const L=["alt","control","meta","shift"],M={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},U={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let V=(()=>{class t extends C{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Object(c.o)().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(L.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&F.hasOwnProperty(e)&&(e=F[e]))}return M[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),L.forEach(r=>{r!=n&&(0,U[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();const q=[{provide:r.B,useValue:c.n},{provide:r.C,useValue:function(){v.makeCurrent(),w.init()},multi:!0},{provide:c.c,useFactory:function(){return Object(r.rb)(document),document},deps:[]}],H=Object(r.Q)(r.U,"browser",q),B=[[],{provide:r.X,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:E,useClass:D,multi:!0,deps:[c.c,r.z,r.B]},{provide:E,useClass:V,multi:!0,deps:[c.c]},[],{provide:j,useClass:j,deps:[O,I,r.c]},{provide:r.E,useExisting:j},{provide:T,useExisting:I},{provide:I,useClass:I,deps:[c.c]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:O,useClass:O,deps:[E,r.z]},[]];let z=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:b,useExisting:r.c},_]}}}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)(r.Ob(t,12))},providers:B,imports:[c.b,r.f]}),t})();"undefined"!=typeof window&&window;var W=n("zIRd");W.a.registerVersion("firebase","8.1.1","app");var K=n("lJxs"),G=n("LRne"),Q=n("HDdC"),$=n("bOdf"),J=n("pLZG");class X{}class Y{}class Z{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Z?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Z;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Z?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class tt{encodeKey(t){return et(t)}encodeValue(t){return et(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function et(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class nt{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new tt,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new nt({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function rt(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function it(t){return"undefined"!=typeof Blob&&t instanceof Blob}function ot(t){return"undefined"!=typeof FormData&&t instanceof FormData}class st{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Z),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new nt,this.urlWithParams=e}serializeBody(){return null===this.body?null:rt(this.body)||it(this.body)||ot(this.body)||"string"==typeof this.body?this.body:this.body instanceof nt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ot(this.body)?null:it(this.body)?this.body.type||null:rt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new st(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var at=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class ut{constructor(t,e=200,n="OK"){this.headers=t.headers||new Z,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class ct extends ut{constructor(t={}){super(t),this.type=at.ResponseHeader}clone(t={}){return new ct({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class lt extends ut{constructor(t={}){super(t),this.type=at.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new lt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ht extends ut{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ft(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let pt=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof st)r=t;else{let i=void 0;i=n.headers instanceof Z?n.headers:new Z(n.headers);let o=void 0;n.params&&(o=n.params instanceof nt?n.params:new nt({fromObject:n.params})),r=new st(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(G.a)(r).pipe(Object($.a)(t=>this.handler.handle(t)));if(t instanceof st||"events"===n.observe)return i;const o=i.pipe(Object(J.a)(t=>t instanceof lt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(K.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(K.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(K.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(K.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new nt).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ft(n,e))}post(t,e,n={}){return this.request("POST",t,ft(n,e))}put(t,e,n={}){return this.request("PUT",t,ft(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(X))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();class dt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const gt=new r.q("HTTP_INTERCEPTORS");let vt=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();const mt=/^\)\]\}',?\n/;class yt{}let bt=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),_t=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Q.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Z(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new ct({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(mt,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new lt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new ht({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new ht({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:at.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:at.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:at.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(yt))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();const wt=new r.q("XSRF_COOKIE_NAME"),Et=new r.q("XSRF_HEADER_NAME");class Ot{}let Ct=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.p)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(c.c),r.Ob(r.B),r.Ob(wt))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),Tt=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Ot),r.Ob(Et))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),It=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(gt,[]);this.chain=t.reduceRight((t,e)=>new dt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Y),r.Ob(r.r))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})(),St=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Tt,useClass:vt}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:wt,useValue:e.cookieName}:[],e.headerName?{provide:Et,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[Tt,{provide:gt,useExisting:Tt,multi:!0},{provide:Ot,useClass:Ct},{provide:wt,useValue:"XSRF-TOKEN"},{provide:Et,useValue:"X-XSRF-TOKEN"}]}),t})(),At=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[pt,{provide:X,useClass:It},_t,{provide:Y,useExisting:_t},bt,{provide:yt,useExisting:bt}],imports:[[St.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var kt=n("ceC1"),Nt=n("qXBG");let jt=(()=>{class t{constructor(t,e,n){this.http=t,this.recipeService=e,this.authService=n}storeRecipes(){const t=this.authService.getToken();return this.http.put("https://angular-tutorial-c5cc6.firebaseio.com/recipes.json?auth="+t,this.recipeService.getRecipes())}getRecipe(){const t=this.authService.getToken();return this.http.get("https://angular-tutorial-c5cc6.firebaseio.com/recipes.json?auth="+t).pipe(Object(K.a)(t=>{const e=t;for(const n of e)n.ingredients||(n.ingredients=[]);return e})).subscribe(t=>{this.recipeService.setRecipes(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(pt),r.Ob(kt.a),r.Ob(Nt.a))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac}),t})();var xt=n("3V6w");function Rt(t,e){1&t&&(r.Kb(0,"li"),r.Kb(1,"a",13),r.dc(2,"Register"),r.Jb(),r.Jb(),r.Kb(3,"li"),r.Kb(4,"a",14),r.dc(5,"Log In"),r.Jb(),r.Jb())}function Pt(t,e){if(1&t){const t=r.Lb();r.Kb(0,"li"),r.Kb(1,"a",15),r.Rb("click",function(){return r.Zb(t),r.Tb().onLogout()}),r.dc(2," Log Out "),r.Jb(),r.Jb()}}function Dt(t,e){if(1&t){const t=r.Lb();r.Kb(0,"li",16),r.Kb(1,"a",17),r.dc(2,"Manage "),r.Ib(3,"span",18),r.Jb(),r.Kb(4,"ul",19),r.Kb(5,"li"),r.Kb(6,"a",15),r.Rb("click",function(){return r.Zb(t),r.Tb().onSaveData()}),r.dc(7,"Saving Data"),r.Jb(),r.Jb(),r.Kb(8,"li"),r.Kb(9,"a",15),r.Rb("click",function(){return r.Zb(t),r.Tb().onFetchData()}),r.dc(10,"Fetching Data"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}}let Lt=(()=>{class t{constructor(t,e){this.dataStorageService=t,this.authService=e,this.featureSelected=new r.n}onSelect(t){this.featureSelected.emit(t)}onSaveData(){this.dataStorageService.storeRecipes().subscribe(t=>{console.log(t)})}onFetchData(){this.dataStorageService.getRecipe()}onLogout(){this.authService.logOut()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(jt),r.Hb(Nt.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-header"]],outputs:{featureSelected:"featureSelected"},decls:17,vars:3,consts:[[1,"navbar","navbar-default"],[1,"container-fluid"],[1,"navbar-header"],["routerLink","/",1,"navbar-brand"],[1,"collapse","navbar-collapse"],[1,"nav","navbar-nav"],["routerLinkActive","active"],["routerLink","/recipes"],["routerLink","/shopping-list"],[1,"nav","navbar-nav","navbar-right"],[3,"ngIf"],[4,"ngIf"],["class","dropdown","appDropdown","",4,"ngIf"],["routerLink","/signup"],["routerLink","/signin"],[2,"cursor","pointer",3,"click"],["appDropdown","",1,"dropdown"],["role","button",1,"dropdown-toggle",2,"cursor","pointer"],[1,"caret"],[1,"dropdown-menu"]],template:function(t,e){1&t&&(r.Kb(0,"nav",0),r.Kb(1,"div",1),r.Kb(2,"div",2),r.Kb(3,"a",3),r.dc(4,"Recipe Book"),r.Jb(),r.Jb(),r.Kb(5,"div",4),r.Kb(6,"ul",5),r.Kb(7,"li",6),r.Kb(8,"a",7),r.dc(9,"Recipe"),r.Jb(),r.Jb(),r.Kb(10,"li",6),r.Kb(11,"a",8),r.dc(12,"Shopping List"),r.Jb(),r.Jb(),r.Jb(),r.Kb(13,"ul",9),r.cc(14,Rt,6,0,"ng-template",10),r.cc(15,Pt,3,0,"li",11),r.cc(16,Dt,11,0,"li",12),r.Jb(),r.Jb(),r.Jb(),r.Jb()),2&t&&(r.xb(14),r.Ub("ngIf",!e.authService.isAuthenticated()),r.xb(1),r.Ub("ngIf",e.authService.isAuthenticated()),r.xb(1),r.Ub("ngIf",e.authService.isAuthenticated()))},directives:[f.e,f.d,c.i,xt.a],styles:[""]}),t})(),Mt=(()=>{class t{constructor(){this.loadedFeature="recipe"}ngOnInit(){W.a.initializeApp({apiKey:"AIzaSyDBnbH0wnZc-BO_FReSPW74spYr5D9KWfs",authDomain:"angular-tutorial-c5cc6.firebaseapp.com"})}onNavigate(t){this.loadedFeature=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Bb({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-12"]],template:function(t,e){1&t&&(r.Ib(0,"app-header"),r.Kb(1,"div",0),r.Kb(2,"div",1),r.Kb(3,"div",2),r.Ib(4,"router-outlet"),r.Jb(),r.Jb(),r.Jb())},directives:[Lt,f.g],styles:["h3[_ngcontent-%COMP%]{color:#00f}"]}),t})();var Ft=n("PCNd");let Ut=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[c.b,s.i]]}),t})(),Vt=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}onSignIn(t){this.authService.signInUser(t.value.email,t.value.password)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(Nt.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-signin"]],decls:14,vars:1,consts:[[1,"row"],[1,"col-md-8","col-sm-10","col-sm-offset-1","col-md-offset-2"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","ngModel","",1,"form-control"],["for","password"],["type","password","id","password","name","password","ngModel","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,e){if(1&t){const t=r.Lb();r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"form",2,3),r.Rb("ngSubmit",function(){r.Zb(t);const n=r.Yb(3);return e.onSignIn(n)}),r.Kb(4,"div",4),r.Kb(5,"label",5),r.dc(6," Email "),r.Jb(),r.Ib(7,"input",6),r.Jb(),r.Kb(8,"div",4),r.Kb(9,"label",7),r.dc(10," Password "),r.Jb(),r.Ib(11,"input",8),r.Jb(),r.Kb(12,"button",9),r.dc(13,"Sign In"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}if(2&t){const t=r.Yb(3);r.xb(12),r.Ub("disabled",!t.valid)}},directives:[s.s,s.k,s.l,s.a,s.j,s.m],styles:[""]}),t})();const qt=[{path:"signup",component:(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}onSignUp(t){this.authService.signUp(t.value.email,t.value.password)}}return t.\u0275fac=function(e){return new(e||t)(r.Hb(Nt.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-signup"]],decls:14,vars:0,consts:[[1,"row"],[1,"col-md-8","col-sm-10","col-sm-offset-1","col-md-offset-2"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","ngModel","",1,"form-control"],["for","password"],["type","password","id","password","name","password","ngModel","",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){if(1&t){const t=r.Lb();r.Kb(0,"div",0),r.Kb(1,"div",1),r.Kb(2,"form",2,3),r.Rb("ngSubmit",function(){r.Zb(t);const n=r.Yb(3);return e.onSignUp(n)}),r.Kb(4,"div",4),r.Kb(5,"label",5),r.dc(6," Email "),r.Jb(),r.Ib(7,"input",6),r.Jb(),r.Kb(8,"div",4),r.Kb(9,"label",7),r.dc(10," Password "),r.Jb(),r.Ib(11,"input",8),r.Jb(),r.Kb(12,"button",9),r.dc(13,"Sign Up"),r.Jb(),r.Jb(),r.Jb(),r.Jb()}},directives:[s.s,s.k,s.l,s.a,s.j,s.m],styles:[""]}),t})()},{path:"signin",component:Vt}];let Ht=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[f.f.forChild(qt)],f.f]}),t})(),Bt=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},imports:[[s.i,Ht]]}),t})();var zt=n("KFp4");let Wt=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[i.a,kt.a,jt,zt.a,Nt.a],imports:[[Ft.a,d],d]}),t})(),Kt=(()=>{class t{}return t.\u0275mod=r.Fb({type:t,bootstrap:[Mt]}),t.\u0275inj=r.Eb({factory:function(e){return new(e||t)},providers:[],imports:[[z,At,Ut,d,Bt,Ft.a,Wt]]}),t})();Object(r.R)(),H().bootstrapModule(Kt).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);